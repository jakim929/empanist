<template name="ProfileLayout">
    <header>
        <h1> Profile </h1>
        <link rel="stylesheet" href="styles/custom.css">
    </header>
    <main>
      {{#if validId}}
        {{#if isOwnProfile}}
          {{> editProfile}}<br>
          {{> Template.dynamic template="accountTemplate" data=myAccount}}
          {{> Template.dynamic template="profileTemplate" data=myProfile}}<br>
        {{else}}
          {{#if routeAccompanistProfiles}}
            {{> bookAccompanist}}<br>
            {{> Template.dynamic template="accountTemplate" data=routeAccount}}
            {{> Template.dynamic template="profileTemplate" data=routeProfile}}<br>
            {{> Template.dynamic template="accompanistProfileTemplate" data=routeAccompanistProfiles}}
          {{else}}
          {{> Template.dynamic template="accountTemplate" data=routeAccount}}
          {{> Template.dynamic template="profileTemplate" data=routeProfile}}<br>
          {{/if}}
        {{/if}}
      {{else}}
        {{> invalidId}}
      {{/if}}
    </main>
</template>

<template name="invalidId">
  <h2>Invalid ID</h2>
</template>

<template name="editProfile">
  <button><a href="/addinfo">Edit Profile</a></button>
</template>


<template name="accountTemplate">
  <div class="col s12">
    <div class="card-panel hoverable grey lighten-5 z-depth-1">
      <span class="black-text">
        <h5>Account Details</h5>
        <h10>Name: {{name}}</h10>
        <h10>Birthday: {{birthDate}}</h10>
        <h10>Phone Number: {{phone}}</h10>
        <h10>Affiliation: {{affiliation}}</h10>
     </span>
    </div>
  </div>
</template>
<!--  {{#if isOwnProfile}}
  {{/if}}
-->

<template name="profileTemplate">
  <section class="myprofile">
      <div class="col s12">
        <div class="card-panel hoverable grey lighten-5 z-depth-1">
          <span class="black-text">
            <h5>Instruments Mastered: {{instrument}}</h5>
          <h10>Years Played: {{yearsPlayed}}</h10>
         </span>
        </div>
      </div>
      <!--  {{#if isOwnProfile}}
      edit profile
  {{/if}}
-->

      <div class="col s12">
        <div class="card-panel hoverable grey lighten-5 z-depth-1">
          <span class="black-text">
            <h5>Awards: </h5>
              {{#each awards}}
                Name: {{name}}<br>
                Date: {{date}}<br>
              {{/each}}
         </span>
        </div>
      </div>
      <!--  {{#if isOwnProfile}}
      edit / add
  {{/if}}
-->
      
      <div class="col s12">
        <div class="card-panel hoverable grey lighten-5 z-depth-1">
          <span class="black-text">
             <h5>Music Programs: </h5>
              {{#each musicPrograms}}
                Institution Name: {{instName}}<br>
                Program Name: {{programName}}<br>
                Start Date: {{startDate}}<br>
                End Date: {{endDate}}<br>
              {{/each}}
         </span>
        </div>
      </div>
      <!--  {{#if isOwnProfile}}
            edit / add
  {{/if}}
-->
      
       <div class="col s12">
        <div class="card-panel hoverable grey lighten-5 z-depth-1">
          <span class="black-text">
            <h5>Orchestras Participated in: </h5>
              {{#each orchestras}}
                Name: {{name}}<br>
                Position: {{position}}<br>
                Start Date: {{startDate}}<br>
                End Date: {{endDate}}<br>
              {{/each}}
         </span>
        </div>
      </div>
      <!--  {{#if isOwnProfile}}
            edit / add
  {{/if}}
-->
    
  </section>
</template>

<!-- template to edit profile -->
<!-- template to edit/add inst -->
<!-- template to edit/add awards -->
<!-- template to edit/add progs -->
<!-- template to edit/add orchestra -->


<template name="accompanistProfileTemplate">
  <h3>Accompanist Profile</h3>
  <h5>Repertoire: </h5>
    {{#each repertoire}}
      {{this}}<br>
    {{/each}}
  <hr>
  <h5>Start Date: {{startDate}}</h5>
  <h5>End Date: {{endDate}}</h5>
  <h5>Hourly Rate: ${{charge}}/HR</h5>
  <h5>Preferred Working Time: /{{#each working_hours}}{{this}}/{{/each}}</h5>
  <h5>Working Hours: /{{#each working_hours}}{{this}}/{{/each}}</h5>
  <h5>Working Days: /{{#each working_days}}{{this}}/{{/each}}</h5>
  <h5>Session Location: {{session_location}}</h5>
  <h5>My Location: {{mylocation}}</h5>
  <hr>
  <h5>One Liner: {{one_liner}}</h5>
</template>


<template name="bookAccompanist">
  <h3>Book Accompanist</h3>
  {{#autoForm collection="Transactions" doc=defaultTransaction id="bookAccompanist" type="insert"}}
    <fieldset>
      {{>afQuickField name="musician"}}
      {{>afQuickField name="accompanist"}}
      {{>afQuickField name="status"}}
      {{>afQuickField name="repertoire"}}
      {{>afQuickField name="startDate"}}
      {{>afQuickField name="endDate"}}
      <button type="submit" class="btn btn-primary">Book Accompanist</button>
    </fieldset>
  {{/autoForm}}
</template>
