
<!-- SECTION: Basic Profile -->

<template name="basicMyProfile">
  {{> Template.dynamic template="upsertBasicProfileForm" data="myProfile"}}
</template>

<template name="basicNewAccomp">
   <div class="progress">
      <div class="determinate" style="width: 100%"></div>
  </div>
<br>
  <h5>Clarify some basics</h5>

  <div class="left-basic">
    <div class=" centerIt smallMargin formsTopMargin">
      {{> upsertBasicProfileForm }}
    </div>
  </div>

  <div class="basic-advice">
    <div class="card grey lighten-5 z-depth-0">
      <div class="card-content">
        <i class="small material-icons prefix blue-text text-darken-2">school</i>
        <br>
        <h10>
          Entering in your school affiliation allows you to connect to fellow students and alumni, enabling you to create relationships that go beyond the practice room
        </h10>
      </div>
    </div>
  </div>

</template>

<!-- SECTION: Upsert Forms -->
<template name="upsertBasicProfileForm">
  {{#if isInRole 'makeBasicProfile'}}
    {{#autoForm collection="BasicProfiles" validation="keyup" doc=currentBasicProfile id="upsertBasicProfileForm" type=formType}}
        <div class="row">
          <div class="input-field col s6">
            <i class="material-icons prefix">account_circle</i>
            {{>afFieldInput name="name" id="name" type="text"}}
            <label for="name" class="active" >Full Name</label>
          </div>
           <div class="input-field col s6">
            <i class="material-icons prefix">phone</i>
            {{>afFieldInput name="phone" id="phone" type="text"}}
            <label for="phone" class="active">Telephone</label>
          </div>
        </div>
        <div class="input-field col s6">
          <i class="material-icons prefix">child_friendly</i>
            {{>afFieldInput name="birthDate" id="birth" type="date"}}
            <label class="active">Birth Date</label>
        </div>
        <div class="input-field col s6">
          <i class="material-icons prefix">business_center</i>
            {{>afFieldInput name="affiliation" id="affiliation" type="text"}}
          <label class="active">Affiliation</label>
        </div>
        <br>
        {{#if fromProfile this}}
          <button type="submit" class=" card-title {{this}} btn right btn-primary "  id="basicProfile">Save</button>
        {{else}}
          {{#if basicNotValid}}
            <button type="submit" class=" {{this}} btn right btn-primary "  id="basicProfile">Save</button>
            {{else}}
            <button type="submit" class=" {{this}} btn right btn-primary disabled"  disabled id="basicProfile">Save</button>
          {{/if}}
        {{/if}}
    {{/autoForm}}
  {{/if}}
</template>

<template name="upsertMusicProfileForm">
  {{#if isInRole 'makeMusicProfile'}}
  <div class="progress">
      <div class="determinate" style="width: 25%"></div>
  </div>
  <br>
  {{#if musicProfileExists}}
    <div class="row">
      <div class="col s12">
        <ul class="tabs grey lighten-3 z-depth-0">
          {{#each tabs}}
            <li class="tab col s1"><a class={{title}}>{{title}}</a></li>
          {{/each}}
        </ul>
      </div>
    </div>
  {{/if}}
  <div>
    <h5>{{question}}</h5>
  </div>
  <div class="formsTopMargin">
    {{#autoForm collection="MusicProfiles" doc=currentProfile id="upsertMusicProfileForm" type=formType}}
      <div class="scrollable ">
        <div class="instrument">
          {{> afArrayField name="instruments" template="newAccompCustomArrayField"}}
        </div>

        <div class="award">
          {{> afArrayField name="awards" template="newAccompCustomArrayField"}}
        </div>

        <div class="program">
          {{> afArrayField name="musicPrograms" template="newAccompCustomArrayField"}}
        </div>

        <div class="orchestra">
          {{> afArrayField name="orchestras" template="newAccompCustomArrayField"}}
        </div>
      </div>

      <div class="music-advice">
        <div class="card grey lighten-5 z-depth-0">
          <div class="card-content">
            {{#with advice}}
            <i class="small material-icons prefix blue-text text-darken-2">{{icon}}</i>
            <br>
            <h10>
             {{text}}
            </h10>
            {{/with}}
          </div>
        </div>
      </div>

      <div class="backNext">
        <hr>
        {{#unless shouldShow "orchestras"}}
          <a class="next-{{button}} right waves-effect waves-light btn">Next</a>
          {{else}}
           <button type="submit" class="right btn btn-primary">Save</button>
        {{/unless}}
        {{#unless shouldShow "instruments"}}
          <a class="back-{{button}} left waves-effect waves-light btn">Back</a>
        {{/unless}}
      </div>
    {{/autoForm}}
  </div>

  {{/if}}
</template>

<template name="upsertAccompanistForm">
  <div class="progress">
      <div class="determinate" style="width: 0%"></div>
  </div>
   <br>
  {{#if accompanistProfileExists}}
    <div class="row">
      <div class="col s12">
        <ul class="tabs grey lighten-3 z-depth-0">
          {{#each tabs}}
            <li class="tab col s1"><a class={{title}}>{{title}}</a></li>
          {{/each}}
        </ul>
      </div>
    </div>
  {{/if}}
  <div>
    <h5>{{question}}</h5>
  </div>
  <div class="formsTopMargin">
    {{#autoForm collection="AccompanistProfiles" doc=currentAccompanistProfiles id="upsertAccompanistForm" type=formType}}
      <div class="scrollable">
        <div class="repertoire">
          {{> afArrayField name="repertoire" template="newAccompCustomArrayField"}}
        </div>

        <div class="charge">
          {{> afQuickField name="charge"}}
        </div>

        <div class="working_hours">
          {{> afQuickField name="working_hours"}}
        </div>

        <div class="working_days">
          {{> afQuickField name="working_days"}}
        </div>

        <div class="accompanist_active">
          {{> afQuickField name="accompanist_active"}}
        </div>

        <div class="session_location">
          {{> afQuickField name="session_location"}}
        </div>

        <div class="mylocation">

          {{> afQuickField name="mylocation"}}
          <!-- {{>afFieldInput name="mylocation" class="autocomplete" id="autocomplete" type="text"}}
 -->     </div>

        <div class="one_liner">
          {{> afQuickField name="one_liner"}}
        </div>
      </div>

      <div class="music-advice">
        <div class="card grey lighten-5 z-depth-0">
          <div class="card-content">
            {{#with advice}}
            <i class="small material-icons prefix blue-text text-darken-2">{{icon}}</i>
            <br>
            <h10>
             {{text}}
            </h10>
            {{/with}}
          </div>
        </div>
      </div>

      <div class="backNext">
        <hr>
        {{#unless shouldShow "one_liner"}}
          {{#if AccompNotValid name}}
            <button  class="next-{{name}} right waves-effect waves-light btn disabled " disabled>Next</button>
            {{else}}
            <a class="next-{{name}} right waves-effect waves-light btn " >Next</a>
          {{/if}}
          {{else}}
          <button type="submit" class=" btn right btn-primary">Save</button>
        {{/unless}}
        {{#unless shouldShow "repertoire"}}
          <a class="back-{{name}} left waves-effect waves-light btn">Back</a>
        {{/unless}}
      </div>

    {{/autoForm}}
  </div>
<!--  -->
</template>

<!-- SECTION: New Accompanist CustomArrayField-->

<template name="afArrayField_newAccompCustomArrayField">
  {{#if afFieldIsInvalid name=atts.name}}
    <span>{{{afFieldMessage name=atts.name}}}</span>
  {{/if}}
  <div class="card grey lighten-5 z-depth-0">
    <div class="card-content">
 <!--      <h5>
        {{#unless fromBookingTime this}}
          {{#if fromBooking this}}
            <i id="align_text" class="medium material-icons">{{icon atts.name}}</i>
          {{/if}}
          {{mainTitle atts.name}}
        {{/unless}}
      </h5> -->
      {{#afEachArrayItem name=atts.name minCount=this.atts.minCount maxCount=this.atts.maxCount}}

        {{#if afArrayFieldHasMoreThanMinimum name=../atts.name minCount=../atts.minCount maxCount=../atts.maxCount}}
          <span class="autoform-remove-item"><i class="material-icons right">close</i></span>
        {{/if}}

        {{> UI.dynamic template=../atts.name}}

      {{/afEachArrayItem}}
   </div>
  {{#if afArrayFieldHasLessThanMaximum name=atts.name minCount=this.atts.minCount maxCount=this.atts.maxCount}}
    <center>
      <button
        type="button"
        class="add-btn autoform-add-item grey"
        data-autoform-field="{{atts.name}}"
        data-autoform-minCount="{{atts.minCount}}"
        data-autoform-maxCount="{{atts.maxCount}}">
          Add {{add_title atts.name}}
      </button>
    </center>
  {{/if}}
  </div>
</template>

<template name="afArrayField_firstCustomArrayField">
  {{#if afFieldIsInvalid name=atts.name}}
    <span>{{{afFieldMessage name=atts.name}}}</span>
  {{/if}}
      <!-- <h5>
        {{mainTitle atts.name}}
      </h5> -->
      {{#afEachArrayItem name=atts.name minCount=this.atts.minCount maxCount=this.atts.maxCount}}

        {{> UI.dynamic template=../atts.name}}
      {{/afEachArrayItem}}
</template>

<!-- SECTION: Edit My Profile CustomArrayField -->

<template name="afArrayField_editProfileCustomArrayField">
  {{#if afFieldIsInvalid name=atts.name}}
    <span>{{{afFieldMessage name=atts.name}}}</span>
  {{/if}}
      <h5>
        <i id="align_text" class="medium material-icons">{{icon atts.name}}</i>
        {{mainTitle atts.name}}
      </h5>
      {{#afEachArrayItem name=atts.name minCount=this.atts.minCount maxCount=this.atts.maxCount}}
       {{#if afArrayFieldHasMoreThanMinimum name=../atts.name minCount=../atts.minCount maxCount=../atts.maxCount}}
          <span class="autoform-remove-item"><i class="material-icons right">delete</i></span>
        {{/if}}
        {{> UI.dynamic template=../atts.name}}
      {{/afEachArrayItem}}
</template>

<!-- SECTION: Block HTML content for array construction... fields in array html -->

<!-- MusicProfile Array -->
<template name="awards">
 {{#if fromProfile this}}
    <div class="row">
      <br>
      <div class="input-field col s6">
          {{> afFieldInput name="name" id="comp.name" type="text"}}
        <label for="comp.name">Competition Name</label>
      </div>
       <div class="input-field col s6">
          {{> afFieldInput name="award" id="icon_name" type="text"}}
          <label for="icon_name">Award Title</label>
      </div>
    </div>
    <div class="row">
    <div class="input-field col s6">
      {{> afFieldInput name="date" id="test"  type="date"}}
      <label class="active">Date Won</label>
    </div>
     <button type="submit" class="btn right btn-primary">Submit</button>
    </div>
    {{else}}
     <div class="row">
    <br>
      <div class="input-field col s6">
          {{> afFieldInput name=this.current.name id="comp.name" type="text"}}
        <label for="comp.name" class="active">Competition Name</label>
      </div>
       <div class="input-field col s6">
          {{> afFieldInput name=this.current.award id="icon_name" type="text"}}
        <label for="icon_name" class="active">Award Title</label>
      </div>
    </div>
    <div class="input-field col s6">
      {{> afFieldInput name=this.current.date type="date"}}
      <label class="active">Date Won</label>
    </div> <br><br><br>
  {{/if}}
  </template>

<template name="musicPrograms">
  {{#if fromProfile this}}
    <div class="row">
    <br>
      <div class="input-field col s6">
          {{> afFieldInput name="programName" id="comp.name" type="text"}}
        <label for="comp.name">Program Name</label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s6">
        {{> afFieldInput name="startDate" type="date"}}
        <label class="active">Start Date</label>
      </div>
       <div class="input-field col s6">
        {{> afFieldInput name="endDate" type="date"}}
        <label class="active">End Date</label>
      </div>
       <button type="submit" class="{{this}} btn right btn-primary">Submit</button>
       <br>
    </div>
    {{else}}
    <div class="row">
    <br>
      <div class="input-field col s6">
          {{> afFieldInput name=this.current.programName id="comp.name" type="text"}}
        <label for="comp.name" class="active">Program Name</label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s6">
        {{> afFieldInput name=this.current.startDate type="date"}}
        <label class="active">Start Date</label>
      </div>
       <div class="input-field col s6">
        {{> afFieldInput name=this.current.endDate type="date"}}
        <label class="active">End Date</label>
      </div>
    </div>
    {{/if}}
</template>

<template name="orchestras">
  {{#if fromProfile this}}
  <div class="row">
    <br>
    <div class="input-field col s6">
        {{> afFieldInput name="name" id="comp.name" type="text"}}
      <label for="comp.name">Orchestra Name</label>
    </div>
    <div class="input-field col s6">
        {{> afFieldInput name="position" id="comp.name" type="text"}}
      <label for="comp.name">Position</label>
    </div>
  </div>
  <div class="row">
    <div class="input-field col s6">
      {{> afFieldInput name="startDate" type="date"}}
      <label class="active">Start Date</label>
    </div>
     <div class="input-field col s6">
      {{> afFieldInput name="endDate" type="date"}}
      <label class="active">End Date</label>
    </div>
    <button type="submit" class="{{this}} btn right btn-primary">Submit</button>

  </div>
  {{else}}
  <div class="row">
    <br>
    <div class="input-field col s6">
        {{> afFieldInput name=this.current.name id="comp.name" type="text"}}
      <label for="comp.name" class="active">Orchestra Name</label>
    </div>
    <div class="input-field col s6">
        {{> afFieldInput name=this.current.position id="comp.name" type="text"}}
      <label for="comp.name" class="active">Position</label>
    </div>
  </div>
  <div class="row">
    <div class="input-field col s6">
      {{> afFieldInput name=this.current.startDate type="date"}}
      <label class="active">Start Date</label>
    </div>
     <div class="input-field col s6">
      {{> afFieldInput name=this.current.endDate type="date"}}
      <label class="active">End Date</label>
    </div>
  </div>
  {{/if}}
</template>

<template name="instruments">
  {{#if fromProfile this}}
  <div class="row">
    <br>
    <div class="input-field col s6">
        {{> afFieldInput name="instrument" id="name" type="selectize" options=instrumentList}}
      <label for="name" class="active">Instrument Name</label>
    </div>
    <div class="input-field col s6">
        {{> afFieldInput name="yearsPlayed" id="yrs" type="text"}}
      <label for="yrs" class="active">Years Played</label>
    </div>
    <button type="submit" class="{{this}} btn right btn-primary">fromprofile</button>
       <br>
  </div>
  {{else}}
   <div class="row">
    <br>
    <div class="input-field col s6">
        {{> afFieldInput name=this.current.instrument id="comp.name" type="selectize" options=instrumentList}}
      <label for="comp.name" class="active">Instrument Name</label>
    </div>
    <div class="input-field col s6">
        {{> afFieldInput name=this.current.yearsPlayed id="comp.name" type="text"}}
      <label for="comp.name" class="active">Years Played</label>
    </div>
  </div>
  {{/if}}
</template>

<!-- Accompanist Profile Arrays -->
<template name="repertoire">
  {{#if fromProfile this}}
  <div class="row">
    <br>
    <div class="input-field col s12">
        {{> afFieldInput name="concerto" id="rep" type="text"}}
    <label for="rep" class="active">Repertoire</label>
    </div>
    <button type="submit" class="{{this}} btn right btn-primary">test</button>
       <br>
  </div>
  {{else}}
   <div class="row">
    <br>
    <div class="input-field col s12">
        {{> afFieldInput name=this.current.concerto id="rep" type="text"}}
    <label for="rep" class="active">Repertoire</label>
    </div>
  </div>
  {{/if}}
<!--   <br>
  <div class="input-field col s12">
      {{> afFieldInput name=this.current.concerto id="rep" type="text"}}
    <label for="rep" class="active">Repertoire</label>
  </div> -->
</template>

<!-- Booking Accompanist Arrays (- repertoire array) -->

<template name="suggestedTimes">
  <br>
  <div class="input-field col s12">
      {{> afFieldInput name=this.current.suggestedTimes id="time" type="date"}}
    <label for="time" class="active">Suggested Times</label>
  </div>
</template>
