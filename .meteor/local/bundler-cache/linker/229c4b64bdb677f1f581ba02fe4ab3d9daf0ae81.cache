[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar $ = Package.jquery.$;\nvar jQuery = Package.jquery.jQuery;\n\n(function(){\n\n///////////////////////////////////////////////////////////////////////\n//                                                                   //\n// packages/comerc_bs-typeahead/packages/comerc_bs-typeahead.js      //\n//                                                                   //\n///////////////////////////////////////////////////////////////////////\n                                                                     //\n(function () {                                                       // 1\n                                                                     // 2\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/comerc:bs-typeahead/typeahead.bundle.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/*!                                                                                                                    // 1\n * typeahead.js 0.10.5                                                                                                 // 2\n * https://github.com/twitter/typeahead.js                                                                             // 3\n * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT                                              // 4\n */                                                                                                                    // 5\n                                                                                                                       // 6\n(function($) {                                                                                                         // 7\n    var _ = function() {                                                                                               // 8\n        \"use strict\";                                                                                                  // 9\n        return {                                                                                                       // 10\n            isMsie: function() {                                                                                       // 11\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },                                                                                                         // 13\n            isBlankString: function(str) {                                                                             // 14\n                return !str || /^\\s*$/.test(str);                                                                      // 15\n            },                                                                                                         // 16\n            escapeRegExChars: function(str) {                                                                          // 17\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");                                     // 18\n            },                                                                                                         // 19\n            isString: function(obj) {                                                                                  // 20\n                return typeof obj === \"string\";                                                                        // 21\n            },                                                                                                         // 22\n            isNumber: function(obj) {                                                                                  // 23\n                return typeof obj === \"number\";                                                                        // 24\n            },                                                                                                         // 25\n            isArray: $.isArray,                                                                                        // 26\n            isFunction: $.isFunction,                                                                                  // 27\n            isObject: $.isPlainObject,                                                                                 // 28\n            isUndefined: function(obj) {                                                                               // 29\n                return typeof obj === \"undefined\";                                                                     // 30\n            },                                                                                                         // 31\n            toStr: function toStr(s) {                                                                                 // 32\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";                                                   // 33\n            },                                                                                                         // 34\n            bind: $.proxy,                                                                                             // 35\n            each: function(collection, cb) {                                                                           // 36\n                $.each(collection, reverseArgs);                                                                       // 37\n                function reverseArgs(index, value) {                                                                   // 38\n                    return cb(value, index);                                                                           // 39\n                }                                                                                                      // 40\n            },                                                                                                         // 41\n            map: $.map,                                                                                                // 42\n            filter: $.grep,                                                                                            // 43\n            every: function(obj, test) {                                                                               // 44\n                var result = true;                                                                                     // 45\n                if (!obj) {                                                                                            // 46\n                    return result;                                                                                     // 47\n                }                                                                                                      // 48\n                $.each(obj, function(key, val) {                                                                       // 49\n                    if (!(result = test.call(null, val, key, obj))) {                                                  // 50\n                        return false;                                                                                  // 51\n                    }                                                                                                  // 52\n                });                                                                                                    // 53\n                return !!result;                                                                                       // 54\n            },                                                                                                         // 55\n            some: function(obj, test) {                                                                                // 56\n                var result = false;                                                                                    // 57\n                if (!obj) {                                                                                            // 58\n                    return result;                                                                                     // 59\n                }                                                                                                      // 60\n                $.each(obj, function(key, val) {                                                                       // 61\n                    if (result = test.call(null, val, key, obj)) {                                                     // 62\n                        return false;                                                                                  // 63\n                    }                                                                                                  // 64\n                });                                                                                                    // 65\n                return !!result;                                                                                       // 66\n            },                                                                                                         // 67\n            mixin: $.extend,                                                                                           // 68\n            getUniqueId: function() {                                                                                  // 69\n                var counter = 0;                                                                                       // 70\n                return function() {                                                                                    // 71\n                    return counter++;                                                                                  // 72\n                };                                                                                                     // 73\n            }(),                                                                                                       // 74\n            templatify: function templatify(obj) {                                                                     // 75\n                return $.isFunction(obj) ? obj : template;                                                             // 76\n                function template() {                                                                                  // 77\n                    return String(obj);                                                                                // 78\n                }                                                                                                      // 79\n            },                                                                                                         // 80\n            defer: function(fn) {                                                                                      // 81\n                setTimeout(fn, 0);                                                                                     // 82\n            },                                                                                                         // 83\n            debounce: function(func, wait, immediate) {                                                                // 84\n                var timeout, result;                                                                                   // 85\n                return function() {                                                                                    // 86\n                    var context = this, args = arguments, later, callNow;                                              // 87\n                    later = function() {                                                                               // 88\n                        timeout = null;                                                                                // 89\n                        if (!immediate) {                                                                              // 90\n                            result = func.apply(context, args);                                                        // 91\n                        }                                                                                              // 92\n                    };                                                                                                 // 93\n                    callNow = immediate && !timeout;                                                                   // 94\n                    clearTimeout(timeout);                                                                             // 95\n                    timeout = setTimeout(later, wait);                                                                 // 96\n                    if (callNow) {                                                                                     // 97\n                        result = func.apply(context, args);                                                            // 98\n                    }                                                                                                  // 99\n                    return result;                                                                                     // 100\n                };                                                                                                     // 101\n            },                                                                                                         // 102\n            throttle: function(func, wait) {                                                                           // 103\n                var context, args, timeout, result, previous, later;                                                   // 104\n                previous = 0;                                                                                          // 105\n                later = function() {                                                                                   // 106\n                    previous = new Date();                                                                             // 107\n                    timeout = null;                                                                                    // 108\n                    result = func.apply(context, args);                                                                // 109\n                };                                                                                                     // 110\n                return function() {                                                                                    // 111\n                    var now = new Date(), remaining = wait - (now - previous);                                         // 112\n                    context = this;                                                                                    // 113\n                    args = arguments;                                                                                  // 114\n                    if (remaining <= 0) {                                                                              // 115\n                        clearTimeout(timeout);                                                                         // 116\n                        timeout = null;                                                                                // 117\n                        previous = now;                                                                                // 118\n                        result = func.apply(context, args);                                                            // 119\n                    } else if (!timeout) {                                                                             // 120\n                        timeout = setTimeout(later, remaining);                                                        // 121\n                    }                                                                                                  // 122\n                    return result;                                                                                     // 123\n                };                                                                                                     // 124\n            },                                                                                                         // 125\n            noop: function() {}                                                                                        // 126\n        };                                                                                                             // 127\n    }();                                                                                                               // 128\n    var VERSION = \"0.10.5\";                                                                                            // 129\n    var tokenizers = function() {                                                                                      // 130\n        \"use strict\";                                                                                                  // 131\n        return {                                                                                                       // 132\n            nonword: nonword,                                                                                          // 133\n            whitespace: whitespace,                                                                                    // 134\n            obj: {                                                                                                     // 135\n                nonword: getObjTokenizer(nonword),                                                                     // 136\n                whitespace: getObjTokenizer(whitespace)                                                                // 137\n            }                                                                                                          // 138\n        };                                                                                                             // 139\n        function whitespace(str) {                                                                                     // 140\n            str = _.toStr(str);                                                                                        // 141\n            return str ? str.split(/\\s+/) : [];                                                                        // 142\n        }                                                                                                              // 143\n        function nonword(str) {                                                                                        // 144\n            str = _.toStr(str);                                                                                        // 145\n            return str ? str.split(/\\W+/) : [];                                                                        // 146\n        }                                                                                                              // 147\n        function getObjTokenizer(tokenizer) {                                                                          // 148\n            return function setKey() {                                                                                 // 149\n                var args = [].slice.call(arguments, 0);                                                                // 150\n                return function tokenize(o) {                                                                          // 151\n                    var tokens = [];                                                                                   // 152\n                    _.each(args, function(k) {                                                                         // 153\n                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));                                              // 154\n                    });                                                                                                // 155\n                    return tokens;                                                                                     // 156\n                };                                                                                                     // 157\n            };                                                                                                         // 158\n        }                                                                                                              // 159\n    }();                                                                                                               // 160\n    var LruCache = function() {                                                                                        // 161\n        \"use strict\";                                                                                                  // 162\n        function LruCache(maxSize) {                                                                                   // 163\n            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;                                                        // 164\n            this.reset();                                                                                              // 165\n            if (this.maxSize <= 0) {                                                                                   // 166\n                this.set = this.get = $.noop;                                                                          // 167\n            }                                                                                                          // 168\n        }                                                                                                              // 169\n        _.mixin(LruCache.prototype, {                                                                                  // 170\n            set: function set(key, val) {                                                                              // 171\n                var tailItem = this.list.tail, node;                                                                   // 172\n                if (this.size >= this.maxSize) {                                                                       // 173\n                    this.list.remove(tailItem);                                                                        // 174\n                    delete this.hash[tailItem.key];                                                                    // 175\n                }                                                                                                      // 176\n                if (node = this.hash[key]) {                                                                           // 177\n                    node.val = val;                                                                                    // 178\n                    this.list.moveToFront(node);                                                                       // 179\n                } else {                                                                                               // 180\n                    node = new Node(key, val);                                                                         // 181\n                    this.list.add(node);                                                                               // 182\n                    this.hash[key] = node;                                                                             // 183\n                    this.size++;                                                                                       // 184\n                }                                                                                                      // 185\n            },                                                                                                         // 186\n            get: function get(key) {                                                                                   // 187\n                var node = this.hash[key];                                                                             // 188\n                if (node) {                                                                                            // 189\n                    this.list.moveToFront(node);                                                                       // 190\n                    return node.val;                                                                                   // 191\n                }                                                                                                      // 192\n            },                                                                                                         // 193\n            reset: function reset() {                                                                                  // 194\n                this.size = 0;                                                                                         // 195\n                this.hash = {};                                                                                        // 196\n                this.list = new List();                                                                                // 197\n            }                                                                                                          // 198\n        });                                                                                                            // 199\n        function List() {                                                                                              // 200\n            this.head = this.tail = null;                                                                              // 201\n        }                                                                                                              // 202\n        _.mixin(List.prototype, {                                                                                      // 203\n            add: function add(node) {                                                                                  // 204\n                if (this.head) {                                                                                       // 205\n                    node.next = this.head;                                                                             // 206\n                    this.head.prev = node;                                                                             // 207\n                }                                                                                                      // 208\n                this.head = node;                                                                                      // 209\n                this.tail = this.tail || node;                                                                         // 210\n            },                                                                                                         // 211\n            remove: function remove(node) {                                                                            // 212\n                node.prev ? node.prev.next = node.next : this.head = node.next;                                        // 213\n                node.next ? node.next.prev = node.prev : this.tail = node.prev;                                        // 214\n            },                                                                                                         // 215\n            moveToFront: function(node) {                                                                              // 216\n                this.remove(node);                                                                                     // 217\n                this.add(node);                                                                                        // 218\n            }                                                                                                          // 219\n        });                                                                                                            // 220\n        function Node(key, val) {                                                                                      // 221\n            this.key = key;                                                                                            // 222\n            this.val = val;                                                                                            // 223\n            this.prev = this.next = null;                                                                              // 224\n        }                                                                                                              // 225\n        return LruCache;                                                                                               // 226\n    }();                                                                                                               // 227\n    var PersistentStorage = function() {                                                                               // 228\n        \"use strict\";                                                                                                  // 229\n        var ls, methods;                                                                                               // 230\n        try {                                                                                                          // 231\n            ls = window.localStorage;                                                                                  // 232\n            ls.setItem(\"~~~\", \"!\");                                                                                    // 233\n            ls.removeItem(\"~~~\");                                                                                      // 234\n        } catch (err) {                                                                                                // 235\n            ls = null;                                                                                                 // 236\n        }                                                                                                              // 237\n        function PersistentStorage(namespace) {                                                                        // 238\n            this.prefix = [ \"__\", namespace, \"__\" ].join(\"\");                                                          // 239\n            this.ttlKey = \"__ttl__\";                                                                                   // 240\n            this.keyMatcher = new RegExp(\"^\" + _.escapeRegExChars(this.prefix));                                       // 241\n        }                                                                                                              // 242\n        if (ls && window.JSON) {                                                                                       // 243\n            methods = {                                                                                                // 244\n                _prefix: function(key) {                                                                               // 245\n                    return this.prefix + key;                                                                          // 246\n                },                                                                                                     // 247\n                _ttlKey: function(key) {                                                                               // 248\n                    return this._prefix(key) + this.ttlKey;                                                            // 249\n                },                                                                                                     // 250\n                get: function(key) {                                                                                   // 251\n                    if (this.isExpired(key)) {                                                                         // 252\n                        this.remove(key);                                                                              // 253\n                    }                                                                                                  // 254\n                    return decode(ls.getItem(this._prefix(key)));                                                      // 255\n                },                                                                                                     // 256\n                set: function(key, val, ttl) {                                                                         // 257\n                    if (_.isNumber(ttl)) {                                                                             // 258\n                        ls.setItem(this._ttlKey(key), encode(now() + ttl));                                            // 259\n                    } else {                                                                                           // 260\n                        ls.removeItem(this._ttlKey(key));                                                              // 261\n                    }                                                                                                  // 262\n                    return ls.setItem(this._prefix(key), encode(val));                                                 // 263\n                },                                                                                                     // 264\n                remove: function(key) {                                                                                // 265\n                    ls.removeItem(this._ttlKey(key));                                                                  // 266\n                    ls.removeItem(this._prefix(key));                                                                  // 267\n                    return this;                                                                                       // 268\n                },                                                                                                     // 269\n                clear: function() {                                                                                    // 270\n                    var i, key, keys = [], len = ls.length;                                                            // 271\n                    for (i = 0; i < len; i++) {                                                                        // 272\n                        if ((key = ls.key(i)).match(this.keyMatcher)) {                                                // 273\n                            keys.push(key.replace(this.keyMatcher, \"\"));                                               // 274\n                        }                                                                                              // 275\n                    }                                                                                                  // 276\n                    for (i = keys.length; i--; ) {                                                                     // 277\n                        this.remove(keys[i]);                                                                          // 278\n                    }                                                                                                  // 279\n                    return this;                                                                                       // 280\n                },                                                                                                     // 281\n                isExpired: function(key) {                                                                             // 282\n                    var ttl = decode(ls.getItem(this._ttlKey(key)));                                                   // 283\n                    return _.isNumber(ttl) && now() > ttl ? true : false;                                              // 284\n                }                                                                                                      // 285\n            };                                                                                                         // 286\n        } else {                                                                                                       // 287\n            methods = {                                                                                                // 288\n                get: _.noop,                                                                                           // 289\n                set: _.noop,                                                                                           // 290\n                remove: _.noop,                                                                                        // 291\n                clear: _.noop,                                                                                         // 292\n                isExpired: _.noop                                                                                      // 293\n            };                                                                                                         // 294\n        }                                                                                                              // 295\n        _.mixin(PersistentStorage.prototype, methods);                                                                 // 296\n        return PersistentStorage;                                                                                      // 297\n        function now() {                                                                                               // 298\n            return new Date().getTime();                                                                               // 299\n        }                                                                                                              // 300\n        function encode(val) {                                                                                         // 301\n            return JSON.stringify(_.isUndefined(val) ? null : val);                                                    // 302\n        }                                                                                                              // 303\n        function decode(val) {                                                                                         // 304\n            return JSON.parse(val);                                                                                    // 305\n        }                                                                                                              // 306\n    }();                                                                                                               // 307\n    var Transport = function() {                                                                                       // 308\n        \"use strict\";                                                                                                  // 309\n        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);    // 310\n        function Transport(o) {                                                                                        // 311\n            o = o || {};                                                                                               // 312\n            this.cancelled = false;                                                                                    // 313\n            this.lastUrl = null;                                                                                       // 314\n            this._send = o.transport ? callbackToDeferred(o.transport) : $.ajax;                                       // 315\n            this._get = o.rateLimiter ? o.rateLimiter(this._get) : this._get;                                          // 316\n            this._cache = o.cache === false ? new LruCache(0) : sharedCache;                                           // 317\n        }                                                                                                              // 318\n        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {                                        // 319\n            maxPendingRequests = num;                                                                                  // 320\n        };                                                                                                             // 321\n        Transport.resetCache = function resetCache() {                                                                 // 322\n            sharedCache.reset();                                                                                       // 323\n        };                                                                                                             // 324\n        _.mixin(Transport.prototype, {                                                                                 // 325\n            _get: function(url, o, cb) {                                                                               // 326\n                var that = this, jqXhr;                                                                                // 327\n                if (this.cancelled || url !== this.lastUrl) {                                                          // 328\n                    return;                                                                                            // 329\n                }                                                                                                      // 330\n                if (jqXhr = pendingRequests[url]) {                                                                    // 331\n                    jqXhr.done(done).fail(fail);                                                                       // 332\n                } else if (pendingRequestsCount < maxPendingRequests) {                                                // 333\n                    pendingRequestsCount++;                                                                            // 334\n                    pendingRequests[url] = this._send(url, o).done(done).fail(fail).always(always);                    // 335\n                } else {                                                                                               // 336\n                    this.onDeckRequestArgs = [].slice.call(arguments, 0);                                              // 337\n                }                                                                                                      // 338\n                function done(resp) {                                                                                  // 339\n                    cb && cb(null, resp);                                                                              // 340\n                    that._cache.set(url, resp);                                                                        // 341\n                }                                                                                                      // 342\n                function fail() {                                                                                      // 343\n                    cb && cb(true);                                                                                    // 344\n                }                                                                                                      // 345\n                function always() {                                                                                    // 346\n                    pendingRequestsCount--;                                                                            // 347\n                    delete pendingRequests[url];                                                                       // 348\n                    if (that.onDeckRequestArgs) {                                                                      // 349\n                        that._get.apply(that, that.onDeckRequestArgs);                                                 // 350\n                        that.onDeckRequestArgs = null;                                                                 // 351\n                    }                                                                                                  // 352\n                }                                                                                                      // 353\n            },                                                                                                         // 354\n            get: function(url, o, cb) {                                                                                // 355\n                var resp;                                                                                              // 356\n                if (_.isFunction(o)) {                                                                                 // 357\n                    cb = o;                                                                                            // 358\n                    o = {};                                                                                            // 359\n                }                                                                                                      // 360\n                this.cancelled = false;                                                                                // 361\n                this.lastUrl = url;                                                                                    // 362\n                if (resp = this._cache.get(url)) {                                                                     // 363\n                    _.defer(function() {                                                                               // 364\n                        cb && cb(null, resp);                                                                          // 365\n                    });                                                                                                // 366\n                } else {                                                                                               // 367\n                    this._get(url, o, cb);                                                                             // 368\n                }                                                                                                      // 369\n                return !!resp;                                                                                         // 370\n            },                                                                                                         // 371\n            cancel: function() {                                                                                       // 372\n                this.cancelled = true;                                                                                 // 373\n            }                                                                                                          // 374\n        });                                                                                                            // 375\n        return Transport;                                                                                              // 376\n        function callbackToDeferred(fn) {                                                                              // 377\n            return function customSendWrapper(url, o) {                                                                // 378\n                var deferred = $.Deferred();                                                                           // 379\n                fn(url, o, onSuccess, onError);                                                                        // 380\n                return deferred;                                                                                       // 381\n                function onSuccess(resp) {                                                                             // 382\n                    _.defer(function() {                                                                               // 383\n                        deferred.resolve(resp);                                                                        // 384\n                    });                                                                                                // 385\n                }                                                                                                      // 386\n                function onError(err) {                                                                                // 387\n                    _.defer(function() {                                                                               // 388\n                        deferred.reject(err);                                                                          // 389\n                    });                                                                                                // 390\n                }                                                                                                      // 391\n            };                                                                                                         // 392\n        }                                                                                                              // 393\n    }();                                                                                                               // 394\n    var SearchIndex = function() {                                                                                     // 395\n        \"use strict\";                                                                                                  // 396\n        function SearchIndex(o) {                                                                                      // 397\n            o = o || {};                                                                                               // 398\n            if (!o.datumTokenizer || !o.queryTokenizer) {                                                              // 399\n                $.error(\"datumTokenizer and queryTokenizer are both required\");                                        // 400\n            }                                                                                                          // 401\n            this.datumTokenizer = o.datumTokenizer;                                                                    // 402\n            this.queryTokenizer = o.queryTokenizer;                                                                    // 403\n            this.reset();                                                                                              // 404\n        }                                                                                                              // 405\n        _.mixin(SearchIndex.prototype, {                                                                               // 406\n            bootstrap: function bootstrap(o) {                                                                         // 407\n                this.datums = o.datums;                                                                                // 408\n                this.trie = o.trie;                                                                                    // 409\n            },                                                                                                         // 410\n            add: function(data) {                                                                                      // 411\n                var that = this;                                                                                       // 412\n                data = _.isArray(data) ? data : [ data ];                                                              // 413\n                _.each(data, function(datum) {                                                                         // 414\n                    var id, tokens;                                                                                    // 415\n                    id = that.datums.push(datum) - 1;                                                                  // 416\n                    tokens = normalizeTokens(that.datumTokenizer(datum));                                              // 417\n                    _.each(tokens, function(token) {                                                                   // 418\n                        var node, chars, ch;                                                                           // 419\n                        node = that.trie;                                                                              // 420\n                        chars = token.split(\"\");                                                                       // 421\n                        while (ch = chars.shift()) {                                                                   // 422\n                            node = node.children[ch] || (node.children[ch] = newNode());                               // 423\n                            node.ids.push(id);                                                                         // 424\n                        }                                                                                              // 425\n                    });                                                                                                // 426\n                });                                                                                                    // 427\n            },                                                                                                         // 428\n            get: function get(query) {                                                                                 // 429\n                var that = this, tokens, matches;                                                                      // 430\n                tokens = normalizeTokens(this.queryTokenizer(query));                                                  // 431\n                _.each(tokens, function(token) {                                                                       // 432\n                    var node, chars, ch, ids;                                                                          // 433\n                    if (matches && matches.length === 0) {                                                             // 434\n                        return false;                                                                                  // 435\n                    }                                                                                                  // 436\n                    node = that.trie;                                                                                  // 437\n                    chars = token.split(\"\");                                                                           // 438\n                    while (node && (ch = chars.shift())) {                                                             // 439\n                        node = node.children[ch];                                                                      // 440\n                    }                                                                                                  // 441\n                    if (node && chars.length === 0) {                                                                  // 442\n                        ids = node.ids.slice(0);                                                                       // 443\n                        matches = matches ? getIntersection(matches, ids) : ids;                                       // 444\n                    } else {                                                                                           // 445\n                        matches = [];                                                                                  // 446\n                        return false;                                                                                  // 447\n                    }                                                                                                  // 448\n                });                                                                                                    // 449\n                return matches ? _.map(unique(matches), function(id) {                                                 // 450\n                    return that.datums[id];                                                                            // 451\n                }) : [];                                                                                               // 452\n            },                                                                                                         // 453\n            reset: function reset() {                                                                                  // 454\n                this.datums = [];                                                                                      // 455\n                this.trie = newNode();                                                                                 // 456\n            },                                                                                                         // 457\n            serialize: function serialize() {                                                                          // 458\n                return {                                                                                               // 459\n                    datums: this.datums,                                                                               // 460\n                    trie: this.trie                                                                                    // 461\n                };                                                                                                     // 462\n            }                                                                                                          // 463\n        });                                                                                                            // 464\n        return SearchIndex;                                                                                            // 465\n        function normalizeTokens(tokens) {                                                                             // 466\n            tokens = _.filter(tokens, function(token) {                                                                // 467\n                return !!token;                                                                                        // 468\n            });                                                                                                        // 469\n            tokens = _.map(tokens, function(token) {                                                                   // 470\n                return token.toLowerCase();                                                                            // 471\n            });                                                                                                        // 472\n            return tokens;                                                                                             // 473\n        }                                                                                                              // 474\n        function newNode() {                                                                                           // 475\n            return {                                                                                                   // 476\n                ids: [],                                                                                               // 477\n                children: {}                                                                                           // 478\n            };                                                                                                         // 479\n        }                                                                                                              // 480\n        function unique(array) {                                                                                       // 481\n            var seen = {}, uniques = [];                                                                               // 482\n            for (var i = 0, len = array.length; i < len; i++) {                                                        // 483\n                if (!seen[array[i]]) {                                                                                 // 484\n                    seen[array[i]] = true;                                                                             // 485\n                    uniques.push(array[i]);                                                                            // 486\n                }                                                                                                      // 487\n            }                                                                                                          // 488\n            return uniques;                                                                                            // 489\n        }                                                                                                              // 490\n        function getIntersection(arrayA, arrayB) {                                                                     // 491\n            var ai = 0, bi = 0, intersection = [];                                                                     // 492\n            arrayA = arrayA.sort(compare);                                                                             // 493\n            arrayB = arrayB.sort(compare);                                                                             // 494\n            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;                                                  // 495\n            while (ai < lenArrayA && bi < lenArrayB) {                                                                 // 496\n                if (arrayA[ai] < arrayB[bi]) {                                                                         // 497\n                    ai++;                                                                                              // 498\n                } else if (arrayA[ai] > arrayB[bi]) {                                                                  // 499\n                    bi++;                                                                                              // 500\n                } else {                                                                                               // 501\n                    intersection.push(arrayA[ai]);                                                                     // 502\n                    ai++;                                                                                              // 503\n                    bi++;                                                                                              // 504\n                }                                                                                                      // 505\n            }                                                                                                          // 506\n            return intersection;                                                                                       // 507\n            function compare(a, b) {                                                                                   // 508\n                return a - b;                                                                                          // 509\n            }                                                                                                          // 510\n        }                                                                                                              // 511\n    }();                                                                                                               // 512\n    var oParser = function() {                                                                                         // 513\n        \"use strict\";                                                                                                  // 514\n        return {                                                                                                       // 515\n            local: getLocal,                                                                                           // 516\n            prefetch: getPrefetch,                                                                                     // 517\n            remote: getRemote                                                                                          // 518\n        };                                                                                                             // 519\n        function getLocal(o) {                                                                                         // 520\n            return o.local || null;                                                                                    // 521\n        }                                                                                                              // 522\n        function getPrefetch(o) {                                                                                      // 523\n            var prefetch, defaults;                                                                                    // 524\n            defaults = {                                                                                               // 525\n                url: null,                                                                                             // 526\n                thumbprint: \"\",                                                                                        // 527\n                ttl: 24 * 60 * 60 * 1e3,                                                                               // 528\n                filter: null,                                                                                          // 529\n                ajax: {}                                                                                               // 530\n            };                                                                                                         // 531\n            if (prefetch = o.prefetch || null) {                                                                       // 532\n                prefetch = _.isString(prefetch) ? {                                                                    // 533\n                    url: prefetch                                                                                      // 534\n                } : prefetch;                                                                                          // 535\n                prefetch = _.mixin(defaults, prefetch);                                                                // 536\n                prefetch.thumbprint = VERSION + prefetch.thumbprint;                                                   // 537\n                prefetch.ajax.type = prefetch.ajax.type || \"GET\";                                                      // 538\n                prefetch.ajax.dataType = prefetch.ajax.dataType || \"json\";                                             // 539\n                !prefetch.url && $.error(\"prefetch requires url to be set\");                                           // 540\n            }                                                                                                          // 541\n            return prefetch;                                                                                           // 542\n        }                                                                                                              // 543\n        function getRemote(o) {                                                                                        // 544\n            var remote, defaults;                                                                                      // 545\n            defaults = {                                                                                               // 546\n                url: null,                                                                                             // 547\n                cache: true,                                                                                           // 548\n                wildcard: \"%QUERY\",                                                                                    // 549\n                replace: null,                                                                                         // 550\n                rateLimitBy: \"debounce\",                                                                               // 551\n                rateLimitWait: 300,                                                                                    // 552\n                send: null,                                                                                            // 553\n                filter: null,                                                                                          // 554\n                ajax: {}                                                                                               // 555\n            };                                                                                                         // 556\n            if (remote = o.remote || null) {                                                                           // 557\n                remote = _.isString(remote) ? {                                                                        // 558\n                    url: remote                                                                                        // 559\n                } : remote;                                                                                            // 560\n                remote = _.mixin(defaults, remote);                                                                    // 561\n                remote.rateLimiter = /^throttle$/i.test(remote.rateLimitBy) ? byThrottle(remote.rateLimitWait) : byDebounce(remote.rateLimitWait);\n                remote.ajax.type = remote.ajax.type || \"GET\";                                                          // 563\n                remote.ajax.dataType = remote.ajax.dataType || \"json\";                                                 // 564\n                delete remote.rateLimitBy;                                                                             // 565\n                delete remote.rateLimitWait;                                                                           // 566\n                !remote.url && $.error(\"remote requires url to be set\");                                               // 567\n            }                                                                                                          // 568\n            return remote;                                                                                             // 569\n            function byDebounce(wait) {                                                                                // 570\n                return function(fn) {                                                                                  // 571\n                    return _.debounce(fn, wait);                                                                       // 572\n                };                                                                                                     // 573\n            }                                                                                                          // 574\n            function byThrottle(wait) {                                                                                // 575\n                return function(fn) {                                                                                  // 576\n                    return _.throttle(fn, wait);                                                                       // 577\n                };                                                                                                     // 578\n            }                                                                                                          // 579\n        }                                                                                                              // 580\n    }();                                                                                                               // 581\n    (function(root) {                                                                                                  // 582\n        \"use strict\";                                                                                                  // 583\n        var old, keys;                                                                                                 // 584\n        old = root.Bloodhound;                                                                                         // 585\n        keys = {                                                                                                       // 586\n            data: \"data\",                                                                                              // 587\n            protocol: \"protocol\",                                                                                      // 588\n            thumbprint: \"thumbprint\"                                                                                   // 589\n        };                                                                                                             // 590\n        root.Bloodhound = Bloodhound;                                                                                  // 591\n        function Bloodhound(o) {                                                                                       // 592\n            if (!o || !o.local && !o.prefetch && !o.remote) {                                                          // 593\n                $.error(\"one of local, prefetch, or remote is required\");                                              // 594\n            }                                                                                                          // 595\n            this.limit = o.limit || 5;                                                                                 // 596\n            this.sorter = getSorter(o.sorter);                                                                         // 597\n            this.dupDetector = o.dupDetector || ignoreDuplicates;                                                      // 598\n            this.local = oParser.local(o);                                                                             // 599\n            this.prefetch = oParser.prefetch(o);                                                                       // 600\n            this.remote = oParser.remote(o);                                                                           // 601\n            this.cacheKey = this.prefetch ? this.prefetch.cacheKey || this.prefetch.url : null;                        // 602\n            this.index = new SearchIndex({                                                                             // 603\n                datumTokenizer: o.datumTokenizer,                                                                      // 604\n                queryTokenizer: o.queryTokenizer                                                                       // 605\n            });                                                                                                        // 606\n            this.storage = this.cacheKey ? new PersistentStorage(this.cacheKey) : null;                                // 607\n        }                                                                                                              // 608\n        Bloodhound.noConflict = function noConflict() {                                                                // 609\n            root.Bloodhound = old;                                                                                     // 610\n            return Bloodhound;                                                                                         // 611\n        };                                                                                                             // 612\n        Bloodhound.tokenizers = tokenizers;                                                                            // 613\n        _.mixin(Bloodhound.prototype, {                                                                                // 614\n            _loadPrefetch: function loadPrefetch(o) {                                                                  // 615\n                var that = this, serialized, deferred;                                                                 // 616\n                if (serialized = this._readFromStorage(o.thumbprint)) {                                                // 617\n                    this.index.bootstrap(serialized);                                                                  // 618\n                    deferred = $.Deferred().resolve();                                                                 // 619\n                } else {                                                                                               // 620\n                    deferred = $.ajax(o.url, o.ajax).done(handlePrefetchResponse);                                     // 621\n                }                                                                                                      // 622\n                return deferred;                                                                                       // 623\n                function handlePrefetchResponse(resp) {                                                                // 624\n                    that.clear();                                                                                      // 625\n                    that.add(o.filter ? o.filter(resp) : resp);                                                        // 626\n                    that._saveToStorage(that.index.serialize(), o.thumbprint, o.ttl);                                  // 627\n                }                                                                                                      // 628\n            },                                                                                                         // 629\n            _getFromRemote: function getFromRemote(query, cb) {                                                        // 630\n                var that = this, url, uriEncodedQuery;                                                                 // 631\n                if (!this.transport) {                                                                                 // 632\n                    return;                                                                                            // 633\n                }                                                                                                      // 634\n                query = query || \"\";                                                                                   // 635\n                uriEncodedQuery = encodeURIComponent(query);                                                           // 636\n                url = this.remote.replace ? this.remote.replace(this.remote.url, query) : this.remote.url.replace(this.remote.wildcard, uriEncodedQuery);\n                return this.transport.get(url, this.remote.ajax, handleRemoteResponse);                                // 638\n                function handleRemoteResponse(err, resp) {                                                             // 639\n                    err ? cb([]) : cb(that.remote.filter ? that.remote.filter(resp) : resp);                           // 640\n                }                                                                                                      // 641\n            },                                                                                                         // 642\n            _cancelLastRemoteRequest: function cancelLastRemoteRequest() {                                             // 643\n                this.transport && this.transport.cancel();                                                             // 644\n            },                                                                                                         // 645\n            _saveToStorage: function saveToStorage(data, thumbprint, ttl) {                                            // 646\n                if (this.storage) {                                                                                    // 647\n                    this.storage.set(keys.data, data, ttl);                                                            // 648\n                    this.storage.set(keys.protocol, location.protocol, ttl);                                           // 649\n                    this.storage.set(keys.thumbprint, thumbprint, ttl);                                                // 650\n                }                                                                                                      // 651\n            },                                                                                                         // 652\n            _readFromStorage: function readFromStorage(thumbprint) {                                                   // 653\n                var stored = {}, isExpired;                                                                            // 654\n                if (this.storage) {                                                                                    // 655\n                    stored.data = this.storage.get(keys.data);                                                         // 656\n                    stored.protocol = this.storage.get(keys.protocol);                                                 // 657\n                    stored.thumbprint = this.storage.get(keys.thumbprint);                                             // 658\n                }                                                                                                      // 659\n                isExpired = stored.thumbprint !== thumbprint || stored.protocol !== location.protocol;                 // 660\n                return stored.data && !isExpired ? stored.data : null;                                                 // 661\n            },                                                                                                         // 662\n            _initialize: function initialize() {                                                                       // 663\n                var that = this, local = this.local, deferred;                                                         // 664\n                deferred = this.prefetch ? this._loadPrefetch(this.prefetch) : $.Deferred().resolve();                 // 665\n                local && deferred.done(addLocalToIndex);                                                               // 666\n                this.transport = this.remote ? new Transport(this.remote) : null;                                      // 667\n                return this.initPromise = deferred.promise();                                                          // 668\n                function addLocalToIndex() {                                                                           // 669\n                    that.add(_.isFunction(local) ? local() : local);                                                   // 670\n                }                                                                                                      // 671\n            },                                                                                                         // 672\n            initialize: function initialize(force) {                                                                   // 673\n                return !this.initPromise || force ? this._initialize() : this.initPromise;                             // 674\n            },                                                                                                         // 675\n            add: function add(data) {                                                                                  // 676\n                this.index.add(data);                                                                                  // 677\n            },                                                                                                         // 678\n            get: function get(query, cb) {                                                                             // 679\n                var that = this, matches = [], cacheHit = false;                                                       // 680\n                matches = this.index.get(query);                                                                       // 681\n                matches = this.sorter(matches).slice(0, this.limit);                                                   // 682\n                matches.length < this.limit ? cacheHit = this._getFromRemote(query, returnRemoteMatches) : this._cancelLastRemoteRequest();\n                if (!cacheHit) {                                                                                       // 684\n                    (matches.length > 0 || !this.transport) && cb && cb(matches);                                      // 685\n                }                                                                                                      // 686\n                function returnRemoteMatches(remoteMatches) {                                                          // 687\n                    var matchesWithBackfill = matches.slice(0);                                                        // 688\n                    _.each(remoteMatches, function(remoteMatch) {                                                      // 689\n                        var isDuplicate;                                                                               // 690\n                        isDuplicate = _.some(matchesWithBackfill, function(match) {                                    // 691\n                            return that.dupDetector(remoteMatch, match);                                               // 692\n                        });                                                                                            // 693\n                        !isDuplicate && matchesWithBackfill.push(remoteMatch);                                         // 694\n                        return matchesWithBackfill.length < that.limit;                                                // 695\n                    });                                                                                                // 696\n                    cb && cb(that.sorter(matchesWithBackfill));                                                        // 697\n                }                                                                                                      // 698\n            },                                                                                                         // 699\n            clear: function clear() {                                                                                  // 700\n                this.index.reset();                                                                                    // 701\n            },                                                                                                         // 702\n            clearPrefetchCache: function clearPrefetchCache() {                                                        // 703\n                this.storage && this.storage.clear();                                                                  // 704\n            },                                                                                                         // 705\n            clearRemoteCache: function clearRemoteCache() {                                                            // 706\n                this.transport && Transport.resetCache();                                                              // 707\n            },                                                                                                         // 708\n            ttAdapter: function ttAdapter() {                                                                          // 709\n                return _.bind(this.get, this);                                                                         // 710\n            }                                                                                                          // 711\n        });                                                                                                            // 712\n        return Bloodhound;                                                                                             // 713\n        function getSorter(sortFn) {                                                                                   // 714\n            return _.isFunction(sortFn) ? sort : noSort;                                                               // 715\n            function sort(array) {                                                                                     // 716\n                return array.sort(sortFn);                                                                             // 717\n            }                                                                                                          // 718\n            function noSort(array) {                                                                                   // 719\n                return array;                                                                                          // 720\n            }                                                                                                          // 721\n        }                                                                                                              // 722\n        function ignoreDuplicates() {                                                                                  // 723\n            return false;                                                                                              // 724\n        }                                                                                                              // 725\n    })(this);                                                                                                          // 726\n    var html = function() {                                                                                            // 727\n        return {                                                                                                       // 728\n            wrapper: '<span class=\"twitter-typeahead\"></span>',                                                        // 729\n            dropdown: '<span class=\"tt-dropdown-menu\"></span>',                                                        // 730\n            dataset: '<div class=\"tt-dataset-%CLASS%\"></div>',                                                         // 731\n            suggestions: '<span class=\"tt-suggestions\"></span>',                                                       // 732\n            suggestion: '<div class=\"tt-suggestion\"></div>'                                                            // 733\n        };                                                                                                             // 734\n    }();                                                                                                               // 735\n    var css = function() {                                                                                             // 736\n        \"use strict\";                                                                                                  // 737\n        var css = {                                                                                                    // 738\n            wrapper: {                                                                                                 // 739\n                position: \"relative\",                                                                                  // 740\n                display: \"inline-block\"                                                                                // 741\n            },                                                                                                         // 742\n            hint: {                                                                                                    // 743\n                position: \"absolute\",                                                                                  // 744\n                top: \"0\",                                                                                              // 745\n                left: \"0\",                                                                                             // 746\n                borderColor: \"transparent\",                                                                            // 747\n                boxShadow: \"none\",                                                                                     // 748\n                opacity: \"1\"                                                                                           // 749\n            },                                                                                                         // 750\n            input: {                                                                                                   // 751\n                position: \"relative\",                                                                                  // 752\n                verticalAlign: \"top\",                                                                                  // 753\n                backgroundColor: \"transparent\"                                                                         // 754\n            },                                                                                                         // 755\n            inputWithNoHint: {                                                                                         // 756\n                position: \"relative\",                                                                                  // 757\n                verticalAlign: \"top\"                                                                                   // 758\n            },                                                                                                         // 759\n            dropdown: {                                                                                                // 760\n                position: \"absolute\",                                                                                  // 761\n                top: \"100%\",                                                                                           // 762\n                left: \"0\",                                                                                             // 763\n                zIndex: \"100\",                                                                                         // 764\n                display: \"none\"                                                                                        // 765\n            },                                                                                                         // 766\n            suggestions: {                                                                                             // 767\n                display: \"block\"                                                                                       // 768\n            },                                                                                                         // 769\n            suggestion: {                                                                                              // 770\n                whiteSpace: \"nowrap\",                                                                                  // 771\n                cursor: \"pointer\"                                                                                      // 772\n            },                                                                                                         // 773\n            suggestionChild: {                                                                                         // 774\n                whiteSpace: \"normal\"                                                                                   // 775\n            },                                                                                                         // 776\n            ltr: {                                                                                                     // 777\n                left: \"0\",                                                                                             // 778\n                right: \"auto\"                                                                                          // 779\n            },                                                                                                         // 780\n            rtl: {                                                                                                     // 781\n                left: \"auto\",                                                                                          // 782\n                right: \" 0\"                                                                                            // 783\n            }                                                                                                          // 784\n        };                                                                                                             // 785\n        if (_.isMsie()) {                                                                                              // 786\n            _.mixin(css.input, {                                                                                       // 787\n                backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\" // 788\n            });                                                                                                        // 789\n        }                                                                                                              // 790\n        if (_.isMsie() && _.isMsie() <= 7) {                                                                           // 791\n            _.mixin(css.input, {                                                                                       // 792\n                marginTop: \"-1px\"                                                                                      // 793\n            });                                                                                                        // 794\n        }                                                                                                              // 795\n        return css;                                                                                                    // 796\n    }();                                                                                                               // 797\n    var EventBus = function() {                                                                                        // 798\n        \"use strict\";                                                                                                  // 799\n        var namespace = \"typeahead:\";                                                                                  // 800\n        function EventBus(o) {                                                                                         // 801\n            if (!o || !o.el) {                                                                                         // 802\n                $.error(\"EventBus initialized without el\");                                                            // 803\n            }                                                                                                          // 804\n            this.$el = $(o.el);                                                                                        // 805\n        }                                                                                                              // 806\n        _.mixin(EventBus.prototype, {                                                                                  // 807\n            trigger: function(type) {                                                                                  // 808\n                var args = [].slice.call(arguments, 1);                                                                // 809\n                this.$el.trigger(namespace + type, args);                                                              // 810\n            }                                                                                                          // 811\n        });                                                                                                            // 812\n        return EventBus;                                                                                               // 813\n    }();                                                                                                               // 814\n    var EventEmitter = function() {                                                                                    // 815\n        \"use strict\";                                                                                                  // 816\n        var splitter = /\\s+/, nextTick = getNextTick();                                                                // 817\n        return {                                                                                                       // 818\n            onSync: onSync,                                                                                            // 819\n            onAsync: onAsync,                                                                                          // 820\n            off: off,                                                                                                  // 821\n            trigger: trigger                                                                                           // 822\n        };                                                                                                             // 823\n        function on(method, types, cb, context) {                                                                      // 824\n            var type;                                                                                                  // 825\n            if (!cb) {                                                                                                 // 826\n                return this;                                                                                           // 827\n            }                                                                                                          // 828\n            types = types.split(splitter);                                                                             // 829\n            cb = context ? bindContext(cb, context) : cb;                                                              // 830\n            this._callbacks = this._callbacks || {};                                                                   // 831\n            while (type = types.shift()) {                                                                             // 832\n                this._callbacks[type] = this._callbacks[type] || {                                                     // 833\n                    sync: [],                                                                                          // 834\n                    async: []                                                                                          // 835\n                };                                                                                                     // 836\n                this._callbacks[type][method].push(cb);                                                                // 837\n            }                                                                                                          // 838\n            return this;                                                                                               // 839\n        }                                                                                                              // 840\n        function onAsync(types, cb, context) {                                                                         // 841\n            return on.call(this, \"async\", types, cb, context);                                                         // 842\n        }                                                                                                              // 843\n        function onSync(types, cb, context) {                                                                          // 844\n            return on.call(this, \"sync\", types, cb, context);                                                          // 845\n        }                                                                                                              // 846\n        function off(types) {                                                                                          // 847\n            var type;                                                                                                  // 848\n            if (!this._callbacks) {                                                                                    // 849\n                return this;                                                                                           // 850\n            }                                                                                                          // 851\n            types = types.split(splitter);                                                                             // 852\n            while (type = types.shift()) {                                                                             // 853\n                delete this._callbacks[type];                                                                          // 854\n            }                                                                                                          // 855\n            return this;                                                                                               // 856\n        }                                                                                                              // 857\n        function trigger(types) {                                                                                      // 858\n            var type, callbacks, args, syncFlush, asyncFlush;                                                          // 859\n            if (!this._callbacks) {                                                                                    // 860\n                return this;                                                                                           // 861\n            }                                                                                                          // 862\n            types = types.split(splitter);                                                                             // 863\n            args = [].slice.call(arguments, 1);                                                                        // 864\n            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {                                    // 865\n                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));                                     // 866\n                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));                                   // 867\n                syncFlush() && nextTick(asyncFlush);                                                                   // 868\n            }                                                                                                          // 869\n            return this;                                                                                               // 870\n        }                                                                                                              // 871\n        function getFlush(callbacks, context, args) {                                                                  // 872\n            return flush;                                                                                              // 873\n            function flush() {                                                                                         // 874\n                var cancelled;                                                                                         // 875\n                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {                               // 876\n                    cancelled = callbacks[i].apply(context, args) === false;                                           // 877\n                }                                                                                                      // 878\n                return !cancelled;                                                                                     // 879\n            }                                                                                                          // 880\n        }                                                                                                              // 881\n        function getNextTick() {                                                                                       // 882\n            var nextTickFn;                                                                                            // 883\n            if (window.setImmediate) {                                                                                 // 884\n                nextTickFn = function nextTickSetImmediate(fn) {                                                       // 885\n                    setImmediate(function() {                                                                          // 886\n                        fn();                                                                                          // 887\n                    });                                                                                                // 888\n                };                                                                                                     // 889\n            } else {                                                                                                   // 890\n                nextTickFn = function nextTickSetTimeout(fn) {                                                         // 891\n                    setTimeout(function() {                                                                            // 892\n                        fn();                                                                                          // 893\n                    }, 0);                                                                                             // 894\n                };                                                                                                     // 895\n            }                                                                                                          // 896\n            return nextTickFn;                                                                                         // 897\n        }                                                                                                              // 898\n        function bindContext(fn, context) {                                                                            // 899\n            return fn.bind ? fn.bind(context) : function() {                                                           // 900\n                fn.apply(context, [].slice.call(arguments, 0));                                                        // 901\n            };                                                                                                         // 902\n        }                                                                                                              // 903\n    }();                                                                                                               // 904\n    var highlight = function(doc) {                                                                                    // 905\n        \"use strict\";                                                                                                  // 906\n        var defaults = {                                                                                               // 907\n            node: null,                                                                                                // 908\n            pattern: null,                                                                                             // 909\n            tagName: \"strong\",                                                                                         // 910\n            className: null,                                                                                           // 911\n            wordsOnly: false,                                                                                          // 912\n            caseSensitive: false                                                                                       // 913\n        };                                                                                                             // 914\n        return function hightlight(o) {                                                                                // 915\n            var regex;                                                                                                 // 916\n            o = _.mixin({}, defaults, o);                                                                              // 917\n            if (!o.node || !o.pattern) {                                                                               // 918\n                return;                                                                                                // 919\n            }                                                                                                          // 920\n            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];                                              // 921\n            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);                                                 // 922\n            traverse(o.node, hightlightTextNode);                                                                      // 923\n            function hightlightTextNode(textNode) {                                                                    // 924\n                var match, patternNode, wrapperNode;                                                                   // 925\n                if (match = regex.exec(textNode.data)) {                                                               // 926\n                    wrapperNode = doc.createElement(o.tagName);                                                        // 927\n                    o.className && (wrapperNode.className = o.className);                                              // 928\n                    patternNode = textNode.splitText(match.index);                                                     // 929\n                    patternNode.splitText(match[0].length);                                                            // 930\n                    wrapperNode.appendChild(patternNode.cloneNode(true));                                              // 931\n                    textNode.parentNode.replaceChild(wrapperNode, patternNode);                                        // 932\n                }                                                                                                      // 933\n                return !!match;                                                                                        // 934\n            }                                                                                                          // 935\n            function traverse(el, hightlightTextNode) {                                                                // 936\n                var childNode, TEXT_NODE_TYPE = 3;                                                                     // 937\n                for (var i = 0; i < el.childNodes.length; i++) {                                                       // 938\n                    childNode = el.childNodes[i];                                                                      // 939\n                    if (childNode.nodeType === TEXT_NODE_TYPE) {                                                       // 940\n                        i += hightlightTextNode(childNode) ? 1 : 0;                                                    // 941\n                    } else {                                                                                           // 942\n                        traverse(childNode, hightlightTextNode);                                                       // 943\n                    }                                                                                                  // 944\n                }                                                                                                      // 945\n            }                                                                                                          // 946\n        };                                                                                                             // 947\n        function getRegex(patterns, caseSensitive, wordsOnly) {                                                        // 948\n            var escapedPatterns = [], regexStr;                                                                        // 949\n            for (var i = 0, len = patterns.length; i < len; i++) {                                                     // 950\n                escapedPatterns.push(_.escapeRegExChars(patterns[i]));                                                 // 951\n            }                                                                                                          // 952\n            regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");                                   // 954\n        }                                                                                                              // 955\n    }(window.document);                                                                                                // 956\n    var Input = function() {                                                                                           // 957\n        \"use strict\";                                                                                                  // 958\n        var specialKeyCodeMap;                                                                                         // 959\n        specialKeyCodeMap = {                                                                                          // 960\n            9: \"tab\",                                                                                                  // 961\n            27: \"esc\",                                                                                                 // 962\n            37: \"left\",                                                                                                // 963\n            39: \"right\",                                                                                               // 964\n            13: \"enter\",                                                                                               // 965\n            38: \"up\",                                                                                                  // 966\n            40: \"down\"                                                                                                 // 967\n        };                                                                                                             // 968\n        function Input(o) {                                                                                            // 969\n            var that = this, onBlur, onFocus, onKeydown, onInput;                                                      // 970\n            o = o || {};                                                                                               // 971\n            if (!o.input) {                                                                                            // 972\n                $.error(\"input is missing\");                                                                           // 973\n            }                                                                                                          // 974\n            onBlur = _.bind(this._onBlur, this);                                                                       // 975\n            onFocus = _.bind(this._onFocus, this);                                                                     // 976\n            onKeydown = _.bind(this._onKeydown, this);                                                                 // 977\n            onInput = _.bind(this._onInput, this);                                                                     // 978\n            this.$hint = $(o.hint);                                                                                    // 979\n            this.$input = $(o.input).on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);        // 980\n            if (this.$hint.length === 0) {                                                                             // 981\n                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;                       // 982\n            }                                                                                                          // 983\n            if (!_.isMsie()) {                                                                                         // 984\n                this.$input.on(\"input.tt\", onInput);                                                                   // 985\n            } else {                                                                                                   // 986\n                this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function($e) {                                // 987\n                    if (specialKeyCodeMap[$e.which || $e.keyCode]) {                                                   // 988\n                        return;                                                                                        // 989\n                    }                                                                                                  // 990\n                    _.defer(_.bind(that._onInput, that, $e));                                                          // 991\n                });                                                                                                    // 992\n            }                                                                                                          // 993\n            this.query = this.$input.val();                                                                            // 994\n            this.$overflowHelper = buildOverflowHelper(this.$input);                                                   // 995\n        }                                                                                                              // 996\n        Input.normalizeQuery = function(str) {                                                                         // 997\n            return (str || \"\").replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");                                           // 998\n        };                                                                                                             // 999\n        _.mixin(Input.prototype, EventEmitter, {                                                                       // 1000\n            _onBlur: function onBlur() {                                                                               // 1001\n                this.resetInputValue();                                                                                // 1002\n                this.trigger(\"blurred\");                                                                               // 1003\n            },                                                                                                         // 1004\n            _onFocus: function onFocus() {                                                                             // 1005\n                this.trigger(\"focused\");                                                                               // 1006\n            },                                                                                                         // 1007\n            _onKeydown: function onKeydown($e) {                                                                       // 1008\n                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];                                               // 1009\n                this._managePreventDefault(keyName, $e);                                                               // 1010\n                if (keyName && this._shouldTrigger(keyName, $e)) {                                                     // 1011\n                    this.trigger(keyName + \"Keyed\", $e);                                                               // 1012\n                }                                                                                                      // 1013\n            },                                                                                                         // 1014\n            _onInput: function onInput() {                                                                             // 1015\n                this._checkInputValue();                                                                               // 1016\n            },                                                                                                         // 1017\n            _managePreventDefault: function managePreventDefault(keyName, $e) {                                        // 1018\n                var preventDefault, hintValue, inputValue;                                                             // 1019\n                switch (keyName) {                                                                                     // 1020\n                  case \"tab\":                                                                                          // 1021\n                    hintValue = this.getHint();                                                                        // 1022\n                    inputValue = this.getInputValue();                                                                 // 1023\n                    preventDefault = hintValue && hintValue !== inputValue && !withModifier($e);                       // 1024\n                    break;                                                                                             // 1025\n                                                                                                                       // 1026\n                  case \"up\":                                                                                           // 1027\n                  case \"down\":                                                                                         // 1028\n                    preventDefault = !withModifier($e);                                                                // 1029\n                    break;                                                                                             // 1030\n                                                                                                                       // 1031\n                  default:                                                                                             // 1032\n                    preventDefault = false;                                                                            // 1033\n                }                                                                                                      // 1034\n                preventDefault && $e.preventDefault();                                                                 // 1035\n            },                                                                                                         // 1036\n            _shouldTrigger: function shouldTrigger(keyName, $e) {                                                      // 1037\n                var trigger;                                                                                           // 1038\n                switch (keyName) {                                                                                     // 1039\n                  case \"tab\":                                                                                          // 1040\n                    trigger = !withModifier($e);                                                                       // 1041\n                    break;                                                                                             // 1042\n                                                                                                                       // 1043\n                  default:                                                                                             // 1044\n                    trigger = true;                                                                                    // 1045\n                }                                                                                                      // 1046\n                return trigger;                                                                                        // 1047\n            },                                                                                                         // 1048\n            _checkInputValue: function checkInputValue() {                                                             // 1049\n                var inputValue, areEquivalent, hasDifferentWhitespace;                                                 // 1050\n                inputValue = this.getInputValue();                                                                     // 1051\n                areEquivalent = areQueriesEquivalent(inputValue, this.query);                                          // 1052\n                hasDifferentWhitespace = areEquivalent ? this.query.length !== inputValue.length : false;              // 1053\n                this.query = inputValue;                                                                               // 1054\n                if (!areEquivalent) {                                                                                  // 1055\n                    this.trigger(\"queryChanged\", this.query);                                                          // 1056\n                } else if (hasDifferentWhitespace) {                                                                   // 1057\n                    this.trigger(\"whitespaceChanged\", this.query);                                                     // 1058\n                }                                                                                                      // 1059\n            },                                                                                                         // 1060\n            focus: function focus() {                                                                                  // 1061\n                this.$input.focus();                                                                                   // 1062\n            },                                                                                                         // 1063\n            blur: function blur() {                                                                                    // 1064\n                this.$input.blur();                                                                                    // 1065\n            },                                                                                                         // 1066\n            getQuery: function getQuery() {                                                                            // 1067\n                return this.query;                                                                                     // 1068\n            },                                                                                                         // 1069\n            setQuery: function setQuery(query) {                                                                       // 1070\n                this.query = query;                                                                                    // 1071\n            },                                                                                                         // 1072\n            getInputValue: function getInputValue() {                                                                  // 1073\n                return this.$input.val();                                                                              // 1074\n            },                                                                                                         // 1075\n            setInputValue: function setInputValue(value, silent) {                                                     // 1076\n                this.$input.val(value);                                                                                // 1077\n                silent ? this.clearHint() : this._checkInputValue();                                                   // 1078\n            },                                                                                                         // 1079\n            resetInputValue: function resetInputValue() {                                                              // 1080\n                this.setInputValue(this.query, true);                                                                  // 1081\n            },                                                                                                         // 1082\n            getHint: function getHint() {                                                                              // 1083\n                return this.$hint.val();                                                                               // 1084\n            },                                                                                                         // 1085\n            setHint: function setHint(value) {                                                                         // 1086\n                this.$hint.val(value);                                                                                 // 1087\n            },                                                                                                         // 1088\n            clearHint: function clearHint() {                                                                          // 1089\n                this.setHint(\"\");                                                                                      // 1090\n            },                                                                                                         // 1091\n            clearHintIfInvalid: function clearHintIfInvalid() {                                                        // 1092\n                var val, hint, valIsPrefixOfHint, isValid;                                                             // 1093\n                val = this.getInputValue();                                                                            // 1094\n                hint = this.getHint();                                                                                 // 1095\n                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;                                           // 1096\n                isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();                                      // 1097\n                !isValid && this.clearHint();                                                                          // 1098\n            },                                                                                                         // 1099\n            getLanguageDirection: function getLanguageDirection() {                                                    // 1100\n                return (this.$input.css(\"direction\") || \"ltr\").toLowerCase();                                          // 1101\n            },                                                                                                         // 1102\n            hasOverflow: function hasOverflow() {                                                                      // 1103\n                var constraint = this.$input.width() - 2;                                                              // 1104\n                this.$overflowHelper.text(this.getInputValue());                                                       // 1105\n                return this.$overflowHelper.width() >= constraint;                                                     // 1106\n            },                                                                                                         // 1107\n            isCursorAtEnd: function() {                                                                                // 1108\n                var valueLength, selectionStart, range;                                                                // 1109\n                valueLength = this.$input.val().length;                                                                // 1110\n                selectionStart = this.$input[0].selectionStart;                                                        // 1111\n                if (_.isNumber(selectionStart)) {                                                                      // 1112\n                    return selectionStart === valueLength;                                                             // 1113\n                } else if (document.selection) {                                                                       // 1114\n                    range = document.selection.createRange();                                                          // 1115\n                    range.moveStart(\"character\", -valueLength);                                                        // 1116\n                    return valueLength === range.text.length;                                                          // 1117\n                }                                                                                                      // 1118\n                return true;                                                                                           // 1119\n            },                                                                                                         // 1120\n            destroy: function destroy() {                                                                              // 1121\n                this.$hint.off(\".tt\");                                                                                 // 1122\n                this.$input.off(\".tt\");                                                                                // 1123\n                this.$hint = this.$input = this.$overflowHelper = null;                                                // 1124\n            }                                                                                                          // 1125\n        });                                                                                                            // 1126\n        return Input;                                                                                                  // 1127\n        function buildOverflowHelper($input) {                                                                         // 1128\n            return $('<pre aria-hidden=\"true\"></pre>').css({                                                           // 1129\n                position: \"absolute\",                                                                                  // 1130\n                visibility: \"hidden\",                                                                                  // 1131\n                whiteSpace: \"pre\",                                                                                     // 1132\n                fontFamily: $input.css(\"font-family\"),                                                                 // 1133\n                fontSize: $input.css(\"font-size\"),                                                                     // 1134\n                fontStyle: $input.css(\"font-style\"),                                                                   // 1135\n                fontVariant: $input.css(\"font-variant\"),                                                               // 1136\n                fontWeight: $input.css(\"font-weight\"),                                                                 // 1137\n                wordSpacing: $input.css(\"word-spacing\"),                                                               // 1138\n                letterSpacing: $input.css(\"letter-spacing\"),                                                           // 1139\n                textIndent: $input.css(\"text-indent\"),                                                                 // 1140\n                textRendering: $input.css(\"text-rendering\"),                                                           // 1141\n                textTransform: $input.css(\"text-transform\")                                                            // 1142\n            }).insertAfter($input);                                                                                    // 1143\n        }                                                                                                              // 1144\n        function areQueriesEquivalent(a, b) {                                                                          // 1145\n            return Input.normalizeQuery(a) === Input.normalizeQuery(b);                                                // 1146\n        }                                                                                                              // 1147\n        function withModifier($e) {                                                                                    // 1148\n            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;                                               // 1149\n        }                                                                                                              // 1150\n    }();                                                                                                               // 1151\n    var Dataset = function() {                                                                                         // 1152\n        \"use strict\";                                                                                                  // 1153\n        var datasetKey = \"ttDataset\", valueKey = \"ttValue\", datumKey = \"ttDatum\";                                      // 1154\n        function Dataset(o) {                                                                                          // 1155\n            o = o || {};                                                                                               // 1156\n            o.templates = o.templates || {};                                                                           // 1157\n            if (!o.source) {                                                                                           // 1158\n                $.error(\"missing source\");                                                                             // 1159\n            }                                                                                                          // 1160\n            if (o.name && !isValidName(o.name)) {                                                                      // 1161\n                $.error(\"invalid dataset name: \" + o.name);                                                            // 1162\n            }                                                                                                          // 1163\n            this.query = null;                                                                                         // 1164\n            this.highlight = !!o.highlight;                                                                            // 1165\n            this.name = o.name || _.getUniqueId();                                                                     // 1166\n            this.source = o.source;                                                                                    // 1167\n            this.displayFn = getDisplayFn(o.display || o.displayKey);                                                  // 1168\n            this.templates = getTemplates(o.templates, this.displayFn);                                                // 1169\n            this.$el = $(html.dataset.replace(\"%CLASS%\", this.name));                                                  // 1170\n        }                                                                                                              // 1171\n        Dataset.extractDatasetName = function extractDatasetName(el) {                                                 // 1172\n            return $(el).data(datasetKey);                                                                             // 1173\n        };                                                                                                             // 1174\n        Dataset.extractValue = function extractDatum(el) {                                                             // 1175\n            return $(el).data(valueKey);                                                                               // 1176\n        };                                                                                                             // 1177\n        Dataset.extractDatum = function extractDatum(el) {                                                             // 1178\n            return $(el).data(datumKey);                                                                               // 1179\n        };                                                                                                             // 1180\n        _.mixin(Dataset.prototype, EventEmitter, {                                                                     // 1181\n            _render: function render(query, suggestions) {                                                             // 1182\n                if (!this.$el) {                                                                                       // 1183\n                    return;                                                                                            // 1184\n                }                                                                                                      // 1185\n                var that = this, hasSuggestions;                                                                       // 1186\n                this.$el.empty();                                                                                      // 1187\n                hasSuggestions = suggestions && suggestions.length;                                                    // 1188\n                if (!hasSuggestions && this.templates.empty) {                                                         // 1189\n                    this.$el.html(getEmptyHtml()).prepend(that.templates.header ? getHeaderHtml() : null).append(that.templates.footer ? getFooterHtml() : null);\n                } else if (hasSuggestions) {                                                                           // 1191\n                    this.$el.html(getSuggestionsHtml()).prepend(that.templates.header ? getHeaderHtml() : null).append(that.templates.footer ? getFooterHtml() : null);\n                }                                                                                                      // 1193\n                this.trigger(\"rendered\");                                                                              // 1194\n                function getEmptyHtml() {                                                                              // 1195\n                    return that.templates.empty({                                                                      // 1196\n                        query: query,                                                                                  // 1197\n                        isEmpty: true                                                                                  // 1198\n                    });                                                                                                // 1199\n                }                                                                                                      // 1200\n                function getSuggestionsHtml() {                                                                        // 1201\n                    var $suggestions, nodes;                                                                           // 1202\n                    $suggestions = $(html.suggestions).css(css.suggestions);                                           // 1203\n                    nodes = _.map(suggestions, getSuggestionNode);                                                     // 1204\n                    $suggestions.append.apply($suggestions, nodes);                                                    // 1205\n                    that.highlight && highlight({                                                                      // 1206\n                        className: \"tt-highlight\",                                                                     // 1207\n                        node: $suggestions[0],                                                                         // 1208\n                        pattern: query                                                                                 // 1209\n                    });                                                                                                // 1210\n                    return $suggestions;                                                                               // 1211\n                    function getSuggestionNode(suggestion) {                                                           // 1212\n                        var $el;                                                                                       // 1213\n                        $el = $(html.suggestion).append(that.templates.suggestion(suggestion)).data(datasetKey, that.name).data(valueKey, that.displayFn(suggestion)).data(datumKey, suggestion);\n                        $el.children().each(function() {                                                               // 1215\n                            $(this).css(css.suggestionChild);                                                          // 1216\n                        });                                                                                            // 1217\n                        return $el;                                                                                    // 1218\n                    }                                                                                                  // 1219\n                }                                                                                                      // 1220\n                function getHeaderHtml() {                                                                             // 1221\n                    return that.templates.header({                                                                     // 1222\n                        query: query,                                                                                  // 1223\n                        isEmpty: !hasSuggestions                                                                       // 1224\n                    });                                                                                                // 1225\n                }                                                                                                      // 1226\n                function getFooterHtml() {                                                                             // 1227\n                    return that.templates.footer({                                                                     // 1228\n                        query: query,                                                                                  // 1229\n                        isEmpty: !hasSuggestions                                                                       // 1230\n                    });                                                                                                // 1231\n                }                                                                                                      // 1232\n            },                                                                                                         // 1233\n            getRoot: function getRoot() {                                                                              // 1234\n                return this.$el;                                                                                       // 1235\n            },                                                                                                         // 1236\n            update: function update(query) {                                                                           // 1237\n                var that = this;                                                                                       // 1238\n                this.query = query;                                                                                    // 1239\n                this.canceled = false;                                                                                 // 1240\n                this.source(query, render);                                                                            // 1241\n                function render(suggestions) {                                                                         // 1242\n                    if (!that.canceled && query === that.query) {                                                      // 1243\n                        that._render(query, suggestions);                                                              // 1244\n                    }                                                                                                  // 1245\n                }                                                                                                      // 1246\n            },                                                                                                         // 1247\n            cancel: function cancel() {                                                                                // 1248\n                this.canceled = true;                                                                                  // 1249\n            },                                                                                                         // 1250\n            clear: function clear() {                                                                                  // 1251\n                this.cancel();                                                                                         // 1252\n                this.$el.empty();                                                                                      // 1253\n                this.trigger(\"rendered\");                                                                              // 1254\n            },                                                                                                         // 1255\n            isEmpty: function isEmpty() {                                                                              // 1256\n                return this.$el.is(\":empty\");                                                                          // 1257\n            },                                                                                                         // 1258\n            destroy: function destroy() {                                                                              // 1259\n                this.$el = null;                                                                                       // 1260\n            }                                                                                                          // 1261\n        });                                                                                                            // 1262\n        return Dataset;                                                                                                // 1263\n        function getDisplayFn(display) {                                                                               // 1264\n            display = display || \"value\";                                                                              // 1265\n            return _.isFunction(display) ? display : displayFn;                                                        // 1266\n            function displayFn(obj) {                                                                                  // 1267\n                return obj[display];                                                                                   // 1268\n            }                                                                                                          // 1269\n        }                                                                                                              // 1270\n        function getTemplates(templates, displayFn) {                                                                  // 1271\n            return {                                                                                                   // 1272\n                empty: templates.empty && _.templatify(templates.empty),                                               // 1273\n                header: templates.header && _.templatify(templates.header),                                            // 1274\n                footer: templates.footer && _.templatify(templates.footer),                                            // 1275\n                suggestion: templates.suggestion || suggestionTemplate                                                 // 1276\n            };                                                                                                         // 1277\n            function suggestionTemplate(context) {                                                                     // 1278\n                return \"<p>\" + displayFn(context) + \"</p>\";                                                            // 1279\n            }                                                                                                          // 1280\n        }                                                                                                              // 1281\n        function isValidName(str) {                                                                                    // 1282\n            return /^[_a-zA-Z0-9-]+$/.test(str);                                                                       // 1283\n        }                                                                                                              // 1284\n    }();                                                                                                               // 1285\n    var Dropdown = function() {                                                                                        // 1286\n        \"use strict\";                                                                                                  // 1287\n        function Dropdown(o) {                                                                                         // 1288\n            var that = this, onSuggestionClick, onSuggestionMouseEnter, onSuggestionMouseLeave;                        // 1289\n            o = o || {};                                                                                               // 1290\n            if (!o.menu) {                                                                                             // 1291\n                $.error(\"menu is required\");                                                                           // 1292\n            }                                                                                                          // 1293\n            this.isOpen = false;                                                                                       // 1294\n            this.isEmpty = true;                                                                                       // 1295\n            this.datasets = _.map(o.datasets, initializeDataset);                                                      // 1296\n            onSuggestionClick = _.bind(this._onSuggestionClick, this);                                                 // 1297\n            onSuggestionMouseEnter = _.bind(this._onSuggestionMouseEnter, this);                                       // 1298\n            onSuggestionMouseLeave = _.bind(this._onSuggestionMouseLeave, this);                                       // 1299\n            this.$menu = $(o.menu).on(\"click.tt\", \".tt-suggestion\", onSuggestionClick).on(\"mouseenter.tt\", \".tt-suggestion\", onSuggestionMouseEnter).on(\"mouseleave.tt\", \".tt-suggestion\", onSuggestionMouseLeave);\n            _.each(this.datasets, function(dataset) {                                                                  // 1301\n                that.$menu.append(dataset.getRoot());                                                                  // 1302\n                dataset.onSync(\"rendered\", that._onRendered, that);                                                    // 1303\n            });                                                                                                        // 1304\n        }                                                                                                              // 1305\n        _.mixin(Dropdown.prototype, EventEmitter, {                                                                    // 1306\n            _onSuggestionClick: function onSuggestionClick($e) {                                                       // 1307\n                this.trigger(\"suggestionClicked\", $($e.currentTarget));                                                // 1308\n            },                                                                                                         // 1309\n            _onSuggestionMouseEnter: function onSuggestionMouseEnter($e) {                                             // 1310\n                this._removeCursor();                                                                                  // 1311\n                this._setCursor($($e.currentTarget), true);                                                            // 1312\n            },                                                                                                         // 1313\n            _onSuggestionMouseLeave: function onSuggestionMouseLeave() {                                               // 1314\n                this._removeCursor();                                                                                  // 1315\n            },                                                                                                         // 1316\n            _onRendered: function onRendered() {                                                                       // 1317\n                this.isEmpty = _.every(this.datasets, isDatasetEmpty);                                                 // 1318\n                this.isEmpty ? this._hide() : this.isOpen && this._show();                                             // 1319\n                this.trigger(\"datasetRendered\");                                                                       // 1320\n                function isDatasetEmpty(dataset) {                                                                     // 1321\n                    return dataset.isEmpty();                                                                          // 1322\n                }                                                                                                      // 1323\n            },                                                                                                         // 1324\n            _hide: function() {                                                                                        // 1325\n                this.$menu.hide();                                                                                     // 1326\n            },                                                                                                         // 1327\n            _show: function() {                                                                                        // 1328\n                this.$menu.css(\"display\", \"block\");                                                                    // 1329\n            },                                                                                                         // 1330\n            _getSuggestions: function getSuggestions() {                                                               // 1331\n                return this.$menu.find(\".tt-suggestion\");                                                              // 1332\n            },                                                                                                         // 1333\n            _getCursor: function getCursor() {                                                                         // 1334\n                return this.$menu.find(\".tt-cursor\").first();                                                          // 1335\n            },                                                                                                         // 1336\n            _setCursor: function setCursor($el, silent) {                                                              // 1337\n                $el.first().addClass(\"tt-cursor\");                                                                     // 1338\n                !silent && this.trigger(\"cursorMoved\");                                                                // 1339\n            },                                                                                                         // 1340\n            _removeCursor: function removeCursor() {                                                                   // 1341\n                this._getCursor().removeClass(\"tt-cursor\");                                                            // 1342\n            },                                                                                                         // 1343\n            _moveCursor: function moveCursor(increment) {                                                              // 1344\n                var $suggestions, $oldCursor, newCursorIndex, $newCursor;                                              // 1345\n                if (!this.isOpen) {                                                                                    // 1346\n                    return;                                                                                            // 1347\n                }                                                                                                      // 1348\n                $oldCursor = this._getCursor();                                                                        // 1349\n                $suggestions = this._getSuggestions();                                                                 // 1350\n                this._removeCursor();                                                                                  // 1351\n                newCursorIndex = $suggestions.index($oldCursor) + increment;                                           // 1352\n                newCursorIndex = (newCursorIndex + 1) % ($suggestions.length + 1) - 1;                                 // 1353\n                if (newCursorIndex === -1) {                                                                           // 1354\n                    this.trigger(\"cursorRemoved\");                                                                     // 1355\n                    return;                                                                                            // 1356\n                } else if (newCursorIndex < -1) {                                                                      // 1357\n                    newCursorIndex = $suggestions.length - 1;                                                          // 1358\n                }                                                                                                      // 1359\n                this._setCursor($newCursor = $suggestions.eq(newCursorIndex));                                         // 1360\n                this._ensureVisible($newCursor);                                                                       // 1361\n            },                                                                                                         // 1362\n            _ensureVisible: function ensureVisible($el) {                                                              // 1363\n                var elTop, elBottom, menuScrollTop, menuHeight;                                                        // 1364\n                elTop = $el.position().top;                                                                            // 1365\n                elBottom = elTop + $el.outerHeight(true);                                                              // 1366\n                menuScrollTop = this.$menu.scrollTop();                                                                // 1367\n                menuHeight = this.$menu.height() + parseInt(this.$menu.css(\"paddingTop\"), 10) + parseInt(this.$menu.css(\"paddingBottom\"), 10);\n                if (elTop < 0) {                                                                                       // 1369\n                    this.$menu.scrollTop(menuScrollTop + elTop);                                                       // 1370\n                } else if (menuHeight < elBottom) {                                                                    // 1371\n                    this.$menu.scrollTop(menuScrollTop + (elBottom - menuHeight));                                     // 1372\n                }                                                                                                      // 1373\n            },                                                                                                         // 1374\n            close: function close() {                                                                                  // 1375\n                if (this.isOpen) {                                                                                     // 1376\n                    this.isOpen = false;                                                                               // 1377\n                    this._removeCursor();                                                                              // 1378\n                    this._hide();                                                                                      // 1379\n                    this.trigger(\"closed\");                                                                            // 1380\n                }                                                                                                      // 1381\n            },                                                                                                         // 1382\n            open: function open() {                                                                                    // 1383\n                if (!this.isOpen) {                                                                                    // 1384\n                    this.isOpen = true;                                                                                // 1385\n                    !this.isEmpty && this._show();                                                                     // 1386\n                    this.trigger(\"opened\");                                                                            // 1387\n                }                                                                                                      // 1388\n            },                                                                                                         // 1389\n            setLanguageDirection: function setLanguageDirection(dir) {                                                 // 1390\n                this.$menu.css(dir === \"ltr\" ? css.ltr : css.rtl);                                                     // 1391\n            },                                                                                                         // 1392\n            moveCursorUp: function moveCursorUp() {                                                                    // 1393\n                this._moveCursor(-1);                                                                                  // 1394\n            },                                                                                                         // 1395\n            moveCursorDown: function moveCursorDown() {                                                                // 1396\n                this._moveCursor(+1);                                                                                  // 1397\n            },                                                                                                         // 1398\n            getDatumForSuggestion: function getDatumForSuggestion($el) {                                               // 1399\n                var datum = null;                                                                                      // 1400\n                if ($el.length) {                                                                                      // 1401\n                    datum = {                                                                                          // 1402\n                        raw: Dataset.extractDatum($el),                                                                // 1403\n                        value: Dataset.extractValue($el),                                                              // 1404\n                        datasetName: Dataset.extractDatasetName($el)                                                   // 1405\n                    };                                                                                                 // 1406\n                }                                                                                                      // 1407\n                return datum;                                                                                          // 1408\n            },                                                                                                         // 1409\n            getDatumForCursor: function getDatumForCursor() {                                                          // 1410\n                return this.getDatumForSuggestion(this._getCursor().first());                                          // 1411\n            },                                                                                                         // 1412\n            getDatumForTopSuggestion: function getDatumForTopSuggestion() {                                            // 1413\n                return this.getDatumForSuggestion(this._getSuggestions().first());                                     // 1414\n            },                                                                                                         // 1415\n            update: function update(query) {                                                                           // 1416\n                _.each(this.datasets, updateDataset);                                                                  // 1417\n                function updateDataset(dataset) {                                                                      // 1418\n                    dataset.update(query);                                                                             // 1419\n                }                                                                                                      // 1420\n            },                                                                                                         // 1421\n            empty: function empty() {                                                                                  // 1422\n                _.each(this.datasets, clearDataset);                                                                   // 1423\n                this.isEmpty = true;                                                                                   // 1424\n                function clearDataset(dataset) {                                                                       // 1425\n                    dataset.clear();                                                                                   // 1426\n                }                                                                                                      // 1427\n            },                                                                                                         // 1428\n            isVisible: function isVisible() {                                                                          // 1429\n                return this.isOpen && !this.isEmpty;                                                                   // 1430\n            },                                                                                                         // 1431\n            destroy: function destroy() {                                                                              // 1432\n                this.$menu.off(\".tt\");                                                                                 // 1433\n                this.$menu = null;                                                                                     // 1434\n                _.each(this.datasets, destroyDataset);                                                                 // 1435\n                function destroyDataset(dataset) {                                                                     // 1436\n                    dataset.destroy();                                                                                 // 1437\n                }                                                                                                      // 1438\n            }                                                                                                          // 1439\n        });                                                                                                            // 1440\n        return Dropdown;                                                                                               // 1441\n        function initializeDataset(oDataset) {                                                                         // 1442\n            return new Dataset(oDataset);                                                                              // 1443\n        }                                                                                                              // 1444\n    }();                                                                                                               // 1445\n    var Typeahead = function() {                                                                                       // 1446\n        \"use strict\";                                                                                                  // 1447\n        var attrsKey = \"ttAttrs\";                                                                                      // 1448\n        function Typeahead(o) {                                                                                        // 1449\n            var $menu, $input, $hint;                                                                                  // 1450\n            o = o || {};                                                                                               // 1451\n            if (!o.input) {                                                                                            // 1452\n                $.error(\"missing input\");                                                                              // 1453\n            }                                                                                                          // 1454\n            this.isActivated = false;                                                                                  // 1455\n            this.autoselect = !!o.autoselect;                                                                          // 1456\n            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;                                                // 1457\n            this.$node = buildDom(o.input, o.withHint);                                                                // 1458\n            $menu = this.$node.find(\".tt-dropdown-menu\");                                                              // 1459\n            $input = this.$node.find(\".tt-input\");                                                                     // 1460\n            $hint = this.$node.find(\".tt-hint\");                                                                       // 1461\n            $input.on(\"blur.tt\", function($e) {                                                                        // 1462\n                var active, isActive, hasActive;                                                                       // 1463\n                active = document.activeElement;                                                                       // 1464\n                isActive = $menu.is(active);                                                                           // 1465\n                hasActive = $menu.has(active).length > 0;                                                              // 1466\n                if (_.isMsie() && (isActive || hasActive)) {                                                           // 1467\n                    $e.preventDefault();                                                                               // 1468\n                    $e.stopImmediatePropagation();                                                                     // 1469\n                    _.defer(function() {                                                                               // 1470\n                        $input.focus();                                                                                // 1471\n                    });                                                                                                // 1472\n                }                                                                                                      // 1473\n            });                                                                                                        // 1474\n            $menu.on(\"mousedown.tt\", function($e) {                                                                    // 1475\n                $e.preventDefault();                                                                                   // 1476\n            });                                                                                                        // 1477\n            this.eventBus = o.eventBus || new EventBus({                                                               // 1478\n                el: $input                                                                                             // 1479\n            });                                                                                                        // 1480\n            this.dropdown = new Dropdown({                                                                             // 1481\n                menu: $menu,                                                                                           // 1482\n                datasets: o.datasets                                                                                   // 1483\n            }).onSync(\"suggestionClicked\", this._onSuggestionClicked, this).onSync(\"cursorMoved\", this._onCursorMoved, this).onSync(\"cursorRemoved\", this._onCursorRemoved, this).onSync(\"opened\", this._onOpened, this).onSync(\"closed\", this._onClosed, this).onAsync(\"datasetRendered\", this._onDatasetRendered, this);\n            this.input = new Input({                                                                                   // 1485\n                input: $input,                                                                                         // 1486\n                hint: $hint                                                                                            // 1487\n            }).onSync(\"focused\", this._onFocused, this).onSync(\"blurred\", this._onBlurred, this).onSync(\"enterKeyed\", this._onEnterKeyed, this).onSync(\"tabKeyed\", this._onTabKeyed, this).onSync(\"escKeyed\", this._onEscKeyed, this).onSync(\"upKeyed\", this._onUpKeyed, this).onSync(\"downKeyed\", this._onDownKeyed, this).onSync(\"leftKeyed\", this._onLeftKeyed, this).onSync(\"rightKeyed\", this._onRightKeyed, this).onSync(\"queryChanged\", this._onQueryChanged, this).onSync(\"whitespaceChanged\", this._onWhitespaceChanged, this);\n            this._setLanguageDirection();                                                                              // 1489\n        }                                                                                                              // 1490\n        _.mixin(Typeahead.prototype, {                                                                                 // 1491\n            _onSuggestionClicked: function onSuggestionClicked(type, $el) {                                            // 1492\n                var datum;                                                                                             // 1493\n                if (datum = this.dropdown.getDatumForSuggestion($el)) {                                                // 1494\n                    this._select(datum);                                                                               // 1495\n                }                                                                                                      // 1496\n            },                                                                                                         // 1497\n            _onCursorMoved: function onCursorMoved() {                                                                 // 1498\n                var datum = this.dropdown.getDatumForCursor();                                                         // 1499\n                this.input.setInputValue(datum.value, true);                                                           // 1500\n                this.eventBus.trigger(\"cursorchanged\", datum.raw, datum.datasetName);                                  // 1501\n            },                                                                                                         // 1502\n            _onCursorRemoved: function onCursorRemoved() {                                                             // 1503\n                this.input.resetInputValue();                                                                          // 1504\n                this._updateHint();                                                                                    // 1505\n            },                                                                                                         // 1506\n            _onDatasetRendered: function onDatasetRendered() {                                                         // 1507\n                this._updateHint();                                                                                    // 1508\n            },                                                                                                         // 1509\n            _onOpened: function onOpened() {                                                                           // 1510\n                this._updateHint();                                                                                    // 1511\n                this.eventBus.trigger(\"opened\");                                                                       // 1512\n            },                                                                                                         // 1513\n            _onClosed: function onClosed() {                                                                           // 1514\n                this.input.clearHint();                                                                                // 1515\n                this.eventBus.trigger(\"closed\");                                                                       // 1516\n            },                                                                                                         // 1517\n            _onFocused: function onFocused() {                                                                         // 1518\n                this.isActivated = true;                                                                               // 1519\n                this.dropdown.open();                                                                                  // 1520\n            },                                                                                                         // 1521\n            _onBlurred: function onBlurred() {                                                                         // 1522\n                this.isActivated = false;                                                                              // 1523\n                this.dropdown.empty();                                                                                 // 1524\n                this.dropdown.close();                                                                                 // 1525\n            },                                                                                                         // 1526\n            _onEnterKeyed: function onEnterKeyed(type, $e) {                                                           // 1527\n                var cursorDatum, topSuggestionDatum;                                                                   // 1528\n                cursorDatum = this.dropdown.getDatumForCursor();                                                       // 1529\n                topSuggestionDatum = this.dropdown.getDatumForTopSuggestion();                                         // 1530\n                if (cursorDatum) {                                                                                     // 1531\n                    this._select(cursorDatum);                                                                         // 1532\n                    $e.preventDefault();                                                                               // 1533\n                } else if (this.autoselect && topSuggestionDatum) {                                                    // 1534\n                    this._select(topSuggestionDatum);                                                                  // 1535\n                    $e.preventDefault();                                                                               // 1536\n                }                                                                                                      // 1537\n            },                                                                                                         // 1538\n            _onTabKeyed: function onTabKeyed(type, $e) {                                                               // 1539\n                var datum;                                                                                             // 1540\n                if (datum = this.dropdown.getDatumForCursor()) {                                                       // 1541\n                    this._select(datum);                                                                               // 1542\n                    $e.preventDefault();                                                                               // 1543\n                } else {                                                                                               // 1544\n                    this._autocomplete(true);                                                                          // 1545\n                }                                                                                                      // 1546\n            },                                                                                                         // 1547\n            _onEscKeyed: function onEscKeyed() {                                                                       // 1548\n                this.dropdown.close();                                                                                 // 1549\n                this.input.resetInputValue();                                                                          // 1550\n            },                                                                                                         // 1551\n            _onUpKeyed: function onUpKeyed() {                                                                         // 1552\n                var query = this.input.getQuery();                                                                     // 1553\n                this.dropdown.isEmpty && query.length >= this.minLength ? this.dropdown.update(query) : this.dropdown.moveCursorUp();\n                this.dropdown.open();                                                                                  // 1555\n            },                                                                                                         // 1556\n            _onDownKeyed: function onDownKeyed() {                                                                     // 1557\n                var query = this.input.getQuery();                                                                     // 1558\n                this.dropdown.isEmpty && query.length >= this.minLength ? this.dropdown.update(query) : this.dropdown.moveCursorDown();\n                this.dropdown.open();                                                                                  // 1560\n            },                                                                                                         // 1561\n            _onLeftKeyed: function onLeftKeyed() {                                                                     // 1562\n                this.dir === \"rtl\" && this._autocomplete();                                                            // 1563\n            },                                                                                                         // 1564\n            _onRightKeyed: function onRightKeyed() {                                                                   // 1565\n                this.dir === \"ltr\" && this._autocomplete();                                                            // 1566\n            },                                                                                                         // 1567\n            _onQueryChanged: function onQueryChanged(e, query) {                                                       // 1568\n                this.input.clearHintIfInvalid();                                                                       // 1569\n                query.length >= this.minLength ? this.dropdown.update(query) : this.dropdown.empty();                  // 1570\n                this.dropdown.open();                                                                                  // 1571\n                this._setLanguageDirection();                                                                          // 1572\n            },                                                                                                         // 1573\n            _onWhitespaceChanged: function onWhitespaceChanged() {                                                     // 1574\n                this._updateHint();                                                                                    // 1575\n                this.dropdown.open();                                                                                  // 1576\n            },                                                                                                         // 1577\n            _setLanguageDirection: function setLanguageDirection() {                                                   // 1578\n                var dir;                                                                                               // 1579\n                if (this.dir !== (dir = this.input.getLanguageDirection())) {                                          // 1580\n                    this.dir = dir;                                                                                    // 1581\n                    this.$node.css(\"direction\", dir);                                                                  // 1582\n                    this.dropdown.setLanguageDirection(dir);                                                           // 1583\n                }                                                                                                      // 1584\n            },                                                                                                         // 1585\n            _updateHint: function updateHint() {                                                                       // 1586\n                var datum, val, query, escapedQuery, frontMatchRegEx, match;                                           // 1587\n                datum = this.dropdown.getDatumForTopSuggestion();                                                      // 1588\n                if (datum && this.dropdown.isVisible() && !this.input.hasOverflow()) {                                 // 1589\n                    val = this.input.getInputValue();                                                                  // 1590\n                    query = Input.normalizeQuery(val);                                                                 // 1591\n                    escapedQuery = _.escapeRegExChars(query);                                                          // 1592\n                    frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");                               // 1593\n                    match = frontMatchRegEx.exec(datum.value);                                                         // 1594\n                    match ? this.input.setHint(val + match[1]) : this.input.clearHint();                               // 1595\n                } else {                                                                                               // 1596\n                    this.input.clearHint();                                                                            // 1597\n                }                                                                                                      // 1598\n            },                                                                                                         // 1599\n            _autocomplete: function autocomplete(laxCursor) {                                                          // 1600\n                var hint, query, isCursorAtEnd, datum;                                                                 // 1601\n                hint = this.input.getHint();                                                                           // 1602\n                query = this.input.getQuery();                                                                         // 1603\n                isCursorAtEnd = laxCursor || this.input.isCursorAtEnd();                                               // 1604\n                if (hint && query !== hint && isCursorAtEnd) {                                                         // 1605\n                    datum = this.dropdown.getDatumForTopSuggestion();                                                  // 1606\n                    datum && this.input.setInputValue(datum.value);                                                    // 1607\n                    this.eventBus.trigger(\"autocompleted\", datum.raw, datum.datasetName);                              // 1608\n                }                                                                                                      // 1609\n            },                                                                                                         // 1610\n            _select: function select(datum) {                                                                          // 1611\n                this.input.setQuery(datum.value);                                                                      // 1612\n                this.input.setInputValue(datum.value, true);                                                           // 1613\n                this._setLanguageDirection();                                                                          // 1614\n                this.eventBus.trigger(\"selected\", datum.raw, datum.datasetName);                                       // 1615\n                this.dropdown.close();                                                                                 // 1616\n                _.defer(_.bind(this.dropdown.empty, this.dropdown));                                                   // 1617\n            },                                                                                                         // 1618\n            open: function open() {                                                                                    // 1619\n                this.dropdown.open();                                                                                  // 1620\n            },                                                                                                         // 1621\n            close: function close() {                                                                                  // 1622\n                this.dropdown.close();                                                                                 // 1623\n            },                                                                                                         // 1624\n            setVal: function setVal(val) {                                                                             // 1625\n                val = _.toStr(val);                                                                                    // 1626\n                if (this.isActivated) {                                                                                // 1627\n                    this.input.setInputValue(val);                                                                     // 1628\n                } else {                                                                                               // 1629\n                    this.input.setQuery(val);                                                                          // 1630\n                    this.input.setInputValue(val, true);                                                               // 1631\n                }                                                                                                      // 1632\n                this._setLanguageDirection();                                                                          // 1633\n            },                                                                                                         // 1634\n            getVal: function getVal() {                                                                                // 1635\n                return this.input.getQuery();                                                                          // 1636\n            },                                                                                                         // 1637\n            destroy: function destroy() {                                                                              // 1638\n                this.input.destroy();                                                                                  // 1639\n                this.dropdown.destroy();                                                                               // 1640\n                destroyDomStructure(this.$node);                                                                       // 1641\n                this.$node = null;                                                                                     // 1642\n            }                                                                                                          // 1643\n        });                                                                                                            // 1644\n        return Typeahead;                                                                                              // 1645\n        function buildDom(input, withHint) {                                                                           // 1646\n            var $input, $wrapper, $dropdown, $hint;                                                                    // 1647\n            $input = $(input);                                                                                         // 1648\n            $wrapper = $(html.wrapper).css(css.wrapper);                                                               // 1649\n            $dropdown = $(html.dropdown).css(css.dropdown);                                                            // 1650\n            $hint = $input.clone().css(css.hint).css(getBackgroundStyles($input));                                     // 1651\n            $hint.val(\"\").removeData().addClass(\"tt-hint\").removeAttr(\"id name placeholder required\").prop(\"readonly\", true).attr({\n                autocomplete: \"off\",                                                                                   // 1653\n                spellcheck: \"false\",                                                                                   // 1654\n                tabindex: -1                                                                                           // 1655\n            });                                                                                                        // 1656\n            $input.data(attrsKey, {                                                                                    // 1657\n                dir: $input.attr(\"dir\"),                                                                               // 1658\n                autocomplete: $input.attr(\"autocomplete\"),                                                             // 1659\n                spellcheck: $input.attr(\"spellcheck\"),                                                                 // 1660\n                style: $input.attr(\"style\")                                                                            // 1661\n            });                                                                                                        // 1662\n            $input.addClass(\"tt-input\").attr({                                                                         // 1663\n                autocomplete: \"off\",                                                                                   // 1664\n                spellcheck: false                                                                                      // 1665\n            }).css(withHint ? css.input : css.inputWithNoHint);                                                        // 1666\n            try {                                                                                                      // 1667\n                !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");                                                     // 1668\n            } catch (e) {}                                                                                             // 1669\n            return $input.wrap($wrapper).parent().prepend(withHint ? $hint : null).append($dropdown);                  // 1670\n        }                                                                                                              // 1671\n        function getBackgroundStyles($el) {                                                                            // 1672\n            return {                                                                                                   // 1673\n                backgroundAttachment: $el.css(\"background-attachment\"),                                                // 1674\n                backgroundClip: $el.css(\"background-clip\"),                                                            // 1675\n                backgroundColor: $el.css(\"background-color\"),                                                          // 1676\n                backgroundImage: $el.css(\"background-image\"),                                                          // 1677\n                backgroundOrigin: $el.css(\"background-origin\"),                                                        // 1678\n                backgroundPosition: $el.css(\"background-position\"),                                                    // 1679\n                backgroundRepeat: $el.css(\"background-repeat\"),                                                        // 1680\n                backgroundSize: $el.css(\"background-size\")                                                             // 1681\n            };                                                                                                         // 1682\n        }                                                                                                              // 1683\n        function destroyDomStructure($node) {                                                                          // 1684\n            var $input = $node.find(\".tt-input\");                                                                      // 1685\n            _.each($input.data(attrsKey), function(val, key) {                                                         // 1686\n                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);                                   // 1687\n            });                                                                                                        // 1688\n            $input.detach().removeData(attrsKey).removeClass(\"tt-input\").insertAfter($node);                           // 1689\n            $node.remove();                                                                                            // 1690\n        }                                                                                                              // 1691\n    }();                                                                                                               // 1692\n    (function() {                                                                                                      // 1693\n        \"use strict\";                                                                                                  // 1694\n        var old, typeaheadKey, methods;                                                                                // 1695\n        old = $.fn.typeahead;                                                                                          // 1696\n        typeaheadKey = \"ttTypeahead\";                                                                                  // 1697\n        methods = {                                                                                                    // 1698\n            initialize: function initialize(o, datasets) {                                                             // 1699\n                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);                               // 1700\n                o = o || {};                                                                                           // 1701\n                return this.each(attach);                                                                              // 1702\n                function attach() {                                                                                    // 1703\n                    var $input = $(this), eventBus, typeahead;                                                         // 1704\n                    _.each(datasets, function(d) {                                                                     // 1705\n                        d.highlight = !!o.highlight;                                                                   // 1706\n                    });                                                                                                // 1707\n                    typeahead = new Typeahead({                                                                        // 1708\n                        input: $input,                                                                                 // 1709\n                        eventBus: eventBus = new EventBus({                                                            // 1710\n                            el: $input                                                                                 // 1711\n                        }),                                                                                            // 1712\n                        withHint: _.isUndefined(o.hint) ? true : !!o.hint,                                             // 1713\n                        minLength: o.minLength,                                                                        // 1714\n                        autoselect: o.autoselect,                                                                      // 1715\n                        datasets: datasets                                                                             // 1716\n                    });                                                                                                // 1717\n                    $input.data(typeaheadKey, typeahead);                                                              // 1718\n                }                                                                                                      // 1719\n            },                                                                                                         // 1720\n            open: function open() {                                                                                    // 1721\n                return this.each(openTypeahead);                                                                       // 1722\n                function openTypeahead() {                                                                             // 1723\n                    var $input = $(this), typeahead;                                                                   // 1724\n                    if (typeahead = $input.data(typeaheadKey)) {                                                       // 1725\n                        typeahead.open();                                                                              // 1726\n                    }                                                                                                  // 1727\n                }                                                                                                      // 1728\n            },                                                                                                         // 1729\n            close: function close() {                                                                                  // 1730\n                return this.each(closeTypeahead);                                                                      // 1731\n                function closeTypeahead() {                                                                            // 1732\n                    var $input = $(this), typeahead;                                                                   // 1733\n                    if (typeahead = $input.data(typeaheadKey)) {                                                       // 1734\n                        typeahead.close();                                                                             // 1735\n                    }                                                                                                  // 1736\n                }                                                                                                      // 1737\n            },                                                                                                         // 1738\n            val: function val(newVal) {                                                                                // 1739\n                return !arguments.length ? getVal(this.first()) : this.each(setVal);                                   // 1740\n                function setVal() {                                                                                    // 1741\n                    var $input = $(this), typeahead;                                                                   // 1742\n                    if (typeahead = $input.data(typeaheadKey)) {                                                       // 1743\n                        typeahead.setVal(newVal);                                                                      // 1744\n                    }                                                                                                  // 1745\n                }                                                                                                      // 1746\n                function getVal($input) {                                                                              // 1747\n                    var typeahead, query;                                                                              // 1748\n                    if (typeahead = $input.data(typeaheadKey)) {                                                       // 1749\n                        query = typeahead.getVal();                                                                    // 1750\n                    }                                                                                                  // 1751\n                    return query;                                                                                      // 1752\n                }                                                                                                      // 1753\n            },                                                                                                         // 1754\n            destroy: function destroy() {                                                                              // 1755\n                return this.each(unattach);                                                                            // 1756\n                function unattach() {                                                                                  // 1757\n                    var $input = $(this), typeahead;                                                                   // 1758\n                    if (typeahead = $input.data(typeaheadKey)) {                                                       // 1759\n                        typeahead.destroy();                                                                           // 1760\n                        $input.removeData(typeaheadKey);                                                               // 1761\n                    }                                                                                                  // 1762\n                }                                                                                                      // 1763\n            }                                                                                                          // 1764\n        };                                                                                                             // 1765\n        $.fn.typeahead = function(method) {                                                                            // 1766\n            var tts;                                                                                                   // 1767\n            if (methods[method] && method !== \"initialize\") {                                                          // 1768\n                tts = this.filter(function() {                                                                         // 1769\n                    return !!$(this).data(typeaheadKey);                                                               // 1770\n                });                                                                                                    // 1771\n                return methods[method].apply(tts, [].slice.call(arguments, 1));                                        // 1772\n            } else {                                                                                                   // 1773\n                return methods.initialize.apply(this, arguments);                                                      // 1774\n            }                                                                                                          // 1775\n        };                                                                                                             // 1776\n        $.fn.typeahead.noConflict = function noConflict() {                                                            // 1777\n            $.fn.typeahead = old;                                                                                      // 1778\n            return this;                                                                                               // 1779\n        };                                                                                                             // 1780\n    })();                                                                                                              // 1781\n})(window.jQuery);                                                                                                     // 1782\n                                                                                                                       // 1783\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                     // 1793\n}).call(this);                                                       // 1794\n                                                                     // 1795\n///////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['comerc:bs-typeahead'] = {};\n\n})();\n","servePath":"/packages/comerc_bs-typeahead.js","sourceMap":{"version":3,"sources":["/packages/comerc_bs-typeahead/packages/comerc_bs-typeahead.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4E","file":"/packages/comerc_bs-typeahead.js","sourcesContent":["(function () {\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/comerc:bs-typeahead/typeahead.bundle.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/*!                                                                                                                    // 1\n * typeahead.js 0.10.5                                                                                                 // 2\n * https://github.com/twitter/typeahead.js                                                                             // 3\n * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT                                              // 4\n */                                                                                                                    // 5\n                                                                                                                       // 6\n(function($) {                                                                                                         // 7\n    var _ = function() {                                                                                               // 8\n        \"use strict\";                                                                                                  // 9\n        return {                                                                                                       // 10\n            isMsie: function() {                                                                                       // 11\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },                                                                                                         // 13\n            isBlankString: function(str) {                                                                             // 14\n                return !str || /^\\s*$/.test(str);                                                                      // 15\n            },                                                                                                         // 16\n            escapeRegExChars: function(str) {                                                                          // 17\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");                                     // 18\n            },                                                                                                         // 19\n            isString: function(obj) {                                                                                  // 20\n                return typeof obj === \"string\";                                                                        // 21\n            },                                                                                                         // 22\n            isNumber: function(obj) {                                                                                  // 23\n                return typeof obj === \"number\";                                                                        // 24\n            },                                                                                                         // 25\n            isArray: $.isArray,                                                                                        // 26\n            isFunction: $.isFunction,                                                                                  // 27\n            isObject: $.isPlainObject,                                                                                 // 28\n            isUndefined: function(obj) {                                                                               // 29\n                return typeof obj === \"undefined\";                                                                     // 30\n            },                                                                                                         // 31\n            toStr: function toStr(s) {                                                                                 // 32\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";                                                   // 33\n            },                                                                                                         // 34\n            bind: $.proxy,                                                                                             // 35\n            each: function(collection, cb) {                                                                           // 36\n                $.each(collection, reverseArgs);                                                                       // 37\n                function reverseArgs(index, value) {                                                                   // 38\n                    return cb(value, index);                                                                           // 39\n                }                                                                                                      // 40\n            },                                                                                                         // 41\n            map: $.map,                                                                                                // 42\n            filter: $.grep,                                                                                            // 43\n            every: function(obj, test) {                                                                               // 44\n                var result = true;                                                                                     // 45\n                if (!obj) {                                                                                            // 46\n                    return result;                                                                                     // 47\n                }                                                                                                      // 48\n                $.each(obj, function(key, val) {                                                                       // 49\n                    if (!(result = test.call(null, val, key, obj))) {                                                  // 50\n                        return false;                                                                                  // 51\n                    }                                                                                                  // 52\n                });                                                                                                    // 53\n                return !!result;                                                                                       // 54\n            },                                                                                                         // 55\n            some: function(obj, test) {                                                                                // 56\n                var result = false;                                                                                    // 57\n                if (!obj) {                                                                                            // 58\n                    return result;                                                                                     // 59\n                }                                                                                                      // 60\n                $.each(obj, function(key, val) {                                                                       // 61\n                    if (result = test.call(null, val, key, obj)) {                                                     // 62\n                        return false;                                                                                  // 63\n                    }                                                                                                  // 64\n                });                                                                                                    // 65\n                return !!result;                                                                                       // 66\n            },                                                                                                         // 67\n            mixin: $.extend,                                                                                           // 68\n            getUniqueId: function() {                                                                                  // 69\n                var counter = 0;                                                                                       // 70\n                return function() {                                                                                    // 71\n                    return counter++;                                                                                  // 72\n                };                                                                                                     // 73\n            }(),                                                                                                       // 74\n            templatify: function templatify(obj) {                                                                     // 75\n                return $.isFunction(obj) ? obj : template;                                                             // 76\n                function template() {                                                                                  // 77\n                    return String(obj);                                                                                // 78\n                }                                                                                                      // 79\n            },                                                                                                         // 80\n            defer: function(fn) {                                                                                      // 81\n                setTimeout(fn, 0);                                                                                     // 82\n            },                                                                                                         // 83\n            debounce: function(func, wait, immediate) {                                                                // 84\n                var timeout, result;                                                                                   // 85\n                return function() {                                                                                    // 86\n                    var context = this, args = arguments, later, callNow;                                              // 87\n                    later = function() {                                                                               // 88\n                        timeout = null;                                                                                // 89\n                        if (!immediate) {                                                                              // 90\n                            result = func.apply(context, args);                                                        // 91\n                        }                                                                                              // 92\n                    };                                                                                                 // 93\n                    callNow = immediate && !timeout;                                                                   // 94\n                    clearTimeout(timeout);                                                                             // 95\n                    timeout = setTimeout(later, wait);                                                                 // 96\n                    if (callNow) {                                                                                     // 97\n                        result = func.apply(context, args);                                                            // 98\n                    }                                                                                                  // 99\n                    return result;                                                                                     // 100\n                };                                                                                                     // 101\n            },                                                                                                         // 102\n            throttle: function(func, wait) {                                                                           // 103\n                var context, args, timeout, result, previous, later;                                                   // 104\n                previous = 0;                                                                                          // 105\n                later = function() {                                                                                   // 106\n                    previous = new Date();                                                                             // 107\n                    timeout = null;                                                                                    // 108\n                    result = func.apply(context, args);                                                                // 109\n                };                                                                                                     // 110\n                return function() {                                                                                    // 111\n                    var now = new Date(), remaining = wait - (now - previous);                                         // 112\n                    context = this;                                                                                    // 113\n                    args = arguments;                                                                                  // 114\n                    if (remaining <= 0) {                                                                              // 115\n                        clearTimeout(timeout);                                                                         // 116\n                        timeout = null;                                                                                // 117\n                        previous = now;                                                                                // 118\n                        result = func.apply(context, args);                                                            // 119\n                    } else if (!timeout) {                                                                             // 120\n                        timeout = setTimeout(later, remaining);                                                        // 121\n                    }                                                                                                  // 122\n                    return result;                                                                                     // 123\n                };                                                                                                     // 124\n            },                                                                                                         // 125\n            noop: function() {}                                                                                        // 126\n        };                                                                                                             // 127\n    }();                                                                                                               // 128\n    var VERSION = \"0.10.5\";                                                                                            // 129\n    var tokenizers = function() {                                                                                      // 130\n        \"use strict\";                                                                                                  // 131\n        return {                                                                                                       // 132\n            nonword: nonword,                                                                                          // 133\n            whitespace: whitespace,                                                                                    // 134\n            obj: {                                                                                                     // 135\n                nonword: getObjTokenizer(nonword),                                                                     // 136\n                whitespace: getObjTokenizer(whitespace)                                                                // 137\n            }                                                                                                          // 138\n        };                                                                                                             // 139\n        function whitespace(str) {                                                                                     // 140\n            str = _.toStr(str);                                                                                        // 141\n            return str ? str.split(/\\s+/) : [];                                                                        // 142\n        }                                                                                                              // 143\n        function nonword(str) {                                                                                        // 144\n            str = _.toStr(str);                                                                                        // 145\n            return str ? str.split(/\\W+/) : [];                                                                        // 146\n        }                                                                                                              // 147\n        function getObjTokenizer(tokenizer) {                                                                          // 148\n            return function setKey() {                                                                                 // 149\n                var args = [].slice.call(arguments, 0);                                                                // 150\n                return function tokenize(o) {                                                                          // 151\n                    var tokens = [];                                                                                   // 152\n                    _.each(args, function(k) {                                                                         // 153\n                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));                                              // 154\n                    });                                                                                                // 155\n                    return tokens;                                                                                     // 156\n                };                                                                                                     // 157\n            };                                                                                                         // 158\n        }                                                                                                              // 159\n    }();                                                                                                               // 160\n    var LruCache = function() {                                                                                        // 161\n        \"use strict\";                                                                                                  // 162\n        function LruCache(maxSize) {                                                                                   // 163\n            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;                                                        // 164\n            this.reset();                                                                                              // 165\n            if (this.maxSize <= 0) {                                                                                   // 166\n                this.set = this.get = $.noop;                                                                          // 167\n            }                                                                                                          // 168\n        }                                                                                                              // 169\n        _.mixin(LruCache.prototype, {                                                                                  // 170\n            set: function set(key, val) {                                                                              // 171\n                var tailItem = this.list.tail, node;                                                                   // 172\n                if (this.size >= this.maxSize) {                                                                       // 173\n                    this.list.remove(tailItem);                                                                        // 174\n                    delete this.hash[tailItem.key];                                                                    // 175\n                }                                                                                                      // 176\n                if (node = this.hash[key]) {                                                                           // 177\n                    node.val = val;                                                                                    // 178\n                    this.list.moveToFront(node);                                                                       // 179\n                } else {                                                                                               // 180\n                    node = new Node(key, val);                                                                         // 181\n                    this.list.add(node);                                                                               // 182\n                    this.hash[key] = node;                                                                             // 183\n                    this.size++;                                                                                       // 184\n                }                                                                                                      // 185\n            },                                                                                                         // 186\n            get: function get(key) {                                                                                   // 187\n                var node = this.hash[key];                                                                             // 188\n                if (node) {                                                                                            // 189\n                    this.list.moveToFront(node);                                                                       // 190\n                    return node.val;                                                                                   // 191\n                }                                                                                                      // 192\n            },                                                                                                         // 193\n            reset: function reset() {                                                                                  // 194\n                this.size = 0;                                                                                         // 195\n                this.hash = {};                                                                                        // 196\n                this.list = new List();                                                                                // 197\n            }                                                                                                          // 198\n        });                                                                                                            // 199\n        function List() {                                                                                              // 200\n            this.head = this.tail = null;                                                                              // 201\n        }                                                                                                              // 202\n        _.mixin(List.prototype, {                                                                                      // 203\n            add: function add(node) {                                                                                  // 204\n                if (this.head) {                                                                                       // 205\n                    node.next = this.head;                                                                             // 206\n                    this.head.prev = node;                                                                             // 207\n                }                                                                                                      // 208\n                this.head = node;                                                                                      // 209\n                this.tail = this.tail || node;                                                                         // 210\n            },                                                                                                         // 211\n            remove: function remove(node) {                                                                            // 212\n                node.prev ? node.prev.next = node.next : this.head = node.next;                                        // 213\n                node.next ? node.next.prev = node.prev : this.tail = node.prev;                                        // 214\n            },                                                                                                         // 215\n            moveToFront: function(node) {                                                                              // 216\n                this.remove(node);                                                                                     // 217\n                this.add(node);                                                                                        // 218\n            }                                                                                                          // 219\n        });                                                                                                            // 220\n        function Node(key, val) {                                                                                      // 221\n            this.key = key;                                                                                            // 222\n            this.val = val;                                                                                            // 223\n            this.prev = this.next = null;                                                                              // 224\n        }                                                                                                              // 225\n        return LruCache;                                                                                               // 226\n    }();                                                                                                               // 227\n    var PersistentStorage = function() {                                                                               // 228\n        \"use strict\";                                                                                                  // 229\n        var ls, methods;                                                                                               // 230\n        try {                                                                                                          // 231\n            ls = window.localStorage;                                                                                  // 232\n            ls.setItem(\"~~~\", \"!\");                                                                                    // 233\n            ls.removeItem(\"~~~\");                                                                                      // 234\n        } catch (err) {                                                                                                // 235\n            ls = null;                                                                                                 // 236\n        }                                                                                                              // 237\n        function PersistentStorage(namespace) {                                                                        // 238\n            this.prefix = [ \"__\", namespace, \"__\" ].join(\"\");                                                          // 239\n            this.ttlKey = \"__ttl__\";                                                                                   // 240\n            this.keyMatcher = new RegExp(\"^\" + _.escapeRegExChars(this.prefix));                                       // 241\n        }                                                                                                              // 242\n        if (ls && window.JSON) {                                                                                       // 243\n            methods = {                                                                                                // 244\n                _prefix: function(key) {                                                                               // 245\n                    return this.prefix + key;                                                                          // 246\n                },                                                                                                     // 247\n                _ttlKey: function(key) {                                                                               // 248\n                    return this._prefix(key) + this.ttlKey;                                                            // 249\n                },                                                                                                     // 250\n                get: function(key) {                                                                                   // 251\n                    if (this.isExpired(key)) {                                                                         // 252\n                        this.remove(key);                                                                              // 253\n                    }                                                                                                  // 254\n                    return decode(ls.getItem(this._prefix(key)));                                                      // 255\n                },                                                                                                     // 256\n                set: function(key, val, ttl) {                                                                         // 257\n                    if (_.isNumber(ttl)) {                                                                             // 258\n                        ls.setItem(this._ttlKey(key), encode(now() + ttl));                                            // 259\n                    } else {                                                                                           // 260\n                        ls.removeItem(this._ttlKey(key));                                                              // 261\n                    }                                                                                                  // 262\n                    return ls.setItem(this._prefix(key), encode(val));                                                 // 263\n                },                                                                                                     // 264\n                remove: function(key) {                                                                                // 265\n                    ls.removeItem(this._ttlKey(key));                                                                  // 266\n                    ls.removeItem(this._prefix(key));                                                                  // 267\n                    return this;                                                                                       // 268\n                },                                                                                                     // 269\n                clear: function() {                                                                                    // 270\n                    var i, key, keys = [], len = ls.length;                                                            // 271\n                    for (i = 0; i < len; i++) {                                                                        // 272\n                        if ((key = ls.key(i)).match(this.keyMatcher)) {                                                // 273\n                            keys.push(key.replace(this.keyMatcher, \"\"));                                               // 274\n                        }                                                                                              // 275\n                    }                                                                                                  // 276\n                    for (i = keys.length; i--; ) {                                                                     // 277\n                        this.remove(keys[i]);                                                                          // 278\n                    }                                                                                                  // 279\n                    return this;                                                                                       // 280\n                },                                                                                                     // 281\n                isExpired: function(key) {                                                                             // 282\n                    var ttl = decode(ls.getItem(this._ttlKey(key)));                                                   // 283\n                    return _.isNumber(ttl) && now() > ttl ? true : false;                                              // 284\n                }                                                                                                      // 285\n            };                                                                                                         // 286\n        } else {                                                                                                       // 287\n            methods = {                                                                                                // 288\n                get: _.noop,                                                                                           // 289\n                set: _.noop,                                                                                           // 290\n                remove: _.noop,                                                                                        // 291\n                clear: _.noop,                                                                                         // 292\n                isExpired: _.noop                                                                                      // 293\n            };                                                                                                         // 294\n        }                                                                                                              // 295\n        _.mixin(PersistentStorage.prototype, methods);                                                                 // 296\n        return PersistentStorage;                                                                                      // 297\n        function now() {                                                                                               // 298\n            return new Date().getTime();                                                                               // 299\n        }                                                                                                              // 300\n        function encode(val) {                                                                                         // 301\n            return JSON.stringify(_.isUndefined(val) ? null : val);                                                    // 302\n        }                                                                                                              // 303\n        function decode(val) {                                                                                         // 304\n            return JSON.parse(val);                                                                                    // 305\n        }                                                                                                              // 306\n    }();                                                                                                               // 307\n    var Transport = function() {                                                                                       // 308\n        \"use strict\";                                                                                                  // 309\n        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);    // 310\n        function Transport(o) {                                                                                        // 311\n            o = o || {};                                                                                               // 312\n            this.cancelled = false;                                                                                    // 313\n            this.lastUrl = null;                                                                                       // 314\n            this._send = o.transport ? callbackToDeferred(o.transport) : $.ajax;                                       // 315\n            this._get = o.rateLimiter ? o.rateLimiter(this._get) : this._get;                                          // 316\n            this._cache = o.cache === false ? new LruCache(0) : sharedCache;                                           // 317\n        }                                                                                                              // 318\n        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {                                        // 319\n            maxPendingRequests = num;                                                                                  // 320\n        };                                                                                                             // 321\n        Transport.resetCache = function resetCache() {                                                                 // 322\n            sharedCache.reset();                                                                                       // 323\n        };                                                                                                             // 324\n        _.mixin(Transport.prototype, {                                                                                 // 325\n            _get: function(url, o, cb) {                                                                               // 326\n                var that = this, jqXhr;                                                                                // 327\n                if (this.cancelled || url !== this.lastUrl) {                                                          // 328\n                    return;                                                                                            // 329\n                }                                                                                                      // 330\n                if (jqXhr = pendingRequests[url]) {                                                                    // 331\n                    jqXhr.done(done).fail(fail);                                                                       // 332\n                } else if (pendingRequestsCount < maxPendingRequests) {                                                // 333\n                    pendingRequestsCount++;                                                                            // 334\n                    pendingRequests[url] = this._send(url, o).done(done).fail(fail).always(always);                    // 335\n                } else {                                                                                               // 336\n                    this.onDeckRequestArgs = [].slice.call(arguments, 0);                                              // 337\n                }                                                                                                      // 338\n                function done(resp) {                                                                                  // 339\n                    cb && cb(null, resp);                                                                              // 340\n                    that._cache.set(url, resp);                                                                        // 341\n                }                                                                                                      // 342\n                function fail() {                                                                                      // 343\n                    cb && cb(true);                                                                                    // 344\n                }                                                                                                      // 345\n                function always() {                                                                                    // 346\n                    pendingRequestsCount--;                                                                            // 347\n                    delete pendingRequests[url];                                                                       // 348\n                    if (that.onDeckRequestArgs) {                                                                      // 349\n                        that._get.apply(that, that.onDeckRequestArgs);                                                 // 350\n                        that.onDeckRequestArgs = null;                                                                 // 351\n                    }                                                                                                  // 352\n                }                                                                                                      // 353\n            },                                                                                                         // 354\n            get: function(url, o, cb) {                                                                                // 355\n                var resp;                                                                                              // 356\n                if (_.isFunction(o)) {                                                                                 // 357\n                    cb = o;                                                                                            // 358\n                    o = {};                                                                                            // 359\n                }                                                                                                      // 360\n                this.cancelled = false;                                                                                // 361\n                this.lastUrl = url;                                                                                    // 362\n                if (resp = this._cache.get(url)) {                                                                     // 363\n                    _.defer(function() {                                                                               // 364\n                        cb && cb(null, resp);                                                                          // 365\n                    });                                                                                                // 366\n                } else {                                                                                               // 367\n                    this._get(url, o, cb);                                                                             // 368\n                }                                                                                                      // 369\n                return !!resp;                                                                                         // 370\n            },                                                                                                         // 371\n            cancel: function() {                                                                                       // 372\n                this.cancelled = true;                                                                                 // 373\n            }                                                                                                          // 374\n        });                                                                                                            // 375\n        return Transport;                                                                                              // 376\n        function callbackToDeferred(fn) {                                                                              // 377\n            return function customSendWrapper(url, o) {                                                                // 378\n                var deferred = $.Deferred();                                                                           // 379\n                fn(url, o, onSuccess, onError);                                                                        // 380\n                return deferred;                                                                                       // 381\n                function onSuccess(resp) {                                                                             // 382\n                    _.defer(function() {                                                                               // 383\n                        deferred.resolve(resp);                                                                        // 384\n                    });                                                                                                // 385\n                }                                                                                                      // 386\n                function onError(err) {                                                                                // 387\n                    _.defer(function() {                                                                               // 388\n                        deferred.reject(err);                                                                          // 389\n                    });                                                                                                // 390\n                }                                                                                                      // 391\n            };                                                                                                         // 392\n        }                                                                                                              // 393\n    }();                                                                                                               // 394\n    var SearchIndex = function() {                                                                                     // 395\n        \"use strict\";                                                                                                  // 396\n        function SearchIndex(o) {                                                                                      // 397\n            o = o || {};                                                                                               // 398\n            if (!o.datumTokenizer || !o.queryTokenizer) {                                                              // 399\n                $.error(\"datumTokenizer and queryTokenizer are both required\");                                        // 400\n            }                                                                                                          // 401\n            this.datumTokenizer = o.datumTokenizer;                                                                    // 402\n            this.queryTokenizer = o.queryTokenizer;                                                                    // 403\n            this.reset();                                                                                              // 404\n        }                                                                                                              // 405\n        _.mixin(SearchIndex.prototype, {                                                                               // 406\n            bootstrap: function bootstrap(o) {                                                                         // 407\n                this.datums = o.datums;                                                                                // 408\n                this.trie = o.trie;                                                                                    // 409\n            },                                                                                                         // 410\n            add: function(data) {                                                                                      // 411\n                var that = this;                                                                                       // 412\n                data = _.isArray(data) ? data : [ data ];                                                              // 413\n                _.each(data, function(datum) {                                                                         // 414\n                    var id, tokens;                                                                                    // 415\n                    id = that.datums.push(datum) - 1;                                                                  // 416\n                    tokens = normalizeTokens(that.datumTokenizer(datum));                                              // 417\n                    _.each(tokens, function(token) {                                                                   // 418\n                        var node, chars, ch;                                                                           // 419\n                        node = that.trie;                                                                              // 420\n                        chars = token.split(\"\");                                                                       // 421\n                        while (ch = chars.shift()) {                                                                   // 422\n                            node = node.children[ch] || (node.children[ch] = newNode());                               // 423\n                            node.ids.push(id);                                                                         // 424\n                        }                                                                                              // 425\n                    });                                                                                                // 426\n                });                                                                                                    // 427\n            },                                                                                                         // 428\n            get: function get(query) {                                                                                 // 429\n                var that = this, tokens, matches;                                                                      // 430\n                tokens = normalizeTokens(this.queryTokenizer(query));                                                  // 431\n                _.each(tokens, function(token) {                                                                       // 432\n                    var node, chars, ch, ids;                                                                          // 433\n                    if (matches && matches.length === 0) {                                                             // 434\n                        return false;                                                                                  // 435\n                    }                                                                                                  // 436\n                    node = that.trie;                                                                                  // 437\n                    chars = token.split(\"\");                                                                           // 438\n                    while (node && (ch = chars.shift())) {                                                             // 439\n                        node = node.children[ch];                                                                      // 440\n                    }                                                                                                  // 441\n                    if (node && chars.length === 0) {                                                                  // 442\n                        ids = node.ids.slice(0);                                                                       // 443\n                        matches = matches ? getIntersection(matches, ids) : ids;                                       // 444\n                    } else {                                                                                           // 445\n                        matches = [];                                                                                  // 446\n                        return false;                                                                                  // 447\n                    }                                                                                                  // 448\n                });                                                                                                    // 449\n                return matches ? _.map(unique(matches), function(id) {                                                 // 450\n                    return that.datums[id];                                                                            // 451\n                }) : [];                                                                                               // 452\n            },                                                                                                         // 453\n            reset: function reset() {                                                                                  // 454\n                this.datums = [];                                                                                      // 455\n                this.trie = newNode();                                                                                 // 456\n            },                                                                                                         // 457\n            serialize: function serialize() {                                                                          // 458\n                return {                                                                                               // 459\n                    datums: this.datums,                                                                               // 460\n                    trie: this.trie                                                                                    // 461\n                };                                                                                                     // 462\n            }                                                                                                          // 463\n        });                                                                                                            // 464\n        return SearchIndex;                                                                                            // 465\n        function normalizeTokens(tokens) {                                                                             // 466\n            tokens = _.filter(tokens, function(token) {                                                                // 467\n                return !!token;                                                                                        // 468\n            });                                                                                                        // 469\n            tokens = _.map(tokens, function(token) {                                                                   // 470\n                return token.toLowerCase();                                                                            // 471\n            });                                                                                                        // 472\n            return tokens;                                                                                             // 473\n        }                                                                                                              // 474\n        function newNode() {                                                                                           // 475\n            return {                                                                                                   // 476\n                ids: [],                                                                                               // 477\n                children: {}                                                                                           // 478\n            };                                                                                                         // 479\n        }                                                                                                              // 480\n        function unique(array) {                                                                                       // 481\n            var seen = {}, uniques = [];                                                                               // 482\n            for (var i = 0, len = array.length; i < len; i++) {                                                        // 483\n                if (!seen[array[i]]) {                                                                                 // 484\n                    seen[array[i]] = true;                                                                             // 485\n                    uniques.push(array[i]);                                                                            // 486\n                }                                                                                                      // 487\n            }                                                                                                          // 488\n            return uniques;                                                                                            // 489\n        }                                                                                                              // 490\n        function getIntersection(arrayA, arrayB) {                                                                     // 491\n            var ai = 0, bi = 0, intersection = [];                                                                     // 492\n            arrayA = arrayA.sort(compare);                                                                             // 493\n            arrayB = arrayB.sort(compare);                                                                             // 494\n            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;                                                  // 495\n            while (ai < lenArrayA && bi < lenArrayB) {                                                                 // 496\n                if (arrayA[ai] < arrayB[bi]) {                                                                         // 497\n                    ai++;                                                                                              // 498\n                } else if (arrayA[ai] > arrayB[bi]) {                                                                  // 499\n                    bi++;                                                                                              // 500\n                } else {                                                                                               // 501\n                    intersection.push(arrayA[ai]);                                                                     // 502\n                    ai++;                                                                                              // 503\n                    bi++;                                                                                              // 504\n                }                                                                                                      // 505\n            }                                                                                                          // 506\n            return intersection;                                                                                       // 507\n            function compare(a, b) {                                                                                   // 508\n                return a - b;                                                                                          // 509\n            }                                                                                                          // 510\n        }                                                                                                              // 511\n    }();                                                                                                               // 512\n    var oParser = function() {                                                                                         // 513\n        \"use strict\";                                                                                                  // 514\n        return {                                                                                                       // 515\n            local: getLocal,                                                                                           // 516\n            prefetch: getPrefetch,                                                                                     // 517\n            remote: getRemote                                                                                          // 518\n        };                                                                                                             // 519\n        function getLocal(o) {                                                                                         // 520\n            return o.local || null;                                                                                    // 521\n        }                                                                                                              // 522\n        function getPrefetch(o) {                                                                                      // 523\n            var prefetch, defaults;                                                                                    // 524\n            defaults = {                                                                                               // 525\n                url: null,                                                                                             // 526\n                thumbprint: \"\",                                                                                        // 527\n                ttl: 24 * 60 * 60 * 1e3,                                                                               // 528\n                filter: null,                                                                                          // 529\n                ajax: {}                                                                                               // 530\n            };                                                                                                         // 531\n            if (prefetch = o.prefetch || null) {                                                                       // 532\n                prefetch = _.isString(prefetch) ? {                                                                    // 533\n                    url: prefetch                                                                                      // 534\n                } : prefetch;                                                                                          // 535\n                prefetch = _.mixin(defaults, prefetch);                                                                // 536\n                prefetch.thumbprint = VERSION + prefetch.thumbprint;                                                   // 537\n                prefetch.ajax.type = prefetch.ajax.type || \"GET\";                                                      // 538\n                prefetch.ajax.dataType = prefetch.ajax.dataType || \"json\";                                             // 539\n                !prefetch.url && $.error(\"prefetch requires url to be set\");                                           // 540\n            }                                                                                                          // 541\n            return prefetch;                                                                                           // 542\n        }                                                                                                              // 543\n        function getRemote(o) {                                                                                        // 544\n            var remote, defaults;                                                                                      // 545\n            defaults = {                                                                                               // 546\n                url: null,                                                                                             // 547\n                cache: true,                                                                                           // 548\n                wildcard: \"%QUERY\",                                                                                    // 549\n                replace: null,                                                                                         // 550\n                rateLimitBy: \"debounce\",                                                                               // 551\n                rateLimitWait: 300,                                                                                    // 552\n                send: null,                                                                                            // 553\n                filter: null,                                                                                          // 554\n                ajax: {}                                                                                               // 555\n            };                                                                                                         // 556\n            if (remote = o.remote || null) {                                                                           // 557\n                remote = _.isString(remote) ? {                                                                        // 558\n                    url: remote                                                                                        // 559\n                } : remote;                                                                                            // 560\n                remote = _.mixin(defaults, remote);                                                                    // 561\n                remote.rateLimiter = /^throttle$/i.test(remote.rateLimitBy) ? byThrottle(remote.rateLimitWait) : byDebounce(remote.rateLimitWait);\n                remote.ajax.type = remote.ajax.type || \"GET\";                                                          // 563\n                remote.ajax.dataType = remote.ajax.dataType || \"json\";                                                 // 564\n                delete remote.rateLimitBy;                                                                             // 565\n                delete remote.rateLimitWait;                                                                           // 566\n                !remote.url && $.error(\"remote requires url to be set\");                                               // 567\n            }                                                                                                          // 568\n            return remote;                                                                                             // 569\n            function byDebounce(wait) {                                                                                // 570\n                return function(fn) {                                                                                  // 571\n                    return _.debounce(fn, wait);                                                                       // 572\n                };                                                                                                     // 573\n            }                                                                                                          // 574\n            function byThrottle(wait) {                                                                                // 575\n                return function(fn) {                                                                                  // 576\n                    return _.throttle(fn, wait);                                                                       // 577\n                };                                                                                                     // 578\n            }                                                                                                          // 579\n        }                                                                                                              // 580\n    }();                                                                                                               // 581\n    (function(root) {                                                                                                  // 582\n        \"use strict\";                                                                                                  // 583\n        var old, keys;                                                                                                 // 584\n        old = root.Bloodhound;                                                                                         // 585\n        keys = {                                                                                                       // 586\n            data: \"data\",                                                                                              // 587\n            protocol: \"protocol\",                                                                                      // 588\n            thumbprint: \"thumbprint\"                                                                                   // 589\n        };                                                                                                             // 590\n        root.Bloodhound = Bloodhound;                                                                                  // 591\n        function Bloodhound(o) {                                                                                       // 592\n            if (!o || !o.local && !o.prefetch && !o.remote) {                                                          // 593\n                $.error(\"one of local, prefetch, or remote is required\");                                              // 594\n            }                                                                                                          // 595\n            this.limit = o.limit || 5;                                                                                 // 596\n            this.sorter = getSorter(o.sorter);                                                                         // 597\n            this.dupDetector = o.dupDetector || ignoreDuplicates;                                                      // 598\n            this.local = oParser.local(o);                                                                             // 599\n            this.prefetch = oParser.prefetch(o);                                                                       // 600\n            this.remote = oParser.remote(o);                                                                           // 601\n            this.cacheKey = this.prefetch ? this.prefetch.cacheKey || this.prefetch.url : null;                        // 602\n            this.index = new SearchIndex({                                                                             // 603\n                datumTokenizer: o.datumTokenizer,                                                                      // 604\n                queryTokenizer: o.queryTokenizer                                                                       // 605\n            });                                                                                                        // 606\n            this.storage = this.cacheKey ? new PersistentStorage(this.cacheKey) : null;                                // 607\n        }                                                                                                              // 608\n        Bloodhound.noConflict = function noConflict() {                                                                // 609\n            root.Bloodhound = old;                                                                                     // 610\n            return Bloodhound;                                                                                         // 611\n        };                                                                                                             // 612\n        Bloodhound.tokenizers = tokenizers;                                                                            // 613\n        _.mixin(Bloodhound.prototype, {                                                                                // 614\n            _loadPrefetch: function loadPrefetch(o) {                                                                  // 615\n                var that = this, serialized, deferred;                                                                 // 616\n                if (serialized = this._readFromStorage(o.thumbprint)) {                                                // 617\n                    this.index.bootstrap(serialized);                                                                  // 618\n                    deferred = $.Deferred().resolve();                                                                 // 619\n                } else {                                                                                               // 620\n                    deferred = $.ajax(o.url, o.ajax).done(handlePrefetchResponse);                                     // 621\n                }                                                                                                      // 622\n                return deferred;                                                                                       // 623\n                function handlePrefetchResponse(resp) {                                                                // 624\n                    that.clear();                                                                                      // 625\n                    that.add(o.filter ? o.filter(resp) : resp);                                                        // 626\n                    that._saveToStorage(that.index.serialize(), o.thumbprint, o.ttl);                                  // 627\n                }                                                                                                      // 628\n            },                                                                                                         // 629\n            _getFromRemote: function getFromRemote(query, cb) {                                                        // 630\n                var that = this, url, uriEncodedQuery;                                                                 // 631\n                if (!this.transport) {                                                                                 // 632\n                    return;                                                                                            // 633\n                }                                                                                                      // 634\n                query = query || \"\";                                                                                   // 635\n                uriEncodedQuery = encodeURIComponent(query);                                                           // 636\n                url = this.remote.replace ? this.remote.replace(this.remote.url, query) : this.remote.url.replace(this.remote.wildcard, uriEncodedQuery);\n                return this.transport.get(url, this.remote.ajax, handleRemoteResponse);                                // 638\n                function handleRemoteResponse(err, resp) {                                                             // 639\n                    err ? cb([]) : cb(that.remote.filter ? that.remote.filter(resp) : resp);                           // 640\n                }                                                                                                      // 641\n            },                                                                                                         // 642\n            _cancelLastRemoteRequest: function cancelLastRemoteRequest() {                                             // 643\n                this.transport && this.transport.cancel();                                                             // 644\n            },                                                                                                         // 645\n            _saveToStorage: function saveToStorage(data, thumbprint, ttl) {                                            // 646\n                if (this.storage) {                                                                                    // 647\n                    this.storage.set(keys.data, data, ttl);                                                            // 648\n                    this.storage.set(keys.protocol, location.protocol, ttl);                                           // 649\n                    this.storage.set(keys.thumbprint, thumbprint, ttl);                                                // 650\n                }                                                                                                      // 651\n            },                                                                                                         // 652\n            _readFromStorage: function readFromStorage(thumbprint) {                                                   // 653\n                var stored = {}, isExpired;                                                                            // 654\n                if (this.storage) {                                                                                    // 655\n                    stored.data = this.storage.get(keys.data);                                                         // 656\n                    stored.protocol = this.storage.get(keys.protocol);                                                 // 657\n                    stored.thumbprint = this.storage.get(keys.thumbprint);                                             // 658\n                }                                                                                                      // 659\n                isExpired = stored.thumbprint !== thumbprint || stored.protocol !== location.protocol;                 // 660\n                return stored.data && !isExpired ? stored.data : null;                                                 // 661\n            },                                                                                                         // 662\n            _initialize: function initialize() {                                                                       // 663\n                var that = this, local = this.local, deferred;                                                         // 664\n                deferred = this.prefetch ? this._loadPrefetch(this.prefetch) : $.Deferred().resolve();                 // 665\n                local && deferred.done(addLocalToIndex);                                                               // 666\n                this.transport = this.remote ? new Transport(this.remote) : null;                                      // 667\n                return this.initPromise = deferred.promise();                                                          // 668\n                function addLocalToIndex() {                                                                           // 669\n                    that.add(_.isFunction(local) ? local() : local);                                                   // 670\n                }                                                                                                      // 671\n            },                                                                                                         // 672\n            initialize: function initialize(force) {                                                                   // 673\n                return !this.initPromise || force ? this._initialize() : this.initPromise;                             // 674\n            },                                                                                                         // 675\n            add: function add(data) {                                                                                  // 676\n                this.index.add(data);                                                                                  // 677\n            },                                                                                                         // 678\n            get: function get(query, cb) {                                                                             // 679\n                var that = this, matches = [], cacheHit = false;                                                       // 680\n                matches = this.index.get(query);                                                                       // 681\n                matches = this.sorter(matches).slice(0, this.limit);                                                   // 682\n                matches.length < this.limit ? cacheHit = this._getFromRemote(query, returnRemoteMatches) : this._cancelLastRemoteRequest();\n                if (!cacheHit) {                                                                                       // 684\n                    (matches.length > 0 || !this.transport) && cb && cb(matches);                                      // 685\n                }                                                                                                      // 686\n                function returnRemoteMatches(remoteMatches) {                                                          // 687\n                    var matchesWithBackfill = matches.slice(0);                                                        // 688\n                    _.each(remoteMatches, function(remoteMatch) {                                                      // 689\n                        var isDuplicate;                                                                               // 690\n                        isDuplicate = _.some(matchesWithBackfill, function(match) {                                    // 691\n                            return that.dupDetector(remoteMatch, match);                                               // 692\n                        });                                                                                            // 693\n                        !isDuplicate && matchesWithBackfill.push(remoteMatch);                                         // 694\n                        return matchesWithBackfill.length < that.limit;                                                // 695\n                    });                                                                                                // 696\n                    cb && cb(that.sorter(matchesWithBackfill));                                                        // 697\n                }                                                                                                      // 698\n            },                                                                                                         // 699\n            clear: function clear() {                                                                                  // 700\n                this.index.reset();                                                                                    // 701\n            },                                                                                                         // 702\n            clearPrefetchCache: function clearPrefetchCache() {                                                        // 703\n                this.storage && this.storage.clear();                                                                  // 704\n            },                                                                                                         // 705\n            clearRemoteCache: function clearRemoteCache() {                                                            // 706\n                this.transport && Transport.resetCache();                                                              // 707\n            },                                                                                                         // 708\n            ttAdapter: function ttAdapter() {                                                                          // 709\n                return _.bind(this.get, this);                                                                         // 710\n            }                                                                                                          // 711\n        });                                                                                                            // 712\n        return Bloodhound;                                                                                             // 713\n        function getSorter(sortFn) {                                                                                   // 714\n            return _.isFunction(sortFn) ? sort : noSort;                                                               // 715\n            function sort(array) {                                                                                     // 716\n                return array.sort(sortFn);                                                                             // 717\n            }                                                                                                          // 718\n            function noSort(array) {                                                                                   // 719\n                return array;                                                                                          // 720\n            }                                                                                                          // 721\n        }                                                                                                              // 722\n        function ignoreDuplicates() {                                                                                  // 723\n            return false;                                                                                              // 724\n        }                                                                                                              // 725\n    })(this);                                                                                                          // 726\n    var html = function() {                                                                                            // 727\n        return {                                                                                                       // 728\n            wrapper: '<span class=\"twitter-typeahead\"></span>',                                                        // 729\n            dropdown: '<span class=\"tt-dropdown-menu\"></span>',                                                        // 730\n            dataset: '<div class=\"tt-dataset-%CLASS%\"></div>',                                                         // 731\n            suggestions: '<span class=\"tt-suggestions\"></span>',                                                       // 732\n            suggestion: '<div class=\"tt-suggestion\"></div>'                                                            // 733\n        };                                                                                                             // 734\n    }();                                                                                                               // 735\n    var css = function() {                                                                                             // 736\n        \"use strict\";                                                                                                  // 737\n        var css = {                                                                                                    // 738\n            wrapper: {                                                                                                 // 739\n                position: \"relative\",                                                                                  // 740\n                display: \"inline-block\"                                                                                // 741\n            },                                                                                                         // 742\n            hint: {                                                                                                    // 743\n                position: \"absolute\",                                                                                  // 744\n                top: \"0\",                                                                                              // 745\n                left: \"0\",                                                                                             // 746\n                borderColor: \"transparent\",                                                                            // 747\n                boxShadow: \"none\",                                                                                     // 748\n                opacity: \"1\"                                                                                           // 749\n            },                                                                                                         // 750\n            input: {                                                                                                   // 751\n                position: \"relative\",                                                                                  // 752\n                verticalAlign: \"top\",                                                                                  // 753\n                backgroundColor: \"transparent\"                                                                         // 754\n            },                                                                                                         // 755\n            inputWithNoHint: {                                                                                         // 756\n                position: \"relative\",                                                                                  // 757\n                verticalAlign: \"top\"                                                                                   // 758\n            },                                                                                                         // 759\n            dropdown: {                                                                                                // 760\n                position: \"absolute\",                                                                                  // 761\n                top: \"100%\",                                                                                           // 762\n                left: \"0\",                                                                                             // 763\n                zIndex: \"100\",                                                                                         // 764\n                display: \"none\"                                                                                        // 765\n            },                                                                                                         // 766\n            suggestions: {                                                                                             // 767\n                display: \"block\"                                                                                       // 768\n            },                                                                                                         // 769\n            suggestion: {                                                                                              // 770\n                whiteSpace: \"nowrap\",                                                                                  // 771\n                cursor: \"pointer\"                                                                                      // 772\n            },                                                                                                         // 773\n            suggestionChild: {                                                                                         // 774\n                whiteSpace: \"normal\"                                                                                   // 775\n            },                                                                                                         // 776\n            ltr: {                                                                                                     // 777\n                left: \"0\",                                                                                             // 778\n                right: \"auto\"                                                                                          // 779\n            },                                                                                                         // 780\n            rtl: {                                                                                                     // 781\n                left: \"auto\",                                                                                          // 782\n                right: \" 0\"                                                                                            // 783\n            }                                                                                                          // 784\n        };                                                                                                             // 785\n        if (_.isMsie()) {                                                                                              // 786\n            _.mixin(css.input, {                                                                                       // 787\n                backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\" // 788\n            });                                                                                                        // 789\n        }                                                                                                              // 790\n        if (_.isMsie() && _.isMsie() <= 7) {                                                                           // 791\n            _.mixin(css.input, {                                                                                       // 792\n                marginTop: \"-1px\"                                                                                      // 793\n            });                                                                                                        // 794\n        }                                                                                                              // 795\n        return css;                                                                                                    // 796\n    }();                                                                                                               // 797\n    var EventBus = function() {                                                                                        // 798\n        \"use strict\";                                                                                                  // 799\n        var namespace = \"typeahead:\";                                                                                  // 800\n        function EventBus(o) {                                                                                         // 801\n            if (!o || !o.el) {                                                                                         // 802\n                $.error(\"EventBus initialized without el\");                                                            // 803\n            }                                                                                                          // 804\n            this.$el = $(o.el);                                                                                        // 805\n        }                                                                                                              // 806\n        _.mixin(EventBus.prototype, {                                                                                  // 807\n            trigger: function(type) {                                                                                  // 808\n                var args = [].slice.call(arguments, 1);                                                                // 809\n                this.$el.trigger(namespace + type, args);                                                              // 810\n            }                                                                                                          // 811\n        });                                                                                                            // 812\n        return EventBus;                                                                                               // 813\n    }();                                                                                                               // 814\n    var EventEmitter = function() {                                                                                    // 815\n        \"use strict\";                                                                                                  // 816\n        var splitter = /\\s+/, nextTick = getNextTick();                                                                // 817\n        return {                                                                                                       // 818\n            onSync: onSync,                                                                                            // 819\n            onAsync: onAsync,                                                                                          // 820\n            off: off,                                                                                                  // 821\n            trigger: trigger                                                                                           // 822\n        };                                                                                                             // 823\n        function on(method, types, cb, context) {                                                                      // 824\n            var type;                                                                                                  // 825\n            if (!cb) {                                                                                                 // 826\n                return this;                                                                                           // 827\n            }                                                                                                          // 828\n            types = types.split(splitter);                                                                             // 829\n            cb = context ? bindContext(cb, context) : cb;                                                              // 830\n            this._callbacks = this._callbacks || {};                                                                   // 831\n            while (type = types.shift()) {                                                                             // 832\n                this._callbacks[type] = this._callbacks[type] || {                                                     // 833\n                    sync: [],                                                                                          // 834\n                    async: []                                                                                          // 835\n                };                                                                                                     // 836\n                this._callbacks[type][method].push(cb);                                                                // 837\n            }                                                                                                          // 838\n            return this;                                                                                               // 839\n        }                                                                                                              // 840\n        function onAsync(types, cb, context) {                                                                         // 841\n            return on.call(this, \"async\", types, cb, context);                                                         // 842\n        }                                                                                                              // 843\n        function onSync(types, cb, context) {                                                                          // 844\n            return on.call(this, \"sync\", types, cb, context);                                                          // 845\n        }                                                                                                              // 846\n        function off(types) {                                                                                          // 847\n            var type;                                                                                                  // 848\n            if (!this._callbacks) {                                                                                    // 849\n                return this;                                                                                           // 850\n            }                                                                                                          // 851\n            types = types.split(splitter);                                                                             // 852\n            while (type = types.shift()) {                                                                             // 853\n                delete this._callbacks[type];                                                                          // 854\n            }                                                                                                          // 855\n            return this;                                                                                               // 856\n        }                                                                                                              // 857\n        function trigger(types) {                                                                                      // 858\n            var type, callbacks, args, syncFlush, asyncFlush;                                                          // 859\n            if (!this._callbacks) {                                                                                    // 860\n                return this;                                                                                           // 861\n            }                                                                                                          // 862\n            types = types.split(splitter);                                                                             // 863\n            args = [].slice.call(arguments, 1);                                                                        // 864\n            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {                                    // 865\n                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));                                     // 866\n                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));                                   // 867\n                syncFlush() && nextTick(asyncFlush);                                                                   // 868\n            }                                                                                                          // 869\n            return this;                                                                                               // 870\n        }                                                                                                              // 871\n        function getFlush(callbacks, context, args) {                                                                  // 872\n            return flush;                                                                                              // 873\n            function flush() {                                                                                         // 874\n                var cancelled;                                                                                         // 875\n                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {                               // 876\n                    cancelled = callbacks[i].apply(context, args) === false;                                           // 877\n                }                                                                                                      // 878\n                return !cancelled;                                                                                     // 879\n            }                                                                                                          // 880\n        }                                                                                                              // 881\n        function getNextTick() {                                                                                       // 882\n            var nextTickFn;                                                                                            // 883\n            if (window.setImmediate) {                                                                                 // 884\n                nextTickFn = function nextTickSetImmediate(fn) {                                                       // 885\n                    setImmediate(function() {                                                                          // 886\n                        fn();                                                                                          // 887\n                    });                                                                                                // 888\n                };                                                                                                     // 889\n            } else {                                                                                                   // 890\n                nextTickFn = function nextTickSetTimeout(fn) {                                                         // 891\n                    setTimeout(function() {                                                                            // 892\n                        fn();                                                                                          // 893\n                    }, 0);                                                                                             // 894\n                };                                                                                                     // 895\n            }                                                                                                          // 896\n            return nextTickFn;                                                                                         // 897\n        }                                                                                                              // 898\n        function bindContext(fn, context) {                                                                            // 899\n            return fn.bind ? fn.bind(context) : function() {                                                           // 900\n                fn.apply(context, [].slice.call(arguments, 0));                                                        // 901\n            };                                                                                                         // 902\n        }                                                                                                              // 903\n    }();                                                                                                               // 904\n    var highlight = function(doc) {                                                                                    // 905\n        \"use strict\";                                                                                                  // 906\n        var defaults = {                                                                                               // 907\n            node: null,                                                                                                // 908\n            pattern: null,                                                                                             // 909\n            tagName: \"strong\",                                                                                         // 910\n            className: null,                                                                                           // 911\n            wordsOnly: false,                                                                                          // 912\n            caseSensitive: false                                                                                       // 913\n        };                                                                                                             // 914\n        return function hightlight(o) {                                                                                // 915\n            var regex;                                                                                                 // 916\n            o = _.mixin({}, defaults, o);                                                                              // 917\n            if (!o.node || !o.pattern) {                                                                               // 918\n                return;                                                                                                // 919\n            }                                                                                                          // 920\n            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];                                              // 921\n            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);                                                 // 922\n            traverse(o.node, hightlightTextNode);                                                                      // 923\n            function hightlightTextNode(textNode) {                                                                    // 924\n                var match, patternNode, wrapperNode;                                                                   // 925\n                if (match = regex.exec(textNode.data)) {                                                               // 926\n                    wrapperNode = doc.createElement(o.tagName);                                                        // 927\n                    o.className && (wrapperNode.className = o.className);                                              // 928\n                    patternNode = textNode.splitText(match.index);                                                     // 929\n                    patternNode.splitText(match[0].length);                                                            // 930\n                    wrapperNode.appendChild(patternNode.cloneNode(true));                                              // 931\n                    textNode.parentNode.replaceChild(wrapperNode, patternNode);                                        // 932\n                }                                                                                                      // 933\n                return !!match;                                                                                        // 934\n            }                                                                                                          // 935\n            function traverse(el, hightlightTextNode) {                                                                // 936\n                var childNode, TEXT_NODE_TYPE = 3;                                                                     // 937\n                for (var i = 0; i < el.childNodes.length; i++) {                                                       // 938\n                    childNode = el.childNodes[i];                                                                      // 939\n                    if (childNode.nodeType === TEXT_NODE_TYPE) {                                                       // 940\n                        i += hightlightTextNode(childNode) ? 1 : 0;                                                    // 941\n                    } else {                                                                                           // 942\n                        traverse(childNode, hightlightTextNode);                                                       // 943\n                    }                                                                                                  // 944\n                }                                                                                                      // 945\n            }                                                                                                          // 946\n        };                                                                                                             // 947\n        function getRegex(patterns, caseSensitive, wordsOnly) {                                                        // 948\n            var escapedPatterns = [], regexStr;                                                                        // 949\n            for (var i = 0, len = patterns.length; i < len; i++) {                                                     // 950\n                escapedPatterns.push(_.escapeRegExChars(patterns[i]));                                                 // 951\n            }                                                                                                          // 952\n            regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");                                   // 954\n        }                                                                                                              // 955\n    }(window.document);                                                                                                // 956\n    var Input = function() {                                                                                           // 957\n        \"use strict\";                                                                                                  // 958\n        var specialKeyCodeMap;                                                                                         // 959\n        specialKeyCodeMap = {                                                                                          // 960\n            9: \"tab\",                                                                                                  // 961\n            27: \"esc\",                                                                                                 // 962\n            37: \"left\",                                                                                                // 963\n            39: \"right\",                                                                                               // 964\n            13: \"enter\",                                                                                               // 965\n            38: \"up\",                                                                                                  // 966\n            40: \"down\"                                                                                                 // 967\n        };                                                                                                             // 968\n        function Input(o) {                                                                                            // 969\n            var that = this, onBlur, onFocus, onKeydown, onInput;                                                      // 970\n            o = o || {};                                                                                               // 971\n            if (!o.input) {                                                                                            // 972\n                $.error(\"input is missing\");                                                                           // 973\n            }                                                                                                          // 974\n            onBlur = _.bind(this._onBlur, this);                                                                       // 975\n            onFocus = _.bind(this._onFocus, this);                                                                     // 976\n            onKeydown = _.bind(this._onKeydown, this);                                                                 // 977\n            onInput = _.bind(this._onInput, this);                                                                     // 978\n            this.$hint = $(o.hint);                                                                                    // 979\n            this.$input = $(o.input).on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);        // 980\n            if (this.$hint.length === 0) {                                                                             // 981\n                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;                       // 982\n            }                                                                                                          // 983\n            if (!_.isMsie()) {                                                                                         // 984\n                this.$input.on(\"input.tt\", onInput);                                                                   // 985\n            } else {                                                                                                   // 986\n                this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function($e) {                                // 987\n                    if (specialKeyCodeMap[$e.which || $e.keyCode]) {                                                   // 988\n                        return;                                                                                        // 989\n                    }                                                                                                  // 990\n                    _.defer(_.bind(that._onInput, that, $e));                                                          // 991\n                });                                                                                                    // 992\n            }                                                                                                          // 993\n            this.query = this.$input.val();                                                                            // 994\n            this.$overflowHelper = buildOverflowHelper(this.$input);                                                   // 995\n        }                                                                                                              // 996\n        Input.normalizeQuery = function(str) {                                                                         // 997\n            return (str || \"\").replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");                                           // 998\n        };                                                                                                             // 999\n        _.mixin(Input.prototype, EventEmitter, {                                                                       // 1000\n            _onBlur: function onBlur() {                                                                               // 1001\n                this.resetInputValue();                                                                                // 1002\n                this.trigger(\"blurred\");                                                                               // 1003\n            },                                                                                                         // 1004\n            _onFocus: function onFocus() {                                                                             // 1005\n                this.trigger(\"focused\");                                                                               // 1006\n            },                                                                                                         // 1007\n            _onKeydown: function onKeydown($e) {                                                                       // 1008\n                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];                                               // 1009\n                this._managePreventDefault(keyName, $e);                                                               // 1010\n                if (keyName && this._shouldTrigger(keyName, $e)) {                                                     // 1011\n                    this.trigger(keyName + \"Keyed\", $e);                                                               // 1012\n                }                                                                                                      // 1013\n            },                                                                                                         // 1014\n            _onInput: function onInput() {                                                                             // 1015\n                this._checkInputValue();                                                                               // 1016\n            },                                                                                                         // 1017\n            _managePreventDefault: function managePreventDefault(keyName, $e) {                                        // 1018\n                var preventDefault, hintValue, inputValue;                                                             // 1019\n                switch (keyName) {                                                                                     // 1020\n                  case \"tab\":                                                                                          // 1021\n                    hintValue = this.getHint();                                                                        // 1022\n                    inputValue = this.getInputValue();                                                                 // 1023\n                    preventDefault = hintValue && hintValue !== inputValue && !withModifier($e);                       // 1024\n                    break;                                                                                             // 1025\n                                                                                                                       // 1026\n                  case \"up\":                                                                                           // 1027\n                  case \"down\":                                                                                         // 1028\n                    preventDefault = !withModifier($e);                                                                // 1029\n                    break;                                                                                             // 1030\n                                                                                                                       // 1031\n                  default:                                                                                             // 1032\n                    preventDefault = false;                                                                            // 1033\n                }                                                                                                      // 1034\n                preventDefault && $e.preventDefault();                                                                 // 1035\n            },                                                                                                         // 1036\n            _shouldTrigger: function shouldTrigger(keyName, $e) {                                                      // 1037\n                var trigger;                                                                                           // 1038\n                switch (keyName) {                                                                                     // 1039\n                  case \"tab\":                                                                                          // 1040\n                    trigger = !withModifier($e);                                                                       // 1041\n                    break;                                                                                             // 1042\n                                                                                                                       // 1043\n                  default:                                                                                             // 1044\n                    trigger = true;                                                                                    // 1045\n                }                                                                                                      // 1046\n                return trigger;                                                                                        // 1047\n            },                                                                                                         // 1048\n            _checkInputValue: function checkInputValue() {                                                             // 1049\n                var inputValue, areEquivalent, hasDifferentWhitespace;                                                 // 1050\n                inputValue = this.getInputValue();                                                                     // 1051\n                areEquivalent = areQueriesEquivalent(inputValue, this.query);                                          // 1052\n                hasDifferentWhitespace = areEquivalent ? this.query.length !== inputValue.length : false;              // 1053\n                this.query = inputValue;                                                                               // 1054\n                if (!areEquivalent) {                                                                                  // 1055\n                    this.trigger(\"queryChanged\", this.query);                                                          // 1056\n                } else if (hasDifferentWhitespace) {                                                                   // 1057\n                    this.trigger(\"whitespaceChanged\", this.query);                                                     // 1058\n                }                                                                                                      // 1059\n            },                                                                                                         // 1060\n            focus: function focus() {                                                                                  // 1061\n                this.$input.focus();                                                                                   // 1062\n            },                                                                                                         // 1063\n            blur: function blur() {                                                                                    // 1064\n                this.$input.blur();                                                                                    // 1065\n            },                                                                                                         // 1066\n            getQuery: function getQuery() {                                                                            // 1067\n                return this.query;                                                                                     // 1068\n            },                                                                                                         // 1069\n            setQuery: function setQuery(query) {                                                                       // 1070\n                this.query = query;                                                                                    // 1071\n            },                                                                                                         // 1072\n            getInputValue: function getInputValue() {                                                                  // 1073\n                return this.$input.val();                                                                              // 1074\n            },                                                                                                         // 1075\n            setInputValue: function setInputValue(value, silent) {                                                     // 1076\n                this.$input.val(value);                                                                                // 1077\n                silent ? this.clearHint() : this._checkInputValue();                                                   // 1078\n            },                                                                                                         // 1079\n            resetInputValue: function resetInputValue() {                                                              // 1080\n                this.setInputValue(this.query, true);                                                                  // 1081\n            },                                                                                                         // 1082\n            getHint: function getHint() {                                                                              // 1083\n                return this.$hint.val();                                                                               // 1084\n            },                                                                                                         // 1085\n            setHint: function setHint(value) {                                                                         // 1086\n                this.$hint.val(value);                                                                                 // 1087\n            },                                                                                                         // 1088\n            clearHint: function clearHint() {                                                                          // 1089\n                this.setHint(\"\");                                                                                      // 1090\n            },                                                                                                         // 1091\n            clearHintIfInvalid: function clearHintIfInvalid() {                                                        // 1092\n                var val, hint, valIsPrefixOfHint, isValid;                                                             // 1093\n                val = this.getInputValue();                                                                            // 1094\n                hint = this.getHint();                                                                                 // 1095\n                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;                                           // 1096\n                isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();                                      // 1097\n                !isValid && this.clearHint();                                                                          // 1098\n            },                                                                                                         // 1099\n            getLanguageDirection: function getLanguageDirection() {                                                    // 1100\n                return (this.$input.css(\"direction\") || \"ltr\").toLowerCase();                                          // 1101\n            },                                                                                                         // 1102\n            hasOverflow: function hasOverflow() {                                                                      // 1103\n                var constraint = this.$input.width() - 2;                                                              // 1104\n                this.$overflowHelper.text(this.getInputValue());                                                       // 1105\n                return this.$overflowHelper.width() >= constraint;                                                     // 1106\n            },                                                                                                         // 1107\n            isCursorAtEnd: function() {                                                                                // 1108\n                var valueLength, selectionStart, range;                                                                // 1109\n                valueLength = this.$input.val().length;                                                                // 1110\n                selectionStart = this.$input[0].selectionStart;                                                        // 1111\n                if (_.isNumber(selectionStart)) {                                                                      // 1112\n                    return selectionStart === valueLength;                                                             // 1113\n                } else if (document.selection) {                                                                       // 1114\n                    range = document.selection.createRange();                                                          // 1115\n                    range.moveStart(\"character\", -valueLength);                                                        // 1116\n                    return valueLength === range.text.length;                                                          // 1117\n                }                                                                                                      // 1118\n                return true;                                                                                           // 1119\n            },                                                                                                         // 1120\n            destroy: function destroy() {                                                                              // 1121\n                this.$hint.off(\".tt\");                                                                                 // 1122\n                this.$input.off(\".tt\");                                                                                // 1123\n                this.$hint = this.$input = this.$overflowHelper = null;                                                // 1124\n            }                                                                                                          // 1125\n        });                                                                                                            // 1126\n        return Input;                                                                                                  // 1127\n        function buildOverflowHelper($input) {                                                                         // 1128\n            return $('<pre aria-hidden=\"true\"></pre>').css({                                                           // 1129\n                position: \"absolute\",                                                                                  // 1130\n                visibility: \"hidden\",                                                                                  // 1131\n                whiteSpace: \"pre\",                                                                                     // 1132\n                fontFamily: $input.css(\"font-family\"),                                                                 // 1133\n                fontSize: $input.css(\"font-size\"),                                                                     // 1134\n                fontStyle: $input.css(\"font-style\"),                                                                   // 1135\n                fontVariant: $input.css(\"font-variant\"),                                                               // 1136\n                fontWeight: $input.css(\"font-weight\"),                                                                 // 1137\n                wordSpacing: $input.css(\"word-spacing\"),                                                               // 1138\n                letterSpacing: $input.css(\"letter-spacing\"),                                                           // 1139\n                textIndent: $input.css(\"text-indent\"),                                                                 // 1140\n                textRendering: $input.css(\"text-rendering\"),                                                           // 1141\n                textTransform: $input.css(\"text-transform\")                                                            // 1142\n            }).insertAfter($input);                                                                                    // 1143\n        }                                                                                                              // 1144\n        function areQueriesEquivalent(a, b) {                                                                          // 1145\n            return Input.normalizeQuery(a) === Input.normalizeQuery(b);                                                // 1146\n        }                                                                                                              // 1147\n        function withModifier($e) {                                                                                    // 1148\n            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;                                               // 1149\n        }                                                                                                              // 1150\n    }();                                                                                                               // 1151\n    var Dataset = function() {                                                                                         // 1152\n        \"use strict\";                                                                                                  // 1153\n        var datasetKey = \"ttDataset\", valueKey = \"ttValue\", datumKey = \"ttDatum\";                                      // 1154\n        function Dataset(o) {                                                                                          // 1155\n            o = o || {};                                                                                               // 1156\n            o.templates = o.templates || {};                                                                           // 1157\n            if (!o.source) {                                                                                           // 1158\n                $.error(\"missing source\");                                                                             // 1159\n            }                                                                                                          // 1160\n            if (o.name && !isValidName(o.name)) {                                                                      // 1161\n                $.error(\"invalid dataset name: \" + o.name);                                                            // 1162\n            }                                                                                                          // 1163\n            this.query = null;                                                                                         // 1164\n            this.highlight = !!o.highlight;                                                                            // 1165\n            this.name = o.name || _.getUniqueId();                                                                     // 1166\n            this.source = o.source;                                                                                    // 1167\n            this.displayFn = getDisplayFn(o.display || o.displayKey);                                                  // 1168\n            this.templates = getTemplates(o.templates, this.displayFn);                                                // 1169\n            this.$el = $(html.dataset.replace(\"%CLASS%\", this.name));                                                  // 1170\n        }                                                                                                              // 1171\n        Dataset.extractDatasetName = function extractDatasetName(el) {                                                 // 1172\n            return $(el).data(datasetKey);                                                                             // 1173\n        };                                                                                                             // 1174\n        Dataset.extractValue = function extractDatum(el) {                                                             // 1175\n            return $(el).data(valueKey);                                                                               // 1176\n        };                                                                                                             // 1177\n        Dataset.extractDatum = function extractDatum(el) {                                                             // 1178\n            return $(el).data(datumKey);                                                                               // 1179\n        };                                                                                                             // 1180\n        _.mixin(Dataset.prototype, EventEmitter, {                                                                     // 1181\n            _render: function render(query, suggestions) {                                                             // 1182\n                if (!this.$el) {                                                                                       // 1183\n                    return;                                                                                            // 1184\n                }                                                                                                      // 1185\n                var that = this, hasSuggestions;                                                                       // 1186\n                this.$el.empty();                                                                                      // 1187\n                hasSuggestions = suggestions && suggestions.length;                                                    // 1188\n                if (!hasSuggestions && this.templates.empty) {                                                         // 1189\n                    this.$el.html(getEmptyHtml()).prepend(that.templates.header ? getHeaderHtml() : null).append(that.templates.footer ? getFooterHtml() : null);\n                } else if (hasSuggestions) {                                                                           // 1191\n                    this.$el.html(getSuggestionsHtml()).prepend(that.templates.header ? getHeaderHtml() : null).append(that.templates.footer ? getFooterHtml() : null);\n                }                                                                                                      // 1193\n                this.trigger(\"rendered\");                                                                              // 1194\n                function getEmptyHtml() {                                                                              // 1195\n                    return that.templates.empty({                                                                      // 1196\n                        query: query,                                                                                  // 1197\n                        isEmpty: true                                                                                  // 1198\n                    });                                                                                                // 1199\n                }                                                                                                      // 1200\n                function getSuggestionsHtml() {                                                                        // 1201\n                    var $suggestions, nodes;                                                                           // 1202\n                    $suggestions = $(html.suggestions).css(css.suggestions);                                           // 1203\n                    nodes = _.map(suggestions, getSuggestionNode);                                                     // 1204\n                    $suggestions.append.apply($suggestions, nodes);                                                    // 1205\n                    that.highlight && highlight({                                                                      // 1206\n                        className: \"tt-highlight\",                                                                     // 1207\n                        node: $suggestions[0],                                                                         // 1208\n                        pattern: query                                                                                 // 1209\n                    });                                                                                                // 1210\n                    return $suggestions;                                                                               // 1211\n                    function getSuggestionNode(suggestion) {                                                           // 1212\n                        var $el;                                                                                       // 1213\n                        $el = $(html.suggestion).append(that.templates.suggestion(suggestion)).data(datasetKey, that.name).data(valueKey, that.displayFn(suggestion)).data(datumKey, suggestion);\n                        $el.children().each(function() {                                                               // 1215\n                            $(this).css(css.suggestionChild);                                                          // 1216\n                        });                                                                                            // 1217\n                        return $el;                                                                                    // 1218\n                    }                                                                                                  // 1219\n                }                                                                                                      // 1220\n                function getHeaderHtml() {                                                                             // 1221\n                    return that.templates.header({                                                                     // 1222\n                        query: query,                                                                                  // 1223\n                        isEmpty: !hasSuggestions                                                                       // 1224\n                    });                                                                                                // 1225\n                }                                                                                                      // 1226\n                function getFooterHtml() {                                                                             // 1227\n                    return that.templates.footer({                                                                     // 1228\n                        query: query,                                                                                  // 1229\n                        isEmpty: !hasSuggestions                                                                       // 1230\n                    });                                                                                                // 1231\n                }                                                                                                      // 1232\n            },                                                                                                         // 1233\n            getRoot: function getRoot() {                                                                              // 1234\n                return this.$el;                                                                                       // 1235\n            },                                                                                                         // 1236\n            update: function update(query) {                                                                           // 1237\n                var that = this;                                                                                       // 1238\n                this.query = query;                                                                                    // 1239\n                this.canceled = false;                                                                                 // 1240\n                this.source(query, render);                                                                            // 1241\n                function render(suggestions) {                                                                         // 1242\n                    if (!that.canceled && query === that.query) {                                                      // 1243\n                        that._render(query, suggestions);                                                              // 1244\n                    }                                                                                                  // 1245\n                }                                                                                                      // 1246\n            },                                                                                                         // 1247\n            cancel: function cancel() {                                                                                // 1248\n                this.canceled = true;                                                                                  // 1249\n            },                                                                                                         // 1250\n            clear: function clear() {                                                                                  // 1251\n                this.cancel();                                                                                         // 1252\n                this.$el.empty();                                                                                      // 1253\n                this.trigger(\"rendered\");                                                                              // 1254\n            },                                                                                                         // 1255\n            isEmpty: function isEmpty() {                                                                              // 1256\n                return this.$el.is(\":empty\");                                                                          // 1257\n            },                                                                                                         // 1258\n            destroy: function destroy() {                                                                              // 1259\n                this.$el = null;                                                                                       // 1260\n            }                                                                                                          // 1261\n        });                                                                                                            // 1262\n        return Dataset;                                                                                                // 1263\n        function getDisplayFn(display) {                                                                               // 1264\n            display = display || \"value\";                                                                              // 1265\n            return _.isFunction(display) ? display : displayFn;                                                        // 1266\n            function displayFn(obj) {                                                                                  // 1267\n                return obj[display];                                                                                   // 1268\n            }                                                                                                          // 1269\n        }                                                                                                              // 1270\n        function getTemplates(templates, displayFn) {                                                                  // 1271\n            return {                                                                                                   // 1272\n                empty: templates.empty && _.templatify(templates.empty),                                               // 1273\n                header: templates.header && _.templatify(templates.header),                                            // 1274\n                footer: templates.footer && _.templatify(templates.footer),                                            // 1275\n                suggestion: templates.suggestion || suggestionTemplate                                                 // 1276\n            };                                                                                                         // 1277\n            function suggestionTemplate(context) {                                                                     // 1278\n                return \"<p>\" + displayFn(context) + \"</p>\";                                                            // 1279\n            }                                                                                                          // 1280\n        }                                                                                                              // 1281\n        function isValidName(str) {                                                                                    // 1282\n            return /^[_a-zA-Z0-9-]+$/.test(str);                                                                       // 1283\n        }                                                                                                              // 1284\n    }();                                                                                                               // 1285\n    var Dropdown = function() {                                                                                        // 1286\n        \"use strict\";                                                                                                  // 1287\n        function Dropdown(o) {                                                                                         // 1288\n            var that = this, onSuggestionClick, onSuggestionMouseEnter, onSuggestionMouseLeave;                        // 1289\n            o = o || {};                                                                                               // 1290\n            if (!o.menu) {                                                                                             // 1291\n                $.error(\"menu is required\");                                                                           // 1292\n            }                                                                                                          // 1293\n            this.isOpen = false;                                                                                       // 1294\n            this.isEmpty = true;                                                                                       // 1295\n            this.datasets = _.map(o.datasets, initializeDataset);                                                      // 1296\n            onSuggestionClick = _.bind(this._onSuggestionClick, this);                                                 // 1297\n            onSuggestionMouseEnter = _.bind(this._onSuggestionMouseEnter, this);                                       // 1298\n            onSuggestionMouseLeave = _.bind(this._onSuggestionMouseLeave, this);                                       // 1299\n            this.$menu = $(o.menu).on(\"click.tt\", \".tt-suggestion\", onSuggestionClick).on(\"mouseenter.tt\", \".tt-suggestion\", onSuggestionMouseEnter).on(\"mouseleave.tt\", \".tt-suggestion\", onSuggestionMouseLeave);\n            _.each(this.datasets, function(dataset) {                                                                  // 1301\n                that.$menu.append(dataset.getRoot());                                                                  // 1302\n                dataset.onSync(\"rendered\", that._onRendered, that);                                                    // 1303\n            });                                                                                                        // 1304\n        }                                                                                                              // 1305\n        _.mixin(Dropdown.prototype, EventEmitter, {                                                                    // 1306\n            _onSuggestionClick: function onSuggestionClick($e) {                                                       // 1307\n                this.trigger(\"suggestionClicked\", $($e.currentTarget));                                                // 1308\n            },                                                                                                         // 1309\n            _onSuggestionMouseEnter: function onSuggestionMouseEnter($e) {                                             // 1310\n                this._removeCursor();                                                                                  // 1311\n                this._setCursor($($e.currentTarget), true);                                                            // 1312\n            },                                                                                                         // 1313\n            _onSuggestionMouseLeave: function onSuggestionMouseLeave() {                                               // 1314\n                this._removeCursor();                                                                                  // 1315\n            },                                                                                                         // 1316\n            _onRendered: function onRendered() {                                                                       // 1317\n                this.isEmpty = _.every(this.datasets, isDatasetEmpty);                                                 // 1318\n                this.isEmpty ? this._hide() : this.isOpen && this._show();                                             // 1319\n                this.trigger(\"datasetRendered\");                                                                       // 1320\n                function isDatasetEmpty(dataset) {                                                                     // 1321\n                    return dataset.isEmpty();                                                                          // 1322\n                }                                                                                                      // 1323\n            },                                                                                                         // 1324\n            _hide: function() {                                                                                        // 1325\n                this.$menu.hide();                                                                                     // 1326\n            },                                                                                                         // 1327\n            _show: function() {                                                                                        // 1328\n                this.$menu.css(\"display\", \"block\");                                                                    // 1329\n            },                                                                                                         // 1330\n            _getSuggestions: function getSuggestions() {                                                               // 1331\n                return this.$menu.find(\".tt-suggestion\");                                                              // 1332\n            },                                                                                                         // 1333\n            _getCursor: function getCursor() {                                                                         // 1334\n                return this.$menu.find(\".tt-cursor\").first();                                                          // 1335\n            },                                                                                                         // 1336\n            _setCursor: function setCursor($el, silent) {                                                              // 1337\n                $el.first().addClass(\"tt-cursor\");                                                                     // 1338\n                !silent && this.trigger(\"cursorMoved\");                                                                // 1339\n            },                                                                                                         // 1340\n            _removeCursor: function removeCursor() {                                                                   // 1341\n                this._getCursor().removeClass(\"tt-cursor\");                                                            // 1342\n            },                                                                                                         // 1343\n            _moveCursor: function moveCursor(increment) {                                                              // 1344\n                var $suggestions, $oldCursor, newCursorIndex, $newCursor;                                              // 1345\n                if (!this.isOpen) {                                                                                    // 1346\n                    return;                                                                                            // 1347\n                }                                                                                                      // 1348\n                $oldCursor = this._getCursor();                                                                        // 1349\n                $suggestions = this._getSuggestions();                                                                 // 1350\n                this._removeCursor();                                                                                  // 1351\n                newCursorIndex = $suggestions.index($oldCursor) + increment;                                           // 1352\n                newCursorIndex = (newCursorIndex + 1) % ($suggestions.length + 1) - 1;                                 // 1353\n                if (newCursorIndex === -1) {                                                                           // 1354\n                    this.trigger(\"cursorRemoved\");                                                                     // 1355\n                    return;                                                                                            // 1356\n                } else if (newCursorIndex < -1) {                                                                      // 1357\n                    newCursorIndex = $suggestions.length - 1;                                                          // 1358\n                }                                                                                                      // 1359\n                this._setCursor($newCursor = $suggestions.eq(newCursorIndex));                                         // 1360\n                this._ensureVisible($newCursor);                                                                       // 1361\n            },                                                                                                         // 1362\n            _ensureVisible: function ensureVisible($el) {                                                              // 1363\n                var elTop, elBottom, menuScrollTop, menuHeight;                                                        // 1364\n                elTop = $el.position().top;                                                                            // 1365\n                elBottom = elTop + $el.outerHeight(true);                                                              // 1366\n                menuScrollTop = this.$menu.scrollTop();                                                                // 1367\n                menuHeight = this.$menu.height() + parseInt(this.$menu.css(\"paddingTop\"), 10) + parseInt(this.$menu.css(\"paddingBottom\"), 10);\n                if (elTop < 0) {                                                                                       // 1369\n                    this.$menu.scrollTop(menuScrollTop + elTop);                                                       // 1370\n                } else if (menuHeight < elBottom) {                                                                    // 1371\n                    this.$menu.scrollTop(menuScrollTop + (elBottom - menuHeight));                                     // 1372\n                }                                                                                                      // 1373\n            },                                                                                                         // 1374\n            close: function close() {                                                                                  // 1375\n                if (this.isOpen) {                                                                                     // 1376\n                    this.isOpen = false;                                                                               // 1377\n                    this._removeCursor();                                                                              // 1378\n                    this._hide();                                                                                      // 1379\n                    this.trigger(\"closed\");                                                                            // 1380\n                }                                                                                                      // 1381\n            },                                                                                                         // 1382\n            open: function open() {                                                                                    // 1383\n                if (!this.isOpen) {                                                                                    // 1384\n                    this.isOpen = true;                                                                                // 1385\n                    !this.isEmpty && this._show();                                                                     // 1386\n                    this.trigger(\"opened\");                                                                            // 1387\n                }                                                                                                      // 1388\n            },                                                                                                         // 1389\n            setLanguageDirection: function setLanguageDirection(dir) {                                                 // 1390\n                this.$menu.css(dir === \"ltr\" ? css.ltr : css.rtl);                                                     // 1391\n            },                                                                                                         // 1392\n            moveCursorUp: function moveCursorUp() {                                                                    // 1393\n                this._moveCursor(-1);                                                                                  // 1394\n            },                                                                                                         // 1395\n            moveCursorDown: function moveCursorDown() {                                                                // 1396\n                this._moveCursor(+1);                                                                                  // 1397\n            },                                                                                                         // 1398\n            getDatumForSuggestion: function getDatumForSuggestion($el) {                                               // 1399\n                var datum = null;                                                                                      // 1400\n                if ($el.length) {                                                                                      // 1401\n                    datum = {                                                                                          // 1402\n                        raw: Dataset.extractDatum($el),                                                                // 1403\n                        value: Dataset.extractValue($el),                                                              // 1404\n                        datasetName: Dataset.extractDatasetName($el)                                                   // 1405\n                    };                                                                                                 // 1406\n                }                                                                                                      // 1407\n                return datum;                                                                                          // 1408\n            },                                                                                                         // 1409\n            getDatumForCursor: function getDatumForCursor() {                                                          // 1410\n                return this.getDatumForSuggestion(this._getCursor().first());                                          // 1411\n            },                                                                                                         // 1412\n            getDatumForTopSuggestion: function getDatumForTopSuggestion() {                                            // 1413\n                return this.getDatumForSuggestion(this._getSuggestions().first());                                     // 1414\n            },                                                                                                         // 1415\n            update: function update(query) {                                                                           // 1416\n                _.each(this.datasets, updateDataset);                                                                  // 1417\n                function updateDataset(dataset) {                                                                      // 1418\n                    dataset.update(query);                                                                             // 1419\n                }                                                                                                      // 1420\n            },                                                                                                         // 1421\n            empty: function empty() {                                                                                  // 1422\n                _.each(this.datasets, clearDataset);                                                                   // 1423\n                this.isEmpty = true;                                                                                   // 1424\n                function clearDataset(dataset) {                                                                       // 1425\n                    dataset.clear();                                                                                   // 1426\n                }                                                                                                      // 1427\n            },                                                                                                         // 1428\n            isVisible: function isVisible() {                                                                          // 1429\n                return this.isOpen && !this.isEmpty;                                                                   // 1430\n            },                                                                                                         // 1431\n            destroy: function destroy() {                                                                              // 1432\n                this.$menu.off(\".tt\");                                                                                 // 1433\n                this.$menu = null;                                                                                     // 1434\n                _.each(this.datasets, destroyDataset);                                                                 // 1435\n                function destroyDataset(dataset) {                                                                     // 1436\n                    dataset.destroy();                                                                                 // 1437\n                }                                                                                                      // 1438\n            }                                                                                                          // 1439\n        });                                                                                                            // 1440\n        return Dropdown;                                                                                               // 1441\n        function initializeDataset(oDataset) {                                                                         // 1442\n            return new Dataset(oDataset);                                                                              // 1443\n        }                                                                                                              // 1444\n    }();                                                                                                               // 1445\n    var Typeahead = function() {                                                                                       // 1446\n        \"use strict\";                                                                                                  // 1447\n        var attrsKey = \"ttAttrs\";                                                                                      // 1448\n        function Typeahead(o) {                                                                                        // 1449\n            var $menu, $input, $hint;                                                                                  // 1450\n            o = o || {};                                                                                               // 1451\n            if (!o.input) {                                                                                            // 1452\n                $.error(\"missing input\");                                                                              // 1453\n            }                                                                                                          // 1454\n            this.isActivated = false;                                                                                  // 1455\n            this.autoselect = !!o.autoselect;                                                                          // 1456\n            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;                                                // 1457\n            this.$node = buildDom(o.input, o.withHint);                                                                // 1458\n            $menu = this.$node.find(\".tt-dropdown-menu\");                                                              // 1459\n            $input = this.$node.find(\".tt-input\");                                                                     // 1460\n            $hint = this.$node.find(\".tt-hint\");                                                                       // 1461\n            $input.on(\"blur.tt\", function($e) {                                                                        // 1462\n                var active, isActive, hasActive;                                                                       // 1463\n                active = document.activeElement;                                                                       // 1464\n                isActive = $menu.is(active);                                                                           // 1465\n                hasActive = $menu.has(active).length > 0;                                                              // 1466\n                if (_.isMsie() && (isActive || hasActive)) {                                                           // 1467\n                    $e.preventDefault();                                                                               // 1468\n                    $e.stopImmediatePropagation();                                                                     // 1469\n                    _.defer(function() {                                                                               // 1470\n                        $input.focus();                                                                                // 1471\n                    });                                                                                                // 1472\n                }                                                                                                      // 1473\n            });                                                                                                        // 1474\n            $menu.on(\"mousedown.tt\", function($e) {                                                                    // 1475\n                $e.preventDefault();                                                                                   // 1476\n            });                                                                                                        // 1477\n            this.eventBus = o.eventBus || new EventBus({                                                               // 1478\n                el: $input                                                                                             // 1479\n            });                                                                                                        // 1480\n            this.dropdown = new Dropdown({                                                                             // 1481\n                menu: $menu,                                                                                           // 1482\n                datasets: o.datasets                                                                                   // 1483\n            }).onSync(\"suggestionClicked\", this._onSuggestionClicked, this).onSync(\"cursorMoved\", this._onCursorMoved, this).onSync(\"cursorRemoved\", this._onCursorRemoved, this).onSync(\"opened\", this._onOpened, this).onSync(\"closed\", this._onClosed, this).onAsync(\"datasetRendered\", this._onDatasetRendered, this);\n            this.input = new Input({                                                                                   // 1485\n                input: $input,                                                                                         // 1486\n                hint: $hint                                                                                            // 1487\n            }).onSync(\"focused\", this._onFocused, this).onSync(\"blurred\", this._onBlurred, this).onSync(\"enterKeyed\", this._onEnterKeyed, this).onSync(\"tabKeyed\", this._onTabKeyed, this).onSync(\"escKeyed\", this._onEscKeyed, this).onSync(\"upKeyed\", this._onUpKeyed, this).onSync(\"downKeyed\", this._onDownKeyed, this).onSync(\"leftKeyed\", this._onLeftKeyed, this).onSync(\"rightKeyed\", this._onRightKeyed, this).onSync(\"queryChanged\", this._onQueryChanged, this).onSync(\"whitespaceChanged\", this._onWhitespaceChanged, this);\n            this._setLanguageDirection();                                                                              // 1489\n        }                                                                                                              // 1490\n        _.mixin(Typeahead.prototype, {                                                                                 // 1491\n            _onSuggestionClicked: function onSuggestionClicked(type, $el) {                                            // 1492\n                var datum;                                                                                             // 1493\n                if (datum = this.dropdown.getDatumForSuggestion($el)) {                                                // 1494\n                    this._select(datum);                                                                               // 1495\n                }                                                                                                      // 1496\n            },                                                                                                         // 1497\n            _onCursorMoved: function onCursorMoved() {                                                                 // 1498\n                var datum = this.dropdown.getDatumForCursor();                                                         // 1499\n                this.input.setInputValue(datum.value, true);                                                           // 1500\n                this.eventBus.trigger(\"cursorchanged\", datum.raw, datum.datasetName);                                  // 1501\n            },                                                                                                         // 1502\n            _onCursorRemoved: function onCursorRemoved() {                                                             // 1503\n                this.input.resetInputValue();                                                                          // 1504\n                this._updateHint();                                                                                    // 1505\n            },                                                                                                         // 1506\n            _onDatasetRendered: function onDatasetRendered() {                                                         // 1507\n                this._updateHint();                                                                                    // 1508\n            },                                                                                                         // 1509\n            _onOpened: function onOpened() {                                                                           // 1510\n                this._updateHint();                                                                                    // 1511\n                this.eventBus.trigger(\"opened\");                                                                       // 1512\n            },                                                                                                         // 1513\n            _onClosed: function onClosed() {                                                                           // 1514\n                this.input.clearHint();                                                                                // 1515\n                this.eventBus.trigger(\"closed\");                                                                       // 1516\n            },                                                                                                         // 1517\n            _onFocused: function onFocused() {                                                                         // 1518\n                this.isActivated = true;                                                                               // 1519\n                this.dropdown.open();                                                                                  // 1520\n            },                                                                                                         // 1521\n            _onBlurred: function onBlurred() {                                                                         // 1522\n                this.isActivated = false;                                                                              // 1523\n                this.dropdown.empty();                                                                                 // 1524\n                this.dropdown.close();                                                                                 // 1525\n            },                                                                                                         // 1526\n            _onEnterKeyed: function onEnterKeyed(type, $e) {                                                           // 1527\n                var cursorDatum, topSuggestionDatum;                                                                   // 1528\n                cursorDatum = this.dropdown.getDatumForCursor();                                                       // 1529\n                topSuggestionDatum = this.dropdown.getDatumForTopSuggestion();                                         // 1530\n                if (cursorDatum) {                                                                                     // 1531\n                    this._select(cursorDatum);                                                                         // 1532\n                    $e.preventDefault();                                                                               // 1533\n                } else if (this.autoselect && topSuggestionDatum) {                                                    // 1534\n                    this._select(topSuggestionDatum);                                                                  // 1535\n                    $e.preventDefault();                                                                               // 1536\n                }                                                                                                      // 1537\n            },                                                                                                         // 1538\n            _onTabKeyed: function onTabKeyed(type, $e) {                                                               // 1539\n                var datum;                                                                                             // 1540\n                if (datum = this.dropdown.getDatumForCursor()) {                                                       // 1541\n                    this._select(datum);                                                                               // 1542\n                    $e.preventDefault();                                                                               // 1543\n                } else {                                                                                               // 1544\n                    this._autocomplete(true);                                                                          // 1545\n                }                                                                                                      // 1546\n            },                                                                                                         // 1547\n            _onEscKeyed: function onEscKeyed() {                                                                       // 1548\n                this.dropdown.close();                                                                                 // 1549\n                this.input.resetInputValue();                                                                          // 1550\n            },                                                                                                         // 1551\n            _onUpKeyed: function onUpKeyed() {                                                                         // 1552\n                var query = this.input.getQuery();                                                                     // 1553\n                this.dropdown.isEmpty && query.length >= this.minLength ? this.dropdown.update(query) : this.dropdown.moveCursorUp();\n                this.dropdown.open();                                                                                  // 1555\n            },                                                                                                         // 1556\n            _onDownKeyed: function onDownKeyed() {                                                                     // 1557\n                var query = this.input.getQuery();                                                                     // 1558\n                this.dropdown.isEmpty && query.length >= this.minLength ? this.dropdown.update(query) : this.dropdown.moveCursorDown();\n                this.dropdown.open();                                                                                  // 1560\n            },                                                                                                         // 1561\n            _onLeftKeyed: function onLeftKeyed() {                                                                     // 1562\n                this.dir === \"rtl\" && this._autocomplete();                                                            // 1563\n            },                                                                                                         // 1564\n            _onRightKeyed: function onRightKeyed() {                                                                   // 1565\n                this.dir === \"ltr\" && this._autocomplete();                                                            // 1566\n            },                                                                                                         // 1567\n            _onQueryChanged: function onQueryChanged(e, query) {                                                       // 1568\n                this.input.clearHintIfInvalid();                                                                       // 1569\n                query.length >= this.minLength ? this.dropdown.update(query) : this.dropdown.empty();                  // 1570\n                this.dropdown.open();                                                                                  // 1571\n                this._setLanguageDirection();                                                                          // 1572\n            },                                                                                                         // 1573\n            _onWhitespaceChanged: function onWhitespaceChanged() {                                                     // 1574\n                this._updateHint();                                                                                    // 1575\n                this.dropdown.open();                                                                                  // 1576\n            },                                                                                                         // 1577\n            _setLanguageDirection: function setLanguageDirection() {                                                   // 1578\n                var dir;                                                                                               // 1579\n                if (this.dir !== (dir = this.input.getLanguageDirection())) {                                          // 1580\n                    this.dir = dir;                                                                                    // 1581\n                    this.$node.css(\"direction\", dir);                                                                  // 1582\n                    this.dropdown.setLanguageDirection(dir);                                                           // 1583\n                }                                                                                                      // 1584\n            },                                                                                                         // 1585\n            _updateHint: function updateHint() {                                                                       // 1586\n                var datum, val, query, escapedQuery, frontMatchRegEx, match;                                           // 1587\n                datum = this.dropdown.getDatumForTopSuggestion();                                                      // 1588\n                if (datum && this.dropdown.isVisible() && !this.input.hasOverflow()) {                                 // 1589\n                    val = this.input.getInputValue();                                                                  // 1590\n                    query = Input.normalizeQuery(val);                                                                 // 1591\n                    escapedQuery = _.escapeRegExChars(query);                                                          // 1592\n                    frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");                               // 1593\n                    match = frontMatchRegEx.exec(datum.value);                                                         // 1594\n                    match ? this.input.setHint(val + match[1]) : this.input.clearHint();                               // 1595\n                } else {                                                                                               // 1596\n                    this.input.clearHint();                                                                            // 1597\n                }                                                                                                      // 1598\n            },                                                                                                         // 1599\n            _autocomplete: function autocomplete(laxCursor) {                                                          // 1600\n                var hint, query, isCursorAtEnd, datum;                                                                 // 1601\n                hint = this.input.getHint();                                                                           // 1602\n                query = this.input.getQuery();                                                                         // 1603\n                isCursorAtEnd = laxCursor || this.input.isCursorAtEnd();                                               // 1604\n                if (hint && query !== hint && isCursorAtEnd) {                                                         // 1605\n                    datum = this.dropdown.getDatumForTopSuggestion();                                                  // 1606\n                    datum && this.input.setInputValue(datum.value);                                                    // 1607\n                    this.eventBus.trigger(\"autocompleted\", datum.raw, datum.datasetName);                              // 1608\n                }                                                                                                      // 1609\n            },                                                                                                         // 1610\n            _select: function select(datum) {                                                                          // 1611\n                this.input.setQuery(datum.value);                                                                      // 1612\n                this.input.setInputValue(datum.value, true);                                                           // 1613\n                this._setLanguageDirection();                                                                          // 1614\n                this.eventBus.trigger(\"selected\", datum.raw, datum.datasetName);                                       // 1615\n                this.dropdown.close();                                                                                 // 1616\n                _.defer(_.bind(this.dropdown.empty, this.dropdown));                                                   // 1617\n            },                                                                                                         // 1618\n            open: function open() {                                                                                    // 1619\n                this.dropdown.open();                                                                                  // 1620\n            },                                                                                                         // 1621\n            close: function close() {                                                                                  // 1622\n                this.dropdown.close();                                                                                 // 1623\n            },                                                                                                         // 1624\n            setVal: function setVal(val) {                                                                             // 1625\n                val = _.toStr(val);                                                                                    // 1626\n                if (this.isActivated) {                                                                                // 1627\n                    this.input.setInputValue(val);                                                                     // 1628\n                } else {                                                                                               // 1629\n                    this.input.setQuery(val);                                                                          // 1630\n                    this.input.setInputValue(val, true);                                                               // 1631\n                }                                                                                                      // 1632\n                this._setLanguageDirection();                                                                          // 1633\n            },                                                                                                         // 1634\n            getVal: function getVal() {                                                                                // 1635\n                return this.input.getQuery();                                                                          // 1636\n            },                                                                                                         // 1637\n            destroy: function destroy() {                                                                              // 1638\n                this.input.destroy();                                                                                  // 1639\n                this.dropdown.destroy();                                                                               // 1640\n                destroyDomStructure(this.$node);                                                                       // 1641\n                this.$node = null;                                                                                     // 1642\n            }                                                                                                          // 1643\n        });                                                                                                            // 1644\n        return Typeahead;                                                                                              // 1645\n        function buildDom(input, withHint) {                                                                           // 1646\n            var $input, $wrapper, $dropdown, $hint;                                                                    // 1647\n            $input = $(input);                                                                                         // 1648\n            $wrapper = $(html.wrapper).css(css.wrapper);                                                               // 1649\n            $dropdown = $(html.dropdown).css(css.dropdown);                                                            // 1650\n            $hint = $input.clone().css(css.hint).css(getBackgroundStyles($input));                                     // 1651\n            $hint.val(\"\").removeData().addClass(\"tt-hint\").removeAttr(\"id name placeholder required\").prop(\"readonly\", true).attr({\n                autocomplete: \"off\",                                                                                   // 1653\n                spellcheck: \"false\",                                                                                   // 1654\n                tabindex: -1                                                                                           // 1655\n            });                                                                                                        // 1656\n            $input.data(attrsKey, {                                                                                    // 1657\n                dir: $input.attr(\"dir\"),                                                                               // 1658\n                autocomplete: $input.attr(\"autocomplete\"),                                                             // 1659\n                spellcheck: $input.attr(\"spellcheck\"),                                                                 // 1660\n                style: $input.attr(\"style\")                                                                            // 1661\n            });                                                                                                        // 1662\n            $input.addClass(\"tt-input\").attr({                                                                         // 1663\n                autocomplete: \"off\",                                                                                   // 1664\n                spellcheck: false                                                                                      // 1665\n            }).css(withHint ? css.input : css.inputWithNoHint);                                                        // 1666\n            try {                                                                                                      // 1667\n                !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");                                                     // 1668\n            } catch (e) {}                                                                                             // 1669\n            return $input.wrap($wrapper).parent().prepend(withHint ? $hint : null).append($dropdown);                  // 1670\n        }                                                                                                              // 1671\n        function getBackgroundStyles($el) {                                                                            // 1672\n            return {                                                                                                   // 1673\n                backgroundAttachment: $el.css(\"background-attachment\"),                                                // 1674\n                backgroundClip: $el.css(\"background-clip\"),                                                            // 1675\n                backgroundColor: $el.css(\"background-color\"),                                                          // 1676\n                backgroundImage: $el.css(\"background-image\"),                                                          // 1677\n                backgroundOrigin: $el.css(\"background-origin\"),                                                        // 1678\n                backgroundPosition: $el.css(\"background-position\"),                                                    // 1679\n                backgroundRepeat: $el.css(\"background-repeat\"),                                                        // 1680\n                backgroundSize: $el.css(\"background-size\")                                                             // 1681\n            };                                                                                                         // 1682\n        }                                                                                                              // 1683\n        function destroyDomStructure($node) {                                                                          // 1684\n            var $input = $node.find(\".tt-input\");                                                                      // 1685\n            _.each($input.data(attrsKey), function(val, key) {                                                         // 1686\n                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);                                   // 1687\n            });                                                                                                        // 1688\n            $input.detach().removeData(attrsKey).removeClass(\"tt-input\").insertAfter($node);                           // 1689\n            $node.remove();                                                                                            // 1690\n        }                                                                                                              // 1691\n    }();                                                                                                               // 1692\n    (function() {                                                                                                      // 1693\n        \"use strict\";                                                                                                  // 1694\n        var old, typeaheadKey, methods;                                                                                // 1695\n        old = $.fn.typeahead;                                                                                          // 1696\n        typeaheadKey = \"ttTypeahead\";                                                                                  // 1697\n        methods = {                                                                                                    // 1698\n            initialize: function initialize(o, datasets) {                                                             // 1699\n                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);                               // 1700\n                o = o || {};                                                                                           // 1701\n                return this.each(attach);                                                                              // 1702\n                function attach() {                                                                                    // 1703\n                    var $input = $(this), eventBus, typeahead;                                                         // 1704\n                    _.each(datasets, function(d) {                                                                     // 1705\n                        d.highlight = !!o.highlight;                                                                   // 1706\n                    });                                                                                                // 1707\n                    typeahead = new Typeahead({                                                                        // 1708\n                        input: $input,                                                                                 // 1709\n                        eventBus: eventBus = new EventBus({                                                            // 1710\n                            el: $input                                                                                 // 1711\n                        }),                                                                                            // 1712\n                        withHint: _.isUndefined(o.hint) ? true : !!o.hint,                                             // 1713\n                        minLength: o.minLength,                                                                        // 1714\n                        autoselect: o.autoselect,                                                                      // 1715\n                        datasets: datasets                                                                             // 1716\n                    });                                                                                                // 1717\n                    $input.data(typeaheadKey, typeahead);                                                              // 1718\n                }                                                                                                      // 1719\n            },                                                                                                         // 1720\n            open: function open() {                                                                                    // 1721\n                return this.each(openTypeahead);                                                                       // 1722\n                function openTypeahead() {                                                                             // 1723\n                    var $input = $(this), typeahead;                                                                   // 1724\n                    if (typeahead = $input.data(typeaheadKey)) {                                                       // 1725\n                        typeahead.open();                                                                              // 1726\n                    }                                                                                                  // 1727\n                }                                                                                                      // 1728\n            },                                                                                                         // 1729\n            close: function close() {                                                                                  // 1730\n                return this.each(closeTypeahead);                                                                      // 1731\n                function closeTypeahead() {                                                                            // 1732\n                    var $input = $(this), typeahead;                                                                   // 1733\n                    if (typeahead = $input.data(typeaheadKey)) {                                                       // 1734\n                        typeahead.close();                                                                             // 1735\n                    }                                                                                                  // 1736\n                }                                                                                                      // 1737\n            },                                                                                                         // 1738\n            val: function val(newVal) {                                                                                // 1739\n                return !arguments.length ? getVal(this.first()) : this.each(setVal);                                   // 1740\n                function setVal() {                                                                                    // 1741\n                    var $input = $(this), typeahead;                                                                   // 1742\n                    if (typeahead = $input.data(typeaheadKey)) {                                                       // 1743\n                        typeahead.setVal(newVal);                                                                      // 1744\n                    }                                                                                                  // 1745\n                }                                                                                                      // 1746\n                function getVal($input) {                                                                              // 1747\n                    var typeahead, query;                                                                              // 1748\n                    if (typeahead = $input.data(typeaheadKey)) {                                                       // 1749\n                        query = typeahead.getVal();                                                                    // 1750\n                    }                                                                                                  // 1751\n                    return query;                                                                                      // 1752\n                }                                                                                                      // 1753\n            },                                                                                                         // 1754\n            destroy: function destroy() {                                                                              // 1755\n                return this.each(unattach);                                                                            // 1756\n                function unattach() {                                                                                  // 1757\n                    var $input = $(this), typeahead;                                                                   // 1758\n                    if (typeahead = $input.data(typeaheadKey)) {                                                       // 1759\n                        typeahead.destroy();                                                                           // 1760\n                        $input.removeData(typeaheadKey);                                                               // 1761\n                    }                                                                                                  // 1762\n                }                                                                                                      // 1763\n            }                                                                                                          // 1764\n        };                                                                                                             // 1765\n        $.fn.typeahead = function(method) {                                                                            // 1766\n            var tts;                                                                                                   // 1767\n            if (methods[method] && method !== \"initialize\") {                                                          // 1768\n                tts = this.filter(function() {                                                                         // 1769\n                    return !!$(this).data(typeaheadKey);                                                               // 1770\n                });                                                                                                    // 1771\n                return methods[method].apply(tts, [].slice.call(arguments, 1));                                        // 1772\n            } else {                                                                                                   // 1773\n                return methods.initialize.apply(this, arguments);                                                      // 1774\n            }                                                                                                          // 1775\n        };                                                                                                             // 1776\n        $.fn.typeahead.noConflict = function noConflict() {                                                            // 1777\n            $.fn.typeahead = old;                                                                                      // 1778\n            return this;                                                                                               // 1779\n        };                                                                                                             // 1780\n    })();                                                                                                              // 1781\n})(window.jQuery);                                                                                                     // 1782\n                                                                                                                       // 1783\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n"]}}]