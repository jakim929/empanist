{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"../collections/account.js","imported":["Accounts"],"specifiers":[{"kind":"named","imported":"Accounts","local":"Accounts"}]},{"source":"../collections/accompanistProfile.js","imported":["AccompanistProfile"],"specifiers":[{"kind":"named","imported":"AccompanistProfile","local":"AccompanistProfile"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/server/main.js","filenameRelative":"/server/main.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/server/main.js.map","sourceFileName":"/server/main.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"main"},"ignored":false,"code":"var _meteor = require('meteor/meteor');\n\nvar _account = require('../collections/account.js');\n\nvar _accompanistProfile = require('../collections/accompanistProfile.js');\n\n//window.AccompanistProfile = AccompanistProfile\n\n_meteor.Meteor.startup(function () {\n  // code to run on server at startup\n  // var options = {\n  //   keepHistory: 1000 * 60 * 5,\n  //   localSearch: true\n  // };\n  //\n  // function buildRegExp(searchText) {\n  //   var words = searchText.trim().split(/[ \\-\\:]+/);\n  //   var exps = _.map(words, function(word) {\n  //     return \"(?=.*\" + word + \")\";\n  //   });\n  //   var fullExp = exps.join('') + \".+\";\n  //   return new RegExp(fullExp, \"i\");\n  // }\n  //\n  // SearchSource.defineSource('accounts', function(searchText, options) {\n  //   var options = {sort: {isoScore: -1}, limit: 20};\n  //   if(searchText) {\n  //     var regExp = buildRegExp(searchText);\n  //     var selector = {packageName: regExp, description: regExp};\n  //     return Accounts.find(selector, options).fetch();\n  //   } else {\n  //     return Accounts.find({}, options).fetch();\n  //   }\n  // });\n});\n\n// Template.NewAccompLayout.events({\n//   'submit form': function(){\n//     event/preventDefault();\n//     var geo = new GeoCoder();\n//     var result = geo.geocode('29 champs elysée paris');\n//     console.log(result);\n\n//   }\n\n// })\n\nvar AccompanistProf = db.get('AccompanistProfile');\n\nAccompanistProf.before.insert(function (userId, doc) {\n  doc.mylocation = Date.now();\n});\n\n// Template.search.helpers({\n//   parsed_loc: function () {\n\n//     var geo = new GeoCoder();\n//     var result = geo.geocode('29 champs elysée paris');\n//     JSON.parse(result).aSpecificField;\n//     console.log(result);\n//     return JSON.parse(this.MESSAGE).uri;\n// }\n\n// });","ast":null,"map":{"version":3,"sources":["/server/main.js"],"names":[],"mappings":"AAAA;;AACA;;AACA;;;;AAIA,eAAO,OAAP,CAAe,YAAM;;;;;;;;;;;;;;;;;;;;;;;;;;CAAN,CAAf;;;;;;;;;;;;;AAuCA,IAAI,kBAAkB,GAAG,GAAH,CAAO,oBAAP,CAAlB;;AAEJ,gBAAgB,MAAhB,CAAuB,MAAvB,CAA8B,UAAU,MAAV,EAAkB,GAAlB,EAAuB;AACnD,MAAI,UAAJ,GAAiB,KAAK,GAAL,EAAjB,CADmD;CAAvB,CAA9B","file":"/server/main.js.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Accounts } from '../collections/account.js'\nimport { AccompanistProfile } from '../collections/accompanistProfile.js'\n\n//window.AccompanistProfile = AccompanistProfile\n\nMeteor.startup(() => {\n  // code to run on server at startup\n  // var options = {\n  //   keepHistory: 1000 * 60 * 5,\n  //   localSearch: true\n  // };\n  //\n  // function buildRegExp(searchText) {\n  //   var words = searchText.trim().split(/[ \\-\\:]+/);\n  //   var exps = _.map(words, function(word) {\n  //     return \"(?=.*\" + word + \")\";\n  //   });\n  //   var fullExp = exps.join('') + \".+\";\n  //   return new RegExp(fullExp, \"i\");\n  // }\n  //\n  // SearchSource.defineSource('accounts', function(searchText, options) {\n  //   var options = {sort: {isoScore: -1}, limit: 20};\n  //   if(searchText) {\n  //     var regExp = buildRegExp(searchText);\n  //     var selector = {packageName: regExp, description: regExp};\n  //     return Accounts.find(selector, options).fetch();\n  //   } else {\n  //     return Accounts.find({}, options).fetch();\n  //   }\n  // });\n});\n\n// Template.NewAccompLayout.events({\n//   'submit form': function(){\n//     event/preventDefault();\n//     var geo = new GeoCoder();\n//     var result = geo.geocode('29 champs elysée paris');\n//     console.log(result);\n\n//   }\n\n// })\n\nvar AccompanistProf = db.get('AccompanistProfile');\n\nAccompanistProf.before.insert(function (userId, doc) {\n  doc.mylocation = Date.now();\n});\n\n\n\n// Template.search.helpers({\n//   parsed_loc: function () {\n\n//     var geo = new GeoCoder();\n//     var result = geo.geocode('29 champs elysée paris');\n//     JSON.parse(result).aSpecificField;\n//     console.log(result); \n//     return JSON.parse(this.MESSAGE).uri;\n// }\n\n// });"]},"hash":"e8b144ba2d1e231cfe14e3ab51c1cfa7246f0363"}
